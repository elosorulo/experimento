{"version":3,"sources":["state/reducers/ambientLightReducer.js","state/actionTypes.js","state/reducers/spotLightsReducer.js","state/reducers/planesReducer.js","state/reducers/cameraReducer.js","state/reducers/outlineReducer.js","state/reducers/shapesAnimationsReducer.js","state/reducers/storeReducer.js","state/store.js","components/providers/AmbientLightProvider.jsx","components/3d/light/SpotLight.jsx","components/providers/SpotLightsProvider.jsx","components/3d/geometry/Plane.jsx","components/3d/material/color.js","components/providers/PlanesProvider.jsx","services/EventPolyphonyService.js","services/SequenceReaderService.js","components/Sound.jsx","services/EventDispatcherService.js","components/Sequencer.jsx","components/Effects.jsx","components/3d/models/SkyBox.jsx","procedural/ndwfc-tools.js","components/3d/modules/ColumnaGiro.js","components/3d/modules/ColumnaGiroNS.js","components/3d/modules/Pared.js","components/3d/modules/ParedNS.js","components/3d/modules/ParedEsquina.js","components/3d/modules/ParedEsquinaNS.js","components/3d/modules/Puerta.js","components/3d/modules/SobrePuerta.js","components/wavesTiles.js","components/WavesGenerator.jsx","components/3d/modules/Module.jsx","components/WaveModules.jsx","components/Scene.jsx","components/Frame.jsx","style/color.js","components/text/Title.jsx","components/text/SubTitle.jsx","components/text/Credits.jsx","hooks/useMobilePress.js","components/buttons/StyledButton.jsx","utils/isVertical.js","components/layout/pages/InitialPage.jsx","style/GlobalStyle.jsx","App.js","serviceWorker.js","index.js","procedural/ndwfc.js"],"names":["ambientLightReducer","state","action","type","props","spotLightsReducer","key","filter","spotLight","planesReducer","plane","cameraReducer","startTime","outlineReducer","mesh","omit","delta","max","Math","random","getShapes","oldShapes","firstIndex","lastIndex","newProps","particlePositions","isParticle","initialPosition","finalPosition","width","height","depth","map","oldProps","index","latestIndex","betweenRange","shapesAnimationsReducer","actionType","amount","lastFree","size","animationSize","getFirstIndex","getLastIndex","getNextFree","shapes","updateAnimations","stateReducer","camera","ambientLight","spotLights","planes","outline","ringsAnimations","dodecahedronsAnimations","lathesAnimations","spheresAnimations","tetrahedronsAnimations","animation","Array","initialState","position","intensity","waves","create","set","dispatch","storeReducer","setWaves","useStore","storeApi","AmbientLightProvider","SpotLight","lightTarget","Mesh","spotLightRef","React","useRef","useEffect","current","shadowDarkness","useFrame","clock","update","object","target","ref","shadow-bias","shadow-mapSize-width","shadow-mapSize-height","castShadow","SpotLightsProvider","Plane","THREE","setHSL","multiplyScalar","scale","rotation","n","PI","args","color","receiveShadow","opacity","PlanesProvider","applyGrid","fn","keys","flatMap","z","y","x","positionGridPosition","separation","getTime","time","delay","applyInterpolationGrid","event","polyphony","sprites","applyPoliphony","applyPositionGrid","Error","JSON","stringify","EventPolyphonyService","apply","events","getStartTime","json","useSpriteProps","length","Object","includes","reduce","sprite","getEvents","eventsJson","spritesJson","PolyphonyService","eventPlusSprite","eventWithoutProps","eventWithoutPropsOrSprites","getEventPlusSprite","element","SequenceReaderService","getInitialCamera","initialCamera","getLoops","SoundContext","createContext","sounds","eventTypes","ADD_SOUND","PLAY_SOUND","STOP_SOUND","REMOVE_SOUND","LOOP_SOUND","soundFns","add","file","Howl","src","loop","play","stop","remove","unload","soundApi","execute","Sound","Provider","value","children","isSoundEvent","values","SoundEventTypes","EventDispatcherService","soundsApi","console","log","setTimeout","elapsedTime","sceneService","SequenceService","Sequencer","useThree","Effects","outlineRef","OverrideMaterialManager","workaroundEnabled","selection","getState","fallback","luminanceThreshold","luminanceSmoothing","eskil","offset","darkness","brightness","contrast","cubeRenderTarget","WebGLCubeRenderTarget","format","RGBFormat","generateMipmaps","minFilter","LinearMipmapLinearFilter","CubeCamera","SkyBox","scene","gl","texture","CubeTextureLoader","load","background","WFCTool3D","tiles","materials","weights","n_prototypes","formulae","transformBank","ry","m","r","parse","i","j","k","rx","rz","fz","fx","fy","equal","fit","d","a","b","this","addTile","s","transforms","weight","t","split","push","tests","tl","tt","ok","addMaterial","symbol","material","getTileFormulae","generateWFCInput","rules","nd","plotWFCOutput","root","wave","pop","wz","wx","wy","geometry","K","parseInt","cube","Model","group","useGLTF","nodes","Columna_esquina","url","distance","preload","Columna_Ns","Pared","Pared_Ns","Pared_esquina","Paredesquina_Ns","Puerta","Pared_puerta_Ns","wfc","increment","multiply","wavesTiles","params","component","tool","waveTiles","forEach","waveTile","expansions","e","op","wfcInput","initialSize","WFC","step","expand","ceil","readout","WaveTest","cloneDeep","Module","keyToPosition","WaveModules","waveKey","Scene","orbitRef","shadowMap","renderSingleSided","outputEncoding","sRGBEncoding","gammaOutput","gammaFactor","enableKeys","WavesGenerator","FullSizeCanvas","style","invalidateFrameloop","Frame","useContext","concurrent","antialias","fontColor","Title","styled","h1","noMarginTop","mobileHorizontal","SubTitle","Credits","useMobilePress","useState","active","isActive","moved","isMoved","onClick","undefined","onTouchStart","preventDefault","onTouchEnd","persist","onTouchMove","onTouchCancel","onMouseDown","onMouseUp","onMouseLeave","baseY","paddingMinusBorder","base","borderWidth","StyledButtonWithoutMobileSupport","button","hover","absolute","top","right","floating","StyledButton","press","vw","document","documentElement","clientWidth","window","innerWidth","isVertical","clientHeight","innerHeight","isMobile","isTablet","Description","Grid","item","xs","PlayButton","started","fontSize","InitialPage","container","justify","align","spacing","start","GlobalStyle","createGlobalStyle","App","setStarted","className","Boolean","location","hostname","match","ReactDOM","render","StrictMode","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","error","message","module","exports","wavefront","n_patterns","coord","entropy","one","S","pi","neighborable","didx","indexOf","propagate","p","stack","dirs","d0","fill","d1","q","mod","argmax","vals","mi","mv","Infinity","collapse","result","oh","assign","xmin","xmax","coords","cc","c","concat","slice","min_ent","min_arg","ent","isNaN"],"mappings":"6NAaeA,EAXa,SAACC,EAAOC,GAChC,OAAOA,EAAOC,MACV,ICUyB,oBDTrB,OAAO,eACAD,EAAOE,OAElB,QACI,OAAOH,IEkBJI,EAzBW,SAACJ,EAAOC,GAC9B,OAAOA,EAAOC,MACV,IDkBsB,iBCjBlB,MAAM,GAAN,mBACOF,GADP,cAGQK,IAAKJ,EAAOI,KACTJ,EAAOE,SAGtB,IDYyB,oBCXrB,MAAO,CACHH,EAAMM,QAAO,SAAAC,GAAS,OAAIA,EAAUF,MAAQJ,EAAOI,OADhD,aAGCA,IAAKJ,EAAOI,KACTJ,EAAOE,QAGtB,IDMyB,oBCLrB,OAAOH,EAAMM,QAAO,SAAAC,GAAS,OAAIA,EAAUF,MAAQJ,EAAOI,OAC9D,QACI,OAAOL,ICIJQ,EAzBO,SAACR,EAAOC,GAC1B,OAAOA,EAAOC,MACV,IF0BiB,YEzBb,MAAM,GAAN,mBACOF,GADP,cAGQK,IAAKJ,EAAOI,KACTJ,EAAOE,SAGtB,IFoBoB,eEnBhB,MAAO,CACHH,EAAMM,QAAO,SAAAG,GAAK,OAAIA,EAAMJ,MAAQJ,EAAOI,OADxC,aAGCA,IAAKJ,EAAOI,KACTJ,EAAOE,QAGtB,IFcoB,eEbhB,OAAOH,EAAMM,QAAO,SAAAG,GAAK,OAAIA,EAAMJ,MAAQJ,EAAOI,OACtD,QACI,OAAOL,ICLJU,EAhBO,SAACV,EAAOC,GAC1B,OAAOA,EAAOC,MACV,IHFkB,aGGd,OAAO,eACAD,EAAOE,OAElB,IHJmB,cGKf,OAAO,eACAF,EAAOE,MADd,CAEIQ,UAAWV,EAAOU,YAE1B,QACI,OAAOX,I,gBCGJY,EAdQ,SAACZ,EAAOC,GAC3B,OAAOA,EAAOC,MACV,IJkCyB,oBIjCrB,OAAO,eACAF,EADP,eAEKC,EAAOI,IAAMJ,EAAOY,OAE7B,IJ+ByB,oBI9BrB,OAAOC,eAAKd,EAAOC,EAAOI,KAC9B,QACI,OAAOL,ICLbe,EAAQ,SAACC,GAAD,OAASC,KAAKC,SAAWF,EAAMA,EAAM,GAkC7CG,EAAY,SAACC,EAAWC,EAAYC,EAAWC,GACjD,IAAMC,EAAoB,kBAAMD,EAASE,YAjCfC,EAkCtBH,EAASG,gBAlC8BC,EAmCvCJ,EAASI,cAnC6CC,EARxC,EAQ+CC,EAN9C,EAMsDC,EAJvD,EAKX,CACHJ,gBAAiB,CACbA,EAAgB,GAAKX,EAAMa,GAC3BF,EAAgB,GAAKX,EAAMc,GAC3BH,EAAgB,GAAKX,EAAMe,IAE/BH,cAAe,CACXA,EAAc,GAAKZ,EAAMa,GACzBD,EAAc,GAAKZ,EAAMc,GACzBF,EAAc,GAAKZ,EAAMe,MA6B7B,GAvCqB,IAACJ,EAAiBC,EAAeC,EAAOC,EAAQC,GAmDzE,OAXcV,EAAUW,KAAI,SAACC,EAAUC,GACnC,OA1Ba,SAACA,EAAOZ,EAAYa,GACrC,OAAQD,GAASZ,GAAcY,GAASC,EAyB7BC,CACHF,EACAZ,EACAC,GAHG,eAKIC,EALJ,GAMIC,IANJ,CAOCnB,KAAM4B,EAAQZ,GA1DZ,IA2DFW,MAoCDI,EAhBiB,SAAAC,GAAU,OAAI,SAACrC,EAAOC,GAElD,OAAOA,EAAOC,MACV,KAAKmC,EACD,OAnBa,SAACjB,EAAWkB,EAAQC,EAAU5B,EAAWY,GAC9D,IAAMiB,EAAOjB,EAASkB,eAAiBlB,EAASE,WAjElC,EAiE2D,GACnEJ,EArCY,SAACkB,EAAUE,EAAeH,GAE5C,OAAOC,EAAWE,EAAgBH,EAAS,EAAIC,EAAWD,EAmCvCI,CAAcH,EAAUC,EAAMF,GAC3ChB,EAjCW,SAACD,EAAYoB,GAC9B,OAAOpB,GAAgC,IAAlBoB,EAAsB,EAAIA,EAAgB,GAgC7CE,CAAatB,EAAYmB,GAE3C,MAAO,CACHF,OAAQA,EACRC,SAjCY,SAAClB,EAAYoB,GAC7B,OAAOpB,EAAaoB,EA6BHG,CAAYvB,EAAYmB,GAIrCK,OAAQ1B,EAAUC,EAAWC,EAAYC,EAAxB,aACbX,UAAWA,GACRY,KASIuB,CACH9C,EAAM6C,OACN7C,EAAMsC,OACNtC,EAAMuC,SACNtC,EAAOU,UACPV,EAAOE,OAEf,QACI,OAAOH,KCpEJ+C,EAfM,SAAC/C,EAAOC,GACzB,MAAO,CACH+C,OAAQtC,EAAcV,EAAMgD,OAAQ/C,GACpCgD,aAAclD,EAAoBC,EAAMiD,aAAchD,GACtDiD,WAAY9C,EAAkBJ,EAAMkD,WAAYjD,GAChDkD,OAAQ3C,EAAcR,EAAMmD,OAAQlD,GACpCmD,QAASxC,EAAeZ,EAAMoD,QAASnD,GACvCoD,gBAAiBjB,EN8BW,uBM9BXA,CAAoDpC,EAAMqD,gBAAiBpD,GAC5FqD,wBAAyBlB,EN+BW,+BM/BXA,CAA4DpC,EAAMsD,wBAAyBrD,GACpHsD,iBAAkBnB,ENoCW,wBMpCXA,CAAqDpC,EAAMuD,iBAAkBtD,GAC/FuD,kBAAmBpB,ENiCW,yBMjCXA,CAAsDpC,EAAMwD,kBAAmBvD,GAClGwD,uBAAwBrB,EN8BW,8BM9BXA,CAA2DpC,EAAMyD,uBAAwBxD,KCTnHyD,EAAY,SAACpB,GACjB,MAAO,CACLA,OAAQA,EACRC,SAAU,EACVM,OAAQ,YAAIc,MAAMrB,IAASP,KAAI,iBANrB,aAUR6B,EAAe,CACnBZ,OAAQ,CACNa,SAAU,CAAC,EAAG,EAAG,IAEnBZ,aAAc,CACZa,UAAW,IAEbZ,WAAY,GACZL,OAAQ,GACRM,OAAQ,GACRC,QAAS,GACTE,wBAAyBI,EAzBE,GA0B3BD,uBAAwBC,EAvBE,GAwB1BH,iBAAkBG,EAzBE,GA0BpBF,kBAAmBE,EA3BE,OA4BrBL,gBAAiBK,EA9BE,GA+BnBK,MAAO,I,EAG2BC,aAAO,SAAAC,GAAG,sBACvCL,EADuC,CAE1CM,SAAU,SAAAjE,GAAM,OAAIgE,GAAI,SAAAjE,GAAK,OAAImE,EAAanE,EAAOC,OACrDmE,SAAU,SAAAL,GAAK,OAAIE,GAAI,SAAAjE,GACrB,OAAO,eACFA,EADL,CAEE+D,mB,mBANMM,E,KAAUC,E,KC3BTC,EAPc,WAAO,IAAD,EAERF,GAAS,SAAArE,GAAK,MAAI,CAACA,EAAMiD,iBAAzCA,EAFwB,oBAI/B,OAAO,iCAAkBA,I,OCiCduB,EAjCG,SAACrE,GAEf,IAAMsE,EAAc,IAAIC,OAElBC,EAAeC,IAAMC,SAU3B,OARAC,qBAAU,WACNH,EAAaI,QAAQC,eAAiB,IACvC,IAEHC,aAAS,WAAUlE,GAAW,IAAnBmE,EAAkB,EAAlBA,MACJ/E,EAAMgF,QAAQhF,EAAMgF,OAAOR,EAAcO,EAAOnE,MAInD,+BACI,+BACIqE,OAAQX,EACRZ,SAAU1D,EAAMkF,SAEpB,6CACIC,IAAKX,GACD7D,eAAKX,EAAO,UAFpB,CAGIoF,eAAc,KACdC,uBAAsB,IACtBC,wBAAuB,IACvBC,YAAU,EACVL,OAAQZ,OCvBTkB,EAPY,WAAO,IAAD,EAERtB,GAAS,SAAArE,GAAK,MAAI,CAACA,EAAMkD,eAE9C,OAJ6B,oBAIXnB,KAAI,SAAAxB,GAAS,OAAI,kBAAC,EAAcA,OC6BrCqF,ICnCc,IAAIC,SAAcC,OAAQ,IAAM,GAAK,KAAOC,eAAgB,KAC7D,IAAIF,SAAcC,OAAQ,IAAM,GAAK,IAAMC,eAAgB,IDC3E,SAAA5F,GAEV,IAAMU,EAAOgE,mBACb,OACE,+BAEE,0CACM1E,EADN,CAEEmF,IAAKzE,EACLmF,MAAO7F,EAAM6F,MAAQ7F,EAAM6F,MAAQ,CAAC,EAAG,EAAG,GAC1CnC,SAAU1D,EAAM0D,SAAW1D,EAAM0D,SAAW,CAAC,EAAG,EAAG,GACnDoC,SAAU9F,EAAM8F,SAAW9F,EAAM8F,SAASlE,KAAI,SAAAmE,GAAC,OAAIjF,KAAKkF,GAAKD,KAAK,CAAC,EAAG,EAAG,KAEzE,mCAAgBE,KAAM,CAACjG,EAAMyB,MAAOzB,EAAM0B,UAC1C,uCAAmBwE,MAAOlG,EAAMkG,SAElC,0CACMlG,EADN,CAEEmF,IAAKzE,EACLmF,MAAO7F,EAAM6F,MAAQ7F,EAAM6F,MAAQ,CAAC,EAAG,EAAG,GAC1CnC,SAAU1D,EAAM0D,SAAW1D,EAAM0D,SAAW,CAAC,EAAG,EAAG,GACnDoC,SAAU9F,EAAM8F,SAAW9F,EAAM8F,SAASlE,KAAI,SAAAmE,GAAC,OAAIjF,KAAKkF,GAAKD,KAAK,CAAC,EAAG,EAAG,GACzEI,eAAa,EACbZ,YAAU,IAEV,mCAAeU,KAAM,CAACjG,EAAMyB,MAAOzB,EAAM0B,UACzC,oCAAgBwE,MAAM,SAASE,QAAS,SEnBnCC,EAPQ,WAAO,IAAD,EAERnC,GAAS,SAAArE,GAAK,MAAI,CAACA,EAAMmD,WAE1C,OAJyB,oBAIXpB,KAAI,SAAAtB,GAAK,OAAI,kBAAC,EAAUA,OCapCgG,EAAY,SAACnE,EAAQoE,GAEvB,OAAO,YAAI/C,MAAMrB,EAAO,IAAIqE,QAAQC,SAAQ,SAAAC,GAAC,OACzC,YAAIlD,MAAMrB,EAAO,IAAIqE,QAAQC,SAAQ,SAAAE,GAAC,OAClC,YAAInD,MAAMrB,EAAO,IAAIqE,QAAQ5E,KAAI,SAAAgF,GAEzB,OAAOL,EAAGK,EAAGD,EAAGD,aAO9BG,EAAuB,SAACnD,EAAUoD,GAAX,OAA0B,SAACF,EAAGD,EAAGD,GAO1D,MALU,CACNhD,EAAS,GAAKkD,EAAIE,EAAW,GAC7BpD,EAAS,GAAKiD,EAAIG,EAAW,GAC7BpD,EAAS,GAAKgD,EAAII,EAAW,MAgB/BC,EAAU,SAACC,EAAMC,EAAOL,GAC1B,OAAOI,EAAOC,EAAQL,GAuBpBM,EAAyB,SAACC,GAAD,OAAWb,EAAUa,EAAMC,UAAUjF,QApB/B6E,EAqBjCG,EAAMH,KArBiCK,EAsBvCF,EAAME,QAtB0C9F,EAuBhD4F,EAAMC,UAAU7F,gBAvBiDC,EAwBjE2F,EAAMC,UAAU5F,cAxBgEsF,EAyBhFK,EAAMC,UAAUN,WAzB4EG,EA0B5FE,EAAMC,UAAUH,MA1BsF,SAACL,EAAGD,EAAGD,GAC7G,IAAM1G,EAAQ,CACVuB,gBAAiBsF,EAAqBtF,EAAiBuF,EAAtCD,CAAkDD,EAAGD,EAAGD,GACzElF,cAAeqF,EAAqBrF,EAAesF,EAApCD,CAAgDD,EAAGD,EAAGD,IAEzE,MAAO,CACHM,KAAMD,EAAQC,EAAMC,EAAOL,GAC3B7G,KAAM,SACNsH,QAASA,EACTrH,MAAOA,MATqB,IAACgH,EAAMK,EAAS9F,EAAiBC,EAAesF,EAAYG,GA6B1FK,EAAiB,SAAAH,GACnB,OAAOA,EAAMC,UAAUrH,MACnB,IAtFc,gBAuFV,OAnBc,SAACoH,GAAD,OAAWb,EAAUa,EAAMC,UAAUjF,QA5B/B6E,EA6B5BG,EAAMH,KA7B4BK,EA8BlCF,EAAME,QA9BqC3D,EA+B3CyD,EAAMC,UAAU1D,SA/BqCoD,EAgCrDK,EAAMC,UAAUN,WAhCoD,SAACF,EAAGD,EAAGD,GAAP,MACpE,CACIM,KAAMA,EACNjH,KAAM,SACNsH,QAASA,EACTrH,MAAO,CACH0D,SAAUA,EAASA,EAAUoD,EAAnBpD,CAA+BkD,EAAGD,EAAGD,QAN5B,IAACM,EAAMK,EAAS3D,EAAUoD,EA+CtCS,CAAkBJ,GAC7B,IAlFmB,qBAmFf,OAAOD,EAAuBC,GAClC,QACI,MAAM,IAAIK,MAAJ,gBAAmBC,KAAKC,UAAUP,GAAlC,2BAgBHQ,EAJe,CAC1BC,MAAO,SAACC,GAAD,OATG,SAACA,GAKX,MAJO,sBACAA,EAAO1H,QAAO,SAAAgH,GAAK,MAAmB,eAAfA,EAAMpH,SAD7B,YAEA8H,EAAO1H,QAAO,SAAAgH,GAAK,MAAmB,eAAfA,EAAMpH,QAAuB0G,SAAQ,SAAAU,GAAK,OAAIG,EAAeH,QAMxES,CAAMC,KCrGvBC,EAAe,SAACC,GAClB,IAAMvH,EAAYuH,EAAKvH,UACvB,OAAOA,GAAwB,GAoB7BwH,EAAiB,SAACb,EAAOE,GAC3B,OAAGF,EAAME,SAAWF,EAAME,QAAQY,OAAS,EAChBC,OAAO1B,KAAKa,GAASlH,QAAO,SAAAD,GAAG,OAAIiH,EAAME,QAAQc,SAASjI,MAAM0B,KAAI,SAAA1B,GAAG,OAAImH,EAAQnH,MACpFkI,QAAO,SAACjB,EAAOkB,GAAR,sBACtBA,EAAOrI,MADe,GAEtBmH,EAAMnH,SACTmH,GAEDA,EAAMnH,OAGXsI,EAAY,SAACC,EAAYC,GAE3B,IAAMX,EAASY,EAAiBb,MAAMW,EAAWV,QAC3CR,EAAUmB,EAAYnB,QAC5B,OAAOQ,EAAOjG,KAAI,SAACuF,EAAOrF,GACtB,IAAM4G,EA7Ba,SAACvB,EAAOE,GAC/B,IAAMsB,EAAoBhI,eAAKwG,EAAO,SACtC,GAAGwB,EAAkBtB,SAAWsB,EAAkBtB,QAAQY,OAAS,EAAG,CAClE,IAAMW,EAA6BjI,eAAKgI,EAAmB,WAE3D,OADuBxB,EAAME,QAAUa,OAAO1B,KAAKa,GAASlH,QAAO,SAAAD,GAAG,OAAIiH,EAAME,QAAQc,SAASjI,MAAM0B,KAAI,SAAA1B,GAAG,OAAImH,EAAQnH,MAAQ,IAC5GkI,QAAO,SAACjB,EAAOkB,GAAR,sBACtB1H,eAAK0H,EAAQ,SADS,GAEtBO,KACHjI,eAAKwG,EAAO,UAEpB,OAAOwB,EAmBqBE,CAAmB1B,EAAOE,GAClD,MAAO,CACHL,KAAMG,EAAMH,KACZlH,OAAQ,CACJC,KAAK,GAAD,OAAK2I,EAAgB5I,OAArB,YAA+B4I,EAAgBI,SACnD5I,IAAI,GAAD,OAAKwI,EAAgB5I,OAArB,YAA+B4I,EAAgBI,QAA/C,YAA0DhH,GAC7D9B,MAAOgI,EAAeb,EAAOE,SAe9B0B,EATe,SAACR,EAAYC,GACvC,MAAO,CACHV,aAAcA,EAAaS,GAC3BS,kBAzDkBjB,EAyDiBQ,EAxDhCR,EAAKkB,eAyDRX,UAAWA,EAAUC,EAAYC,GACjCU,cAAUA,GA3DO,IAACnB,G,QCCpBoB,EAAe1E,IAAM2E,gBAEvBC,EAAS,GAKAC,EAAa,CACtBC,UAAW,YACXC,WAAY,aACZC,WAAY,aACZC,aAAc,eACdC,WAAY,cAGVC,EAAW,CACbC,IAAK,SAAC3J,EAAK4J,EAAMtJ,EAAWR,GACxBqJ,EAAOnJ,GAAO,IAAI6J,OAAJ,aACVC,IAAK,CAdF,UAcYF,GACfzB,OAAO,yBACCnI,EADF,UACgB,CAAa,IAAZM,EAAkB,QAEtCG,eAAKX,EAAO,CAAC,MAAO,YAG/BiK,KAAM,SAAC/J,EAAK+J,GACRZ,EAAOnJ,GAAK+J,KAAKA,IAErBC,KAAM,SAAChK,GACHmJ,EAAOnJ,GAAKgK,KAAZ,UAAoBhK,EAApB,YAEJiK,KAAM,SAACjK,GACHmJ,EAAOnJ,GAAKiK,QAEhBC,OAAQ,SAAClK,GACLmJ,EAAOnJ,GAAKmK,gBACLhB,EAAOnJ,KAIlBoK,EAAQ,eACLV,EADK,CAERW,QAAS,SAACzK,GACN,OAAOA,EAAOC,MACV,KAAKuJ,EAAWC,UACZK,EAASC,IAAI/J,EAAOE,MAAME,IAAKJ,EAAOE,MAAM8J,KAAMhK,EAAOU,UAAWV,EAAOE,OAC3E,MACJ,KAAKsJ,EAAWE,WACZI,EAASM,KAAKpK,EAAOE,MAAME,KAC3B,MACJ,KAAKoJ,EAAWK,WACZC,EAASK,KAAKnK,EAAOE,MAAME,IAAKJ,EAAOE,MAAMiK,MACjD,KAAKX,EAAWG,WACZG,EAASO,KAAKrK,EAAOE,MAAME,KAC3B,MACJ,KAAKoJ,EAAWI,aACZE,EAASQ,OAAOtK,EAAOE,MAAME,SAQhCsK,EAAQ,SAACxK,GAClB,OACI,kBAACmJ,EAAasB,SAAd,CAAuBC,MAAOJ,GACzBtK,EAAM2K,WCrEbC,EAAe,SAAA9K,GAAM,OAAIoI,OAAO2C,OAAOC,GAAiB3C,SAASrI,EAAOC,OA0B/DgL,EAxBgB,CAC3Bb,KAAM,SAACrC,EAAQrH,EAAWuD,EAAUgB,EAAOiG,GACvCnD,EAAOjG,KAAI,SAAAuF,GACP8D,QAAQC,IAAI/D,GACPA,EAAMrH,OAAOC,KAAKoI,SAAS,SAAYhB,EAAMrH,OAAOC,KAAKoI,SAAS,WAAYhB,EAAMH,MAAQxG,IAAgBoK,EAAazD,EAAMrH,QAQzH8K,EAAazD,EAAMrH,SAC1BkL,EAAUT,QAAV,eAEWpD,EAAMrH,OAFjB,CAGQU,UAAWA,KAXnB2K,YAAW,WACH,IAAMC,EAAcrG,EAAMqG,YAC1BrH,EAAS,eACFoD,EAAMrH,OADL,CAEJU,UAAW4K,OAEO,KAA1BjE,EAAMH,KAAOxG,SCN3B6K,GAAeC,E,aAmBNC,GAhBG,SAACvL,GAAW,IAAD,EAGNkE,GAAS,SAAArE,GAAK,MAAI,CAACA,EAAMkE,aAArCA,EAHkB,oBAKlBgB,EAASyG,cAATzG,MAQP,OANAJ,qBAAU,WACN,IAAMqG,EAAYhL,EAAMgL,UAExBD,EAAuBb,KAAKmB,GAAa/C,UAAW+C,GAAavD,aAAc/D,EAAUgB,EAAOiG,KACjG,IAEK,sC,kBCUGS,GA3BC,WAEd,IAAMC,EAAahH,mBAanB,OAXAC,qBAAU,WAERgH,KAAwBC,mBAAoB,IAC3C,IAEH9G,aAAS,WACJ4G,EAAW9G,SACZ8G,EAAW9G,QAAQiH,UAAU/H,IAAIoE,OAAO2C,OAAO1G,EAAS2H,WAAW7I,aAKrE,kBAAC,WAAD,CAAU8I,SAAU,MAClB,kBAAC,KAAD,KACE,kBAAC,KAAD,CAAOC,mBAAoB,EAAGC,mBAAoB,GAAKvK,OAAQ,MAC/D,kBAAC,KAAD,CAAO0E,QAAS,MAChB,kBAAC,KAAD,CAAU8F,OAAO,EAAOC,OAAQ,GAAKC,SAAU,KAC/C,kBAAC,KAAD,CAAoBC,WAAY,IAAMC,SAAU,S,SCnBlDC,GAAmB,IAAIC,wBAAsB,IAAK,CACpDC,OAAQC,YACRC,iBAAiB,EACjBC,UAAWC,6BAGM,IAAIC,aAAW,EAAG,IAAKP,IAE/B7I,SAASI,IAAI,EAAG,IAAK,GAGhC,IAsBaiJ,GAtBE,WAAO,IAAD,EAEGvB,cAAdwB,EAFW,EAEXA,MAFW,EAEJC,GAiBf,OAfAxI,IAAME,WAAU,WACd,IAEMuI,GAFS,IAAIC,qBAEIC,KAAK,CAC1B,YACA,YACA,YACA,YACA,YACA,cAEFJ,EAAMK,WAAaH,KAId,MC2LII,GAjOC,WACd,IAAIC,EAAQ,GACRC,EAAY,GACZC,EAAU,GACVC,EAAe,EACfC,EAAW,GAGXC,EAAgB,CAClBC,GAAG,SAASC,GAEV,IADA,IAAIC,EAAItG,KAAKuG,MAAMvG,KAAKC,UAAUoG,IACzBG,EAAI,EAAGA,EAAIH,EAAE7F,OAAQgG,IAC5B,IAAK,IAAIC,EAAI,EAAGA,EAAIJ,EAAE7F,OAAQiG,IAC5B,IAAK,IAAIC,EAAI,EAAGA,EAAIL,EAAE7F,OAAQkG,IAC5BJ,EAAEE,GAAGC,GAAGC,GAAKL,EAAEG,GAAGH,EAAE7F,OAAO,EAAEkG,GAAGD,GAItC,OAAOH,GAGTK,GAAG,SAASN,GAEV,IADA,IAAIC,EAAItG,KAAKuG,MAAMvG,KAAKC,UAAUoG,IACzBG,EAAI,EAAGA,EAAIH,EAAE7F,OAAQgG,IAC5B,IAAK,IAAIC,EAAI,EAAGA,EAAIJ,EAAE7F,OAAQiG,IAC5B,IAAK,IAAIC,EAAI,EAAGA,EAAIL,EAAE7F,OAAQkG,IAC5BJ,EAAEE,GAAGC,GAAGC,GAAKL,EAAEK,GAAGD,GAAGJ,EAAE7F,OAAO,EAAEgG,GAItC,OAAOF,GAGTM,GAAG,SAASP,GAEV,IADA,IAAIC,EAAItG,KAAKuG,MAAMvG,KAAKC,UAAUoG,IACzBG,EAAI,EAAGA,EAAIH,EAAE7F,OAAQgG,IAC5B,IAAK,IAAIC,EAAI,EAAGA,EAAIJ,EAAE7F,OAAQiG,IAC5B,IAAK,IAAIC,EAAI,EAAGA,EAAIL,EAAE7F,OAAQkG,IAC5BJ,EAAEE,GAAGC,GAAGC,GAAKL,EAAEA,EAAE7F,OAAO,EAAEiG,GAAGD,GAAGE,GAItC,OAAOJ,GAGTO,GAAG,SAASR,GAEV,IADA,IAAIC,EAAItG,KAAKuG,MAAMvG,KAAKC,UAAUoG,IACzBG,EAAI,EAAGA,EAAIH,EAAE7F,OAAQgG,IAC5B,IAAK,IAAIC,EAAI,EAAGA,EAAIJ,EAAE,GAAG7F,OAAQiG,IAC/B,IAAK,IAAIC,EAAI,EAAGA,EAAIL,EAAE,GAAG,GAAG7F,OAAQkG,IAClCJ,EAAEE,GAAGC,GAAGC,GAAKL,EAAEG,GAAGC,GAAGJ,EAAE7F,OAAO,EAAEkG,GAItC,OAAOJ,GAGTQ,GAAG,SAAST,GAEV,IADA,IAAIC,EAAItG,KAAKuG,MAAMvG,KAAKC,UAAUoG,IACzBG,EAAI,EAAGA,EAAIH,EAAE7F,OAAQgG,IAC5B,IAAK,IAAIC,EAAI,EAAGA,EAAIJ,EAAE,GAAG7F,OAAQiG,IAC/B,IAAK,IAAIC,EAAI,EAAGA,EAAIL,EAAE,GAAG,GAAG7F,OAAQkG,IAClCJ,EAAEE,GAAGC,GAAGC,GAAKL,EAAEG,GAAGH,EAAE7F,OAAO,EAAEiG,GAAGC,GAItC,OAAOJ,GAGTS,GAAG,SAASV,GAIV,IAFA,IAAIC,EAAItG,KAAKuG,MAAMvG,KAAKC,UAAUoG,IAEzBG,EAAI,EAAGA,EAAIH,EAAE7F,OAAQgG,IAC5B,IAAK,IAAIC,EAAI,EAAGA,EAAIJ,EAAE,GAAG7F,OAAQiG,IAC/B,IAAK,IAAIC,EAAI,EAAGA,EAAIL,EAAE,GAAG,GAAG7F,OAAQkG,IAClCJ,EAAEE,GAAGC,GAAGC,GAAKL,EAAEA,EAAE7F,OAAO,EAAEgG,GAAGC,GAAGC,GAItC,OAAOJ,IAIX,SAASU,EAAMX,EAAEC,GACf,IAAK,IAAIE,EAAI,EAAGA,EAAIH,EAAE7F,OAAQgG,IAC5B,IAAK,IAAIC,EAAI,EAAGA,EAAIJ,EAAE,GAAG7F,OAAQiG,IAC/B,IAAK,IAAIC,EAAI,EAAGA,EAAIL,EAAE,GAAG,GAAG7F,OAAQkG,IAClC,GAAIL,EAAEG,GAAGC,GAAGC,IAAMJ,EAAEE,GAAGC,GAAGC,GACxB,OAAO,EAKf,OAAO,EAGT,SAASO,EAAIC,EAAEC,EAAEC,GACf,GAAS,KAALF,GACF,IAAK,IAAIV,EAAI,EAAGA,EAAIW,EAAE3G,OAAQgG,IAC5B,IAAK,IAAIC,EAAI,EAAGA,EAAIU,EAAEX,GAAG,GAAGhG,OAAQiG,IAClC,GAAIU,EAAEX,GAAGW,EAAEX,GAAGhG,OAAO,GAAGiG,IAAMW,EAAEZ,GAAG,GAAGC,GACpC,OAAO,OAIT,GAAS,KAALS,GACR,IAASV,EAAI,EAAGA,EAAIW,EAAE,GAAG3G,OAAQgG,IAC/B,IAASC,EAAI,EAAGA,EAAIU,EAAEX,GAAG,GAAGhG,OAAQiG,IAClC,GAAIU,EAAEA,EAAE3G,OAAO,GAAGgG,GAAGC,IAAMW,EAAE,GAAGZ,GAAGC,GACjC,OAAO,OAIT,GAAS,KAALS,EACR,IAASV,EAAI,EAAGA,EAAIW,EAAE3G,OAAQgG,IAC5B,IAASC,EAAI,EAAGA,EAAIU,EAAE,GAAG3G,OAAQiG,IAC/B,GAAIU,EAAEX,GAAGC,GAAGU,EAAEX,GAAG,GAAGhG,OAAO,IAAM4G,EAAEZ,GAAGC,GAAG,GACvC,OAAO,EAKf,OAAO,EAGTY,KAAKC,QAAU,SAASC,GAAmC,IAAD,yDAAH,GAAG,IAA/BC,kBAA+B,MAApB,OAAoB,MAAbC,cAAa,MAAN,EAAM,EACpDC,EAAIH,EAAEpN,KAAI,SAAA+E,GAAC,OAAEA,EAAEyI,MAAM,MAAMxN,KAAI,SAAAgF,GAAC,OAAEA,EAAEwI,MAAM,UAC9C7B,EAAM8B,KAAKF,GACXxB,EAAS0B,KAAK,CAAE3B,EAAc,GAAIyB,IAClC1B,EAAQ4B,KAAKH,GAEb,IAAII,EAAQ,GAEM,QAAdL,IACFA,EAAa,CAAC,KAAK,KAAK,WAAW,KAAK,QAAQ,WAAW,gBAG7D,IAAK,IAAIhB,EAAI,EAAGA,EAAIgB,EAAWhH,OAAQgG,IAAI,CAGzC,IAFA,IAAIsB,EAAKN,EAAWhB,GAAGmB,MAAM,KACzBI,EAAKL,EACAjB,EAAI,EAAGA,EAAIqB,EAAGtH,OAAQiG,IAC7BsB,EAAK5B,EAAc2B,EAAGrB,IAAIsB,GAE5BF,EAAMD,KAAKG,GAEb,IAASvB,EAAI,EAAGA,EAAIqB,EAAMrH,OAAQgG,IAAI,CACpC,IAAIwB,GAAK,EACT,IAASvB,EAAI,EAAGA,EAAIX,EAAMtF,OAAQiG,IAChC,GAAIO,EAAMa,EAAMrB,GAAGV,EAAMW,IAAI,CAC3BuB,GAAK,EACL,MAGAA,IACFlC,EAAM8B,KAAKC,EAAMrB,IACjBR,EAAQ4B,KAAKH,GACbvB,EAAS0B,KAAK,CAAE3B,EAAcuB,EAAWhB,GAAIqB,EAAMrB,MAGvDP,KAGFoB,KAAKY,YAAc,SAASC,EAAQC,GAClCpC,EAAUmC,GAAUC,GAGtBd,KAAKe,gBAAkB,WACrB,OAAOlC,GAGTmB,KAAKgB,iBAAmB,WAEtB,IADA,IAAIC,EAAQ,GACH9B,EAAI,EAAGA,EAAIV,EAAMtF,OAAQgG,IAChC,IAAK,IAAIC,EAAI,EAAGA,EAAIX,EAAMtF,OAAQiG,IAE5BQ,EAAI,IAAInB,EAAMU,GAAGV,EAAMW,KACzB6B,EAAMV,KAAK,CAAC,IAAIpB,EAAEC,IAEhBQ,EAAI,IAAInB,EAAMU,GAAGV,EAAMW,KACzB6B,EAAMV,KAAK,CAAC,IAAIpB,EAAEC,IAEhBQ,EAAI,IAAInB,EAAMU,GAAGV,EAAMW,KACzB6B,EAAMV,KAAK,CAAC,IAAIpB,EAAEC,IAIxB,MAAO,CAACT,UAAQsC,QAAMC,GAAG,IAI3BlB,KAAKmB,cAAgB,SAASC,EAAKC,GAEjC,KAAOD,EAAKvF,SAAS1C,QACnBiI,EAAKvF,SAASyF,MAGhB,IAAIC,EAAK9C,EAAM,GAAG,GAAG,GAAGtF,OACpBqI,EAAK/C,EAAM,GAAG,GAAGtF,OACjBsI,EAAKhD,EAAM,GAAGtF,OAIduI,EAAW,IAAI9K,cAFG,GAE+B4K,EAF/B,GAEiDC,EAFjD,GAEmEF,GACzF,IAAK,IAAII,KAAKN,EAEZ,IAFkB,IAAD,EACHM,EAAErB,MAAM,KAAKxN,KAAI,SAAAgF,GAAC,OAAE8J,SAAS9J,MAD1B,mBACZD,EADY,KACVC,EADU,KACRF,EADQ,KAERuH,EAAI,EAAGA,EAAIsC,EAAItC,IACtB,IAAK,IAAIC,EAAI,EAAGA,EAAIoC,EAAIpC,IACtB,IAAK,IAAIC,EAAI,EAAGA,EAAIkC,EAAIlC,IAAI,CAC1B,IAAIyB,EAAWpC,EAAUD,EAAM4C,EAAKM,IAAIxC,GAAGC,GAAGC,IAC9C,GAAIyB,EAAS,CACX,IAAIe,EAAO,IAAIjL,OAAW8K,EAASZ,GACnCe,EAAKjN,SAASI,IAXF,IAWuB4C,EAAEyH,EAAEkC,GAX3B,IAWiDzJ,EAAEsH,EAAEoC,GAXrD,IAW4E3J,EAAEsH,EAAEsC,GAAM,IAClGI,EAAKpL,YAAa,EAClBoL,EAAKxK,eAAgB,EACrB+J,EAAKrG,IAAI8G,O,6BClNR,SAASC,GAAM5Q,GAC5B,IAAM6Q,EAAQnM,mBADqB,EAENoM,aAAQ,qBAA7BC,EAF2B,EAE3BA,MAAOvD,EAFoB,EAEpBA,UAEf,OACE,yCAAOrI,IAAK0L,GAAW7Q,GACrB,0BAAMuF,YAAU,EAACY,eAAa,EAACyJ,SAAUpC,EAAU,SAAUgD,SAAUO,EAAMC,gBAAgBR,SAAU9M,SAAU,CAAC,EAAG,QAAU,KAC/H,kBAAC,WAAD,CAAUqI,SAAU,MAClB,kBAAC,KAAD,CAAiB9B,MAAI,EAACgH,IAAI,cAAcC,SAAU,OAM1DJ,KAAQK,QAAQ,qBCLD,SAASP,GAAM5Q,GAE5B,IAAM6Q,EAAQnM,mBAFqB,EAGNoM,aAAQ,uBAA7BC,EAH2B,EAG3BA,MAAOvD,EAHoB,EAGpBA,UACf,OACE,yCAAOrI,IAAK0L,GAAW7Q,GACrB,0BAAMmG,eAAa,EAACZ,YAAU,EAACqK,SAAUpC,EAAU,SAAUgD,SAAUO,EAAMK,WAAWZ,SAAU9M,SAAU,CAAC,KAAO,GAAI,SChB/G,SAASkN,GAAM5Q,GAC5B,IAAM6Q,EAAQnM,mBADqB,EAENoM,aAAQ,eAA7BC,EAF2B,EAE3BA,MAAOvD,EAFoB,EAEpBA,UACf,OACE,yCAAOrI,IAAK0L,GAAW7Q,GACvB,0BAAMuF,YAAU,EAACY,eAAa,EAACyJ,SAAUpC,EAAU,SAAUgD,SAAUO,EAAMM,MAAMb,WACjF,0BAAMrK,eAAa,EAACqK,SAAUO,EAAMM,MAAMb,UAExC,oCAAgBtK,MAAM,SAASE,QAAS,OCRjC,SAASwK,GAAM5Q,GAC5B,IAAM6Q,EAAQnM,mBADqB,EAENoM,aAAQ,iBAA7BC,EAF2B,EAE3BA,MAAOvD,EAFoB,EAEpBA,UACf,OACE,yCAAOrI,IAAK0L,GAAW7Q,GACvB,0BAAMuF,YAAU,EAACY,eAAa,EAACyJ,SAAUpC,EAAU,SAAUgD,SAAUO,EAAMO,SAASd,SAAU9M,SAAU,CAAC,IAAM,EAAG,MCJzG,SAASkN,GAAM5Q,GAC5B,IAAM6Q,EAAQnM,mBADqB,EAENoM,aAAQ,sBAA7BC,EAF2B,EAE3BA,MAAOvD,EAFoB,EAEpBA,UACf,OACE,yCAAOrI,IAAK0L,GAAW7Q,GACrB,0BAAMuF,YAAU,EAACY,eAAa,EAACyJ,SAAUpC,EAAU,SAAUgD,SAAUO,EAAMQ,cAAcf,WAE3F,kBAAC,WAAD,CAAUzE,SAAU,MAClB,kBAAC,KAAD,CAAiB9B,MAAI,EAACgH,IAAI,cAAcC,SAAU,OCT3C,SAASN,GAAM5Q,GAC5B,IAAM6Q,EAAQnM,mBADqB,EAENoM,aAAQ,wBAA7BC,EAF2B,EAE3BA,MAAOvD,EAFoB,EAEpBA,UACf,OACE,yCAAOrI,IAAK0L,GAAW7Q,GACrB,0BAAMuF,YAAU,EAACY,eAAa,EAACyJ,SAAUpC,EAAU,SAAUgD,SAAUO,EAAMS,gBAAgBhB,YCJpF,SAASI,GAAM5Q,GAC5B,IAAM6Q,EAAQnM,mBADqB,EAENoM,aAAQ,gBAA7BC,EAF2B,EAE3BA,MAAOvD,EAFoB,EAEpBA,UACf,OACE,yCAAOjI,YAAU,EAACY,eAAa,EAAChB,IAAK0L,GAAW7Q,GAC9C,0BAAMuF,YAAU,EAACY,eAAa,EAACyJ,SAAUpC,EAAU,SAAUgD,SAAUO,EAAMU,OAAOjB,SAAW9M,SAAU,CAAC,EAAG,QAAU,KACvH,kBAAC,WAAD,CAAUqI,SAAU,MAClB,kBAAC,KAAD,CAAiB9B,MAAI,EAACgH,IAAI,eAAeC,SAAU,OCR5C,SAASN,GAAM5Q,GAC5B,IAAM6Q,EAAQnM,mBADqB,EAENoM,aAAQ,qBAA7BC,EAF2B,EAE3BA,MAAOvD,EAFoB,EAEpBA,UAEf,OACE,yCAAOrI,IAAK0L,GAAW7Q,GACvB,0BAAMuF,YAAU,EAACY,eAAa,EAACyJ,SAAUpC,EAAU,SAAUgD,SAAUO,EAAMW,gBAAgBlB,SAAU9M,SAAU,CAAC,IAAM,EAAG,MNgB/HoN,KAAQK,QAAQ,uBCRhBL,KAAQK,QAAQ,eCJhBL,KAAQK,QAAQ,iBCKhBL,KAAQK,QAAQ,sBCJhBL,KAAQK,QAAQ,wBCGhBL,KAAQK,QAAQ,gBCFhBL,KAAQK,QAAQ,qBCChB,ICPIhB,GAEAwB,GACAtP,GACAuP,GACAC,GDgsBWC,GArCI,CAlWC,CAChBvE,MAAO,CAAC,gBAAD,iCAcPwE,OAAQ,CAAE9C,WAAY,GAAIC,OAAQ,GAClC8C,UAAW,SAAChS,GAAY,OAAQ,uCAEd,CAClBuN,MAAO,CAAC,gBAAD,iCAcPwE,OAAQ,CAAE9C,WAAY,GAAIC,OAAQ,GAClC8C,UAAW,SAAChS,GAAY,OAAQ,uCAxVpC,CACIuN,MAAO,CAAC,gBAAD,iCAcPwE,OAAQ,CAAE9C,WAAY,GAAIC,OAAQ,GAClC8C,UAAW,SAAChS,GAAY,OAAQ,kBAAC,GAAD,CAAa0D,SAAU1D,EAAM0D,aAGtC,CACzB6J,MAAO,CAAC,gBAAD,iCAcLwE,OAAQ,CAAE9C,WAAY,GAAIC,OAAQ,GAClC8C,UAAU,SAAChS,GAAY,OAAS,kBAAC,GAAD,CAAa0D,SAAU1D,EAAM0D,SAAUoC,SAAU,CAAC,EAAG,GAAMhF,KAAKkF,GAAI,OAG5E,CAC1BuH,MAAO,CAAC,gBAAD,iCAcLwE,OAAQ,CAAE9C,WAAY,GAAIC,OAAQ,GAClC8C,UAAU,SAAChS,GAAY,OAAS,kBAAC,GAAD,CAAa0D,SAAU1D,EAAM0D,SAAUoC,SAAU,CAAC,EAAG,EAAIhF,KAAKkF,GAAI,OAG1E,CACxBuH,MAAO,CAAC,gBAAD,iCAcPwE,OAAQ,CAAE9C,WAAY,GAAIC,OAAQ,GAClC8C,UAAW,SAAChS,GAAY,OAAQ,kBAAC,GAAD,CAAa0D,SAAU1D,EAAM0D,SAAUoC,SAAU,CAAC,EAAG,IAAMhF,KAAKkF,GAAI,OAIxG,CACIuH,MAAO,CAAC,gBAAD,iCAcPwE,OAAQ,CAAE9C,WAAY,GAAIC,OAAQ,GAClC8C,UAAW,SAAChS,GAAY,OAAQ,kBAAC,GAAD,CAAe0D,SAAU1D,EAAM0D,aAGtC,CAC3B6J,MAAO,CAAC,gBAAD,iCAcLwE,OAAQ,CAAE9C,WAAY,GAAIC,OAAQ,GAClC8C,UAAU,SAAChS,GAAY,OAAS,kBAAC,GAAD,CAAe0D,SAAU1D,EAAM0D,SAAUoC,SAAU,CAAC,EAAG,GAAMhF,KAAKkF,GAAI,OAG5E,CAC5BuH,MAAO,CAAC,gBAAD,iCAcLwE,OAAQ,CAAE9C,WAAY,GAAIC,OAAQ,GAClC8C,UAAU,SAAChS,GAAY,OAAS,kBAAC,GAAD,CAAe0D,SAAU1D,EAAM0D,SAAUoC,SAAU,CAAC,EAAG,EAAIhF,KAAKkF,GAAI,OAG1E,CAC1BuH,MAAO,CAAC,gBAAD,iCAcPwE,OAAQ,CAAE9C,WAAY,GAAIC,OAAQ,GAClC8C,UAAW,SAAChS,GAAY,OAAQ,kBAAC,GAAD,CAAe0D,SAAU1D,EAAM0D,SAAUoC,SAAU,CAAC,EAAG,IAAMhF,KAAKkF,GAAI,OAO1G,CACIuH,MAAO,CAAC,gBAAD,iCAcPwE,OAAQ,CAAE9C,WAAY,GAAIC,OAAQ,IAClC8C,UAAW,SAAChS,GAAY,OAAQ,kBAAC,GAAD,CAAO0D,SAAU1D,EAAM0D,aAGtC,CACnB6J,MAAO,CAAC,gBAAD,iCAcLwE,OAAQ,CAAE9C,WAAY,GAAIC,OAAQ,IAClC8C,UAAU,SAAChS,GAAY,OAAS,kBAAC,GAAD,CAAO0D,SAAU1D,EAAM0D,SAAUoC,SAAU,CAAC,EAAG,GAAMhF,KAAKkF,GAAI,OAG5E,CACpBuH,MAAO,CAAC,gBAAD,iCAcLwE,OAAQ,CAAE9C,WAAY,GAAIC,OAAQ,IAClC8C,UAAU,SAAChS,GAAY,OAAS,kBAAC,GAAD,CAAO0D,SAAU1D,EAAM0D,SAAUoC,SAAU,CAAC,EAAG,EAAIhF,KAAKkF,GAAI,OAG1E,CAClBuH,MAAO,CAAC,gBAAD,iCAcPwE,OAAQ,CAAE9C,WAAY,GAAIC,OAAQ,IAClC8C,UAAW,SAAChS,GAAY,OAAQ,kBAAC,GAAD,CAAO0D,SAAU1D,EAAM0D,SAAUoC,SAAU,CAAC,EAAG,IAAMhF,KAAKkF,GAAI,OAIlG,CACIuH,MAAO,CAAC,gBAAD,iCAcPwE,OAAQ,CAAE9C,WAAY,GAAIC,OAAQ,GAClC8C,UAAW,SAAChS,GAAY,OAAQ,kBAAC,GAAD,CAAS0D,SAAU1D,EAAM0D,aAGtC,CACrB6J,MAAO,CAAC,gBAAD,iCAcLwE,OAAQ,CAAE9C,WAAY,GAAIC,OAAQ,GAClC8C,UAAU,SAAChS,GAAY,OAAS,kBAAC,GAAD,CAAS0D,SAAU1D,EAAM0D,SAAUoC,SAAU,CAAC,EAAG,GAAMhF,KAAKkF,GAAI,OAG5E,CACtBuH,MAAO,CAAC,gBAAD,iCAcLwE,OAAQ,CAAE9C,WAAY,GAAIC,OAAQ,GAClC8C,UAAU,SAAChS,GAAY,OAAS,kBAAC,GAAD,CAAS0D,SAAU1D,EAAM0D,SAAUoC,SAAU,CAAC,EAAG,EAAIhF,KAAKkF,GAAI,OAG1E,CACpBuH,MAAO,CAAC,gBAAD,iCAcPwE,OAAQ,CAAE9C,WAAY,GAAIC,OAAQ,GAClC8C,UAAW,SAAChS,GAAY,OAAQ,kBAAC,GAAD,CAAS0D,SAAU1D,EAAM0D,SAAUoC,SAAU,CAAC,EAAG,IAAMhF,KAAKkF,GAAI,OA6CpG,CACIuH,MAAO,CAAC,gBAAD,iCAcPwE,OAAQ,CAAE9C,WAAY,GAAIC,OAAQ,IAClC8C,UAAW,SAAChS,GAAY,OAAQ,kBAAC,GAAD,CAAc0D,SAAU1D,EAAM0D,aAGtC,CAC1B6J,MAAO,CAAC,gBAAD,iCAcLwE,OAAQ,CAAE9C,WAAY,GAAIC,OAAQ,IAClC8C,UAAU,SAAChS,GAAY,OAAS,kBAAC,GAAD,CAAc0D,SAAU1D,EAAM0D,SAAUoC,SAAU,CAAC,EAAG,GAAMhF,KAAKkF,GAAI,OAG5E,CAC3BuH,MAAO,CAAC,gBAAD,iCAcLwE,OAAQ,CAAE9C,WAAY,GAAIC,OAAQ,IAClC8C,UAAU,SAAChS,GAAY,OAAS,kBAAC,GAAD,CAAc0D,SAAU1D,EAAM0D,SAAUoC,SAAU,CAAC,EAAG,EAAIhF,KAAKkF,GAAI,OAG1E,CACzBuH,MAAO,CAAC,gBAAD,iCAcPwE,OAAQ,CAAE9C,WAAY,GAAIC,OAAQ,IAClC8C,UAAW,SAAChS,GAAY,OAAQ,kBAAC,GAAD,CAAc0D,SAAU1D,EAAM0D,SAAUoC,SAAU,CAAC,EAAG,IAAMhF,KAAKkF,GAAI,OAIzG,CACIuH,MAAO,CAAC,gBAAD,iCAcPwE,OAAQ,CAAE9C,WAAY,GAAIC,OAAQ,GAClC8C,UAAW,SAAChS,GAAY,OAAQ,kBAAC,GAAD,CAAgB0D,SAAU1D,EAAM0D,aAGtC,CAC5B6J,MAAO,CAAC,gBAAD,iCAcLwE,OAAQ,CAAE9C,WAAY,GAAIC,OAAQ,GAClC8C,UAAU,SAAChS,GAAY,OAAS,kBAAC,GAAD,CAAgB0D,SAAU1D,EAAM0D,SAAUoC,SAAU,CAAC,EAAG,GAAMhF,KAAKkF,GAAI,OAG5E,CAC7BuH,MAAO,CAAC,gBAAD,iCAcLwE,OAAQ,CAAE9C,WAAY,GAAIC,OAAQ,GAClC8C,UAAU,SAAChS,GAAY,OAAS,kBAAC,GAAD,CAAgB0D,SAAU1D,EAAM0D,SAAUoC,SAAU,CAAC,EAAG,EAAIhF,KAAKkF,GAAI,OAG1E,CAC3BuH,MAAO,CAAC,gBAAD,iCAcPwE,OAAQ,CAAE9C,WAAY,GAAIC,OAAQ,GAClC8C,UAAW,SAAChS,GAAY,OAAQ,kBAAC,GAAD,CAAgB0D,SAAU1D,EAAM0D,SAAUoC,SAAU,CAAC,EAAG,IAAMhF,KAAKkF,GAAI,OAS3G,CACIuH,MAAO,CAAC,gBAAD,iCAcPwE,OAAQ,CAAE9C,WAAY,GAAIC,OAAQ,IAClC8C,UAAW,SAAChS,GAAY,OAAQ,kBAAC,GAAD,CAAQ0D,SAAU1D,EAAM0D,aAGtC,CACpB6J,MAAO,CAAC,gBAAD,iCAcLwE,OAAQ,CAAE9C,WAAY,GAAIC,OAAQ,IAClC8C,UAAU,SAAChS,GAAY,OAAS,kBAAC,GAAD,CAAQ0D,SAAU1D,EAAM0D,SAAUoC,SAAU,CAAC,EAAG,GAAMhF,KAAKkF,GAAI,OAG5E,CACrBuH,MAAO,CAAC,gBAAD,iCAcLwE,OAAQ,CAAE9C,WAAY,GAAIC,OAAQ,IAClC8C,UAAU,SAAChS,GAAY,OAAS,kBAAC,GAAD,CAAQ0D,SAAU1D,EAAM0D,SAAUoC,SAAU,CAAC,EAAG,EAAIhF,KAAKkF,GAAI,OAG1E,CACnBuH,MAAO,CAAC,gBAAD,iCAcPwE,OAAQ,CAAE9C,WAAY,GAAIC,OAAQ,IAClC8C,UAAW,SAAChS,GAAY,OAAQ,kBAAC,GAAD,CAAQ0D,SAAU1D,EAAM0D,SAAUoC,SAAU,CAAC,EAAG,IAAMhF,KAAKkF,GAAI,OAInG,CACIuH,MAAO,CAAC,gBAAD,iCAcPwE,OAAQ,CAAE9C,WAAY,GAAIC,OAAQ,GAClC8C,UAAW,SAAChS,GAAY,OAAQ,kBAAC,GAAD,CAAa0D,SAAU1D,EAAM0D,aAGzC,CACtB6J,MAAO,CAAC,gBAAD,iCAcLwE,OAAQ,CAAE9C,WAAY,GAAIC,OAAQ,GAClC8C,UAAU,SAAChS,GAAY,OAAS,kBAAC,GAAD,CAAa0D,SAAU1D,EAAM0D,SAAUoC,SAAU,CAAC,EAAG,GAAMhF,KAAKkF,GAAI,OAG/E,CACvBuH,MAAO,CAAC,gBAAD,iCAcLwE,OAAQ,CAAE9C,WAAY,GAAIC,OAAQ,GAClC8C,UAAU,SAAChS,GAAY,OAAS,kBAAC,GAAD,CAAa0D,SAAU1D,EAAM0D,SAAUoC,SAAU,CAAC,EAAG,EAAIhF,KAAKkF,GAAI,OAG7E,CACrBuH,MAAO,CAAC,gBAAD,iCAcPwE,OAAQ,CAAE9C,WAAY,GAAIC,OAAQ,GAClC8C,UAAW,SAAChS,GAAY,OAAQ,kBAAC,GAAD,CAAa0D,SAAU1D,EAAM0D,SAAUoC,SAAU,CAAC,EAAG,IAAMhF,KAAKkF,GAAI,QCjqBpGiM,GAAO,IAAI3E,GAEf4E,GAAUC,SAAQ,SAAAC,GAAQ,OAAIH,GAAKlD,QAAQqD,EAAS7E,MAAQ6E,EAASL,WASrE,IAAIM,GAAa,EAkBjB,IAA2BC,GACX,SADWA,GAUjB,CACNC,GAAG,OACHC,SAASP,GAAKnC,mBACd2C,YAAY,GACZb,UAAU,EACVC,SAAS,IAdHU,KACNZ,GAAM,IAAIe,KAAIJ,GAAEE,UAChBnQ,GAAOiQ,GAAEG,YACTb,GAAYU,GAAEV,UACdC,GAAWS,GAAET,SArBjB,WAEI,KAAMQ,IAAc,GAAG,CACnB,IAAKV,GACL,OAEWA,GAAIgB,SAEXhB,GAAIiB,OAAO,EAAEvQ,GAAM,GAAGA,IAAM,CAACA,GAAM,EAAGA,KACtCA,GAAKvB,KAAK+R,MAAMxQ,GAAKuP,IAAWC,IAChCQ,MAEJlC,GAAOwB,GAAImB,WAUfvI,IAYJ,IAWewI,GAXE,WAEb,IAAM9O,EAAWC,GAAS,SAAArE,GAAK,OAAIA,EAAMoE,YAMzC,OAJAQ,IAAME,WAAU,WACZV,EAAS+O,oBAAU7C,OACpB,IAEK,sCCtDG8C,GAJA,SAACjT,GACZ,OAAOkS,GAAUlS,EAAM8B,OAAOkQ,UAAUhS,ICFtCkT,GAAgB,SAAAhT,GAClB,IAAMiO,EAAIjO,EAAIkP,MAAM,KAAKxN,KAAI,SAAA8B,GAAQ,OAAIgN,SAAShN,MAClD,MAAO,CAAQ,EAAPyK,EAAE,GAAe,IAAPA,EAAE,GAAiB,EAAPA,EAAE,KAarBgF,GAVK,WAChB,IAAMvP,EAAQM,GAAS,SAAArE,GAAK,OAAIA,EAAM+D,SAEtC,OACI,+BACKsE,OAAO1B,KAAK5C,GAAOhC,KAAI,SAAAwR,GAAO,OAAI,kBAAC,GAAD,CAAQ1P,SAAUwP,GAAcE,GAAUtR,MAAO4O,SAAS9M,EAAMwP,WCoChGC,GA1BD,SAACrT,GACb,IAAMsT,EAAW5O,mBACTuI,EAAOzB,cAAPyB,GASR,OARAxI,IAAME,WAAU,WACdsI,EAAGsG,UAAUC,mBAAoB,EACjCvG,EAAGwG,eAAiBC,eACpBzG,EAAG0G,aAAc,EACjB1G,EAAG2G,YAAc,IACjBN,EAAS1O,QAAQiP,YAAa,IAC7B,IAGD,oCACA,kBAAC,KAAD,CAAe1O,IAAKmO,EAAUO,YAAU,IACxC,kBAAC,GAAD,MACA,kBAAC,EAAD,MACA,kBAAC,EAAD,MACA,kBAAC,EAAD,MACA,kBAAC,GAAD,CAAW7I,UAAWhL,EAAMgL,YAC5B,kBAAC8I,GAAD,MACA,kBAAC,GAAD,MACA,kBAAC,GAAD,QCvCEC,GAAiB,SAAC/T,GACpB,OACI,kBAAC,IAAD,iBAAYA,EAAZ,CAAmBgU,MAAO,CAACtS,OAAQ,QAASD,MAAO,QAASwS,qBAAmB,EAACV,WAAS,MAmBlFW,GAfD,WAEV,IAAMlJ,EnB8DwBvG,IAAM0P,WAAWhL,GmB5D/C,OACI,kBAAC,GAAD,CACIiL,YAAU,EACVnH,GAAI,CAAEoH,WAAW,IAEjB,kBAAC,GAAD,CAAOrJ,UAAWA,M,UCrBjBsJ,GAAY,uB,2ICGzB,IAMeC,GANDC,KAAOC,GAAV,MACL,SAAAzU,GAAK,OAAIA,EAAM0U,YAAc,GAAK,uBACvB,SAAA1U,GAAK,OAA+B,IAA3BA,EAAM2U,iBAA4B,QAAU,QACzDL,I,sICHb,IAMeM,GANEJ,KAAOC,GAAV,MAEG,SAAAzU,GAAK,OAA+B,IAA3BA,EAAM2U,iBAA4B,SAAW,QAC1DL,I,sICHb,IAMeO,GANCL,KAAOC,GAAV,MAEI,SAAAzU,GAAK,OAA+B,IAA3BA,EAAM2U,iBAA6B,OAAS,UACzDL,I,oBCmDIQ,OAvDjB,SAAwB9U,GAAQ,IAAD,EAEAyE,IAAMsQ,UAAS,GAFf,mBAEpBC,EAFoB,KAEZC,EAFY,OAGFxQ,IAAMsQ,UAAS,GAHb,mBAGpBG,EAHoB,KAGbC,EAHa,KAK3B,MAAO,CACHC,QAAS,SAAC9C,QACe+C,IAAlBrV,EAAMoV,SAAuBpV,EAAMoV,QAAQ9C,IAElD0C,OAAQA,IAAWE,EACnBI,aAAc,SAAChD,GACXA,EAAEiD,iBACFpK,YAAW,WACH+J,GAAMD,GAAS,KACpB,UACuBI,IAAvBrV,EAAMsV,cAA4BtV,EAAMsV,gBAE/CE,WAAY,SAAClD,GACTA,EAAEiD,iBACFjD,EAAEmD,UACEP,GAAMlV,EAAMoV,QAAQ9C,GACxB6C,GAAQ,GACRF,GAAS,GACT9J,YAAW,kBAAM8J,GAAS,KAAQ,UACVI,IAArBrV,EAAMwV,YAA0BxV,EAAMwV,WAAWlD,IAExDoD,YAAa,SAACpD,GACVA,EAAEiD,iBACFJ,GAAQ,GACRF,GAAS,GACT9J,YAAW,kBAAM8J,GAAS,KAAQ,UACTI,IAAtBrV,EAAM0V,aAA2B1V,EAAM0V,YAAYpD,IAE1DqD,cAAe,SAACrD,GACZA,EAAEiD,iBACFN,GAAS,GACTE,GAAQ,GACRhK,YAAW,kBAAM8J,GAAS,KAAQ,UACPI,IAAxBrV,EAAM2V,eAA6B3V,EAAM2V,cAAcrD,IAE9DsD,YAAa,SAACtD,QACe+C,IAAtBrV,EAAM4V,aAA2B5V,EAAM4V,YAAYtD,GACtD2C,GAAS,IAEbY,UAAW,SAACvD,QACe+C,IAApBrV,EAAM6V,WAAyB7V,EAAM6V,UAAUvD,GAClD2C,GAAS,IAEba,aAAc,SAACxD,QACY+C,IAApBrV,EAAM6V,WAAyB7V,EAAM6V,UAAUvD,GAClD2C,GAAS,M,8iBC/CrB,IAEwBc,GAFlBC,GAAqB,SAACC,EAAMC,GAAP,OAAuBD,EAAOC,GAgBnDC,GAAmC3B,KAAO4B,OAAV,MAddL,GAgBI,GAflB,GAAN,OAAUC,GAeS,GAfiB,IAApC,eAA+CA,GAAmBD,GAAO,IAAzE,QAgBwBzB,GAUfA,IACP,SAAAtU,GAAK,OAtBG,SAACA,GAAD,OAAYA,EAAMgV,OAM1B,GANmB,sFAFE,8BAEF,wBAsBVqB,CAAMrW,MACf,SAAAA,GAAK,OAAIA,EAAMgV,OAAS,+BAAiC,MAC7C,SAAAhV,GAAK,OAAIA,EAAMgV,OLjCJ,wBAFD,2BKoCV,SAAAhV,GAAK,2BAAkBA,EAAMgV,OAAS,EAAI,IAArC,gBACjB,SAAAhV,GAAK,OAAIA,EAAMsW,SAAN,sBAAyC,MAClD,SAAAtW,GAAK,OAAIA,EAAMuW,IAAN,eAAoBvW,EAAMuW,IAA1B,MAAoC,MAC7C,SAAAvW,GAAK,OAAIA,EAAMwW,MAAN,iBAAwBxW,EAAMwW,MAA9B,MAA0C,MACnD,SAAAxW,GAAK,OAAIA,EAAMyW,SAAN,iBAAoC,MAUpCC,GAPM,SAAC1W,GAEpB,IAAM2W,EAAQ7B,GAAe9U,GAE7B,OAAO,kBAACmW,GAAD,iBAAsCnW,EAAW2W,K,oBCjDpDC,GAAK9V,KAAKD,IAAIgW,SAASC,gBAAgBC,aAAe,EAAGC,OAAOC,YAAc,GAMrEC,GAJJpW,KAAKD,IAAIgW,SAASC,gBAAgBK,cAAgB,EAAGH,OAAOI,aAAe,GAE9DR,G,SCSlBjC,IAAoBuC,IAAcG,cAAaC,YAE/CC,GAAc,WAChB,OACI,kBAACC,GAAA,EAAD,CAAMC,MAAI,EAACC,GAAI,IACX,kBAAC,GAAD,CAAO/C,iBAAkBA,IAAzB,eACA,kBAAC,GAAD,CAAUA,iBAAkBA,IAA5B,wBACA,kBAAC,GAAD,CAASA,iBAAkBA,IAA3B,mBACA,kBAAC,GAAD,CAASA,iBAAkBA,IAA3B,kBACA,kBAAC,GAAD,CAASA,iBAAkBA,IAA3B,iBACA,kBAAC,GAAD,CAASA,iBAAkBA,IAA3B,sBAKNgD,GAAa,SAAC3X,GAChB,OACI,kBAAC,GAAD,CAAcoV,QAASpV,EAAMkK,MACxBlK,EAAM4X,QACH,kBAAC,KAAD,CACIC,SAAS,QACT7D,MAAO,CAAC9N,MAAOoO,MAGnB,kBAAC,KAAD,CACIuD,SAAS,QACT7D,MAAO,CAAC9N,MAAOoO,QAkBpBwD,GAXK,SAAC9X,GACjB,OACI,kBAACwX,GAAA,EAAD,CAAMO,WAAS,EAACC,QAAS,SAAUC,MAAO,SAAUC,QAASvD,GAAmB,EAAI,IAChF,kBAAC,GAAD,MACA,kBAAC6C,GAAA,EAAD,CAAMC,MAAI,EAACC,GAAI,IACX,kBAAC,GAAD,CAAYxN,KAAMlK,EAAMmY,MAAOP,QAAS5X,EAAM4X,a,2XChD9D,IAmBeQ,GAnBKC,aAAH,KRDW,gDQUK/D,GACCA,GAIVA,ICITgE,OAff,WAAgB,IAAD,EAEiB7T,IAAMsQ,UAAS,GAFhC,mBAEN6C,EAFM,KAEGW,EAFH,KAGb,OACE,yBAAKC,UAAU,OACb,kBAAC,GAAD,MACA,kBAAC,EAAD,KAEIZ,EAAU,kBAAC,GAAD,MAAW,kBAAC,GAAD,CAAaA,QAASA,EAASO,MAAO,kBAAMI,GAAW,SCFlEE,QACW,cAA7BzB,OAAO0B,SAASC,UAEe,UAA7B3B,OAAO0B,SAASC,UAEhB3B,OAAO0B,SAASC,SAASC,MACvB,2DCZNC,IAASC,OACP,kBAAC,IAAMC,WAAP,KACE,kBAAC,GAAD,OAEFlC,SAASmC,eAAe,SDyHpB,kBAAmBC,WACrBA,UAAUC,cAAcC,MACrBC,MAAK,SAAAC,GACJA,EAAaC,gBAEdC,OAAM,SAAAC,GACLvO,QAAQuO,MAAMA,EAAMC,a,4iME0F1BC,EAAOC,QAnOC,YAAkC,IAAxB3J,EAAuB,EAAvBA,GAAGvC,EAAoB,EAApBA,QAAQsC,EAAY,EAAZA,MAAMI,EAAM,EAANA,KACnCA,EAAOA,GAAQ,GACf,IAAIyJ,EAAY,GACZC,EAAapM,EAAQxF,OACrB2R,EAAY,GAEhB,SAASE,EAAM3L,GACb,OAAOA,EAAEiB,MAAM,KAAKxN,KAAI,SAAAgF,GAAC,OAAE8J,SAAS9J,MAGtC,SAASmT,EAAQnT,GAEf,IADA,IAAIoT,EAAM,EACD/L,EAAI,EAAGA,EAAIrH,EAAEqB,OAAQgG,IAC5B+L,GAAOpT,EAAEqH,GAAGR,EAAQQ,GAEtB,IAAIgM,EAAI,EACR,IAAShM,EAAI,EAAGA,EAAIrH,EAAEqB,OAAQgG,IAAI,CAChC,IAAIiM,EAAKtT,EAAEqH,GAAGR,EAAQQ,GAAG+L,EACf,GAANE,IACFD,GAAKC,EAAGpZ,KAAKoK,IAAIgP,IAGrB,OAAOD,EAmBT,SAASE,EAAaxL,EAAEC,EAAEC,GACxB,IAAIuL,EAAOzL,EAAE0L,QAAQ,GACrB,GAAID,EAAO,EAAE,CACXA,EAAOzL,EAAE0L,SAAS,GADP,MAEF,CAACxL,EAAED,GAAVA,EAFS,KAEPC,EAFO,KAIb,IAAK,IAAIZ,EAAI,EAAGA,EAAI8B,EAAM9H,OAAQgG,IAChC,IAAImM,GAAQrK,EAAM9B,GAAG,IAAM,MAAMmM,IAASrK,EAAM9B,GAAG,KAC7CW,GAAKmB,EAAM9B,GAAG,IAAMY,GAAKkB,EAAM9B,GAAG,GACpC,OAAO,EAIb,OAAO,EAGT,SAASqM,EAAUC,GAGjB,IAFA,IAAIC,EAAQ,CAACD,GAENC,EAAMvS,QAAO,CAClBsS,EAAIC,EAAMpK,MAGV,IADA,IAAIqK,EAAO,GACFxM,EAAI,EAAGA,EAAI+B,EAAI/B,IAAI,CAC1B,IAAIyM,EAAK,IAAIlX,MAAMwM,GAAI2K,KAAK,GAC5BD,EAAGzM,IAAM,EACTwM,EAAKpL,KAAKqL,GAEV,IAAIE,EAAK,IAAIpX,MAAMwM,GAAI2K,KAAK,GAC5BC,EAAG3M,GAAK,EACRwM,EAAKpL,KAAKuL,GAEZ,IAAS3M,EAAI,EAAGA,EAAIwM,EAAKxS,OAAQgG,IAAI,CAEnC,IADA,IAAI4M,EAAI,GACC3M,EAAI,EAAGA,EAAIqM,EAAEtS,OAAQiG,IAC5B2M,EAAExL,KAAKkL,EAAErM,GAAGuM,EAAKxM,GAAGC,IAEtB,IAAItH,EAAIgT,EAAUW,QAAalF,GAALzO,IAAiBA,EAAIuJ,EAAKoK,IACpD,IAAI5T,EAAIiT,EAAUiB,GAElB,QAF+BxF,GAALzO,IAAiBA,EAAIuJ,EAAK0K,IAEpC,iBAALlU,GAA6B,oBAALA,EAG7B,GAAgB,iBAALC,GAA6B,iBAALD,EAAc,CAErD,IAAImU,GAAM,EACV,IAAS5M,EAAI,EAAGA,EAAIvH,EAAEsB,OAAQiG,IAChB,GAARvH,EAAEuH,IAGFvH,EAAEuH,GAAK,IAAMiM,EAAaM,EAAKxM,GAAGrH,EAAEsH,KACtCvH,EAAEuH,GAAK,EACP4M,GAAM,GAGNA,GACFN,EAAMnL,KAAKwL,OAGT,IAAgB,iBAALjU,GAA6B,iBAALD,EAuBvC,MAAMa,MAAM,gCAAgCZ,EAAED,GArB9C,IADImU,GAAM,EACD5M,EAAI,EAAGA,EAAIvH,EAAEsB,OAAQiG,IAC5B,GAAY,GAARvH,EAAEuH,GAAN,CAIA,IADA,IAAIuB,GAAK,EACAtB,EAAI,EAAGA,EAAIvH,EAAEqB,OAAQkG,IAC5B,GAAIvH,EAAEuH,GAAK,GAAKxH,EAAEuH,GAAK,GAAKiM,EAAaM,EAAKxM,GAAGE,EAAED,GAAG,CACpDuB,GAAK,EACL,MAGCA,IACH9I,EAAEuH,GAAK,EACP4M,GAAM,GAGNA,GACFN,EAAMnL,KAAKwL,MAWrB,SAASE,EAAOC,GAGd,IAFA,IAAIC,GAAM,EACNC,GAAMC,IACDlN,EAAI,EAAGA,EAAI+M,EAAK/S,OAAQgG,IAC3B+M,EAAK/M,GAAKiN,IACZA,EAAKF,EAAK/M,GACVgN,EAAKhN,GAGT,OAAOgN,EAGTnM,KAAKgE,QAAU,WAAwB,IAAfsI,IAAc,yDACpC,IAAKA,EAAS,CACZ,IAAIC,EAAS,GACb,IAAK,IAAIlN,KAAKgC,EAAK,EACbmL,EAAK9X,MAAMqW,GAAYc,KAAK,IAC7BxK,EAAKhC,IAAM,EACdkN,EAAOlN,GAAKmN,EAEd,IAAK,IAAInN,KAAKyL,EAAU,CACtB,IAAI5K,EAAI4K,EAAUzL,GAAG/F,QAAO,SAACwG,EAAEC,GAAH,OAASD,EAAIC,IAAG,GACxCyM,EAAK1B,EAAUzL,GAAGvM,KAAI,SAAAgF,GAAC,OAAM,GAAHoI,EAAK,EAAEpI,EAAEoI,KACvCqM,EAAOlN,GAAKmN,EAEd,OAAOD,EAGLA,EAAS,GACb,IAAK,IAAIlN,KAAKyL,EACkC,GAA1CA,EAAUzL,GAAG/F,QAAO,SAACwG,EAAEC,GAAH,OAASD,EAAIC,IAAG,KACtCwM,EAAOlN,GAAK4M,EAAOnB,EAAUzL,KAGjC,OAAOjG,OAAOqT,OAAO,GAAGpL,EAAKkL,IAI/BvM,KAAK8D,OAAS,SAAS4I,EAAMC,GAE3B,IADA,IAAIC,EAAS,CAAC,CAAC,IACNzN,EAAI,EAAGA,EAAIuN,EAAKvT,OAAQgG,IAAI,CAEnC,IADA,IAAI0N,EAAK,GACA/U,EAAI4U,EAAKvN,GAAIrH,EAAI6U,EAAKxN,GAAIrH,IAAI,CAErC,IADA,IAAIgV,EAAI,GACC1N,EAAI,EAAGA,EAAIwN,EAAOzT,OAAQiG,IACjC0N,EAAEvM,KAAKqM,EAAOxN,GAAG2N,OAAOjV,IAE1B+U,EAAKA,EAAGE,OAAOD,GAEjBF,EAASC,EAKX,IAAK,IAAIxN,KAHTuN,EAASA,EAAO9Z,KAAI,SAAAgF,GAAC,OAAEA,EAAEkV,MAAM,MAAI3b,QAAO,SAAAyG,GAAC,QAAIA,KAAKuJ,GAAQvJ,KAAKgT,OAE1DhY,KAAI,SAAAgF,GAAC,OAAEgT,EAAUhT,GAAG,IAAIpD,MAAMqW,GAAYc,KAAK,MACxCxK,EACZmK,EAAUR,EAAM3L,KAIpBW,KAAK6D,KAAO,WACV,IAAIoJ,EAAUZ,IACVa,OAAU3G,EAEd,IAAK,IAAIlH,KAAKyL,EAAU,CACtB,IAAIqC,EAAMlC,EAAQH,EAAUzL,IAC5B,GAAI+N,MAAMD,GAAK,CACb,IAAK,IAAI9N,KAAKyL,EACZA,EAAUzL,GAAG,IAAI3K,MAAMqW,GAAYc,KAAK,GAE1C,IAAK,IAAIxM,KAAKgC,EACZmK,EAAUR,EAAM3L,IAGlB,OADAlD,QAAQC,IAAI,OACL,EAEE,GAAP+Q,KAGJA,GAAQnb,KAAKC,SAAS,IACZgb,IACRA,EAAUE,EACVD,EAAUlC,EAAM3L,KAIpB,OAAI4N,GAAWZ,KACbhL,EAAOrB,KAAKgE,UACZ8G,EAAY,IACL,IAETA,EAAUoC,GAnMZ,SAAkBpV,GAEhB,IADA,IAAIoT,EAAM,EACD/L,EAAI,EAAGA,EAAIrH,EAAEqB,OAAQgG,IAC5B+L,GAAOpT,EAAEqH,GAAGR,EAAQQ,GAEtB,IAAIF,EAAIjN,KAAKC,SAASiZ,EACtB,IAAS/L,EAAI,EAAGA,EAAIrH,EAAEqB,OAAQgG,IAE5B,IADAF,GAAKnH,EAAEqH,GAAGR,EAAQQ,IACV,EAAE,CACR,IAAItH,EAAI,IAAInD,MAAMoD,EAAEqB,QAAQ0S,KAAK,GAEjC,OADAhU,EAAEsH,GAAK,EACAtH,GAwLUyU,CAASxB,EAAUoC,IACxC1B,EAAU0B,IACH,M","file":"static/js/main.f6306c14.chunk.js","sourcesContent":["import * as types from '../actionTypes';\r\n\r\nconst ambientLightReducer = (state, action) => {\r\n    switch(action.type) {\r\n        case types.SET_AMBIENT_LIGHT:\r\n            return {\r\n                ...action.props\r\n            }\r\n        default:\r\n            return state\r\n    }\r\n};\r\n\r\nexport default ambientLightReducer;\r\n","// Camera\r\n\r\nexport const SET_CAMERA = \"SET_CAMERA\";\r\n\r\nexport const MOVE_CAMERA = \"MOVE_CAMERA\";\r\n\r\n// Shapes\r\n\r\nexport const PLAY_BASIC_SHAPE = \"PLAY_BASIC_SHAPE\";\r\n\r\nexport const CLEAN_BASIC_SHAPE = \"CLEAN_BASIC_SHAPE\";\r\n\r\n// Ambient Light\r\n\r\nexport const SET_AMBIENT_LIGHT = \"SET_AMBIENT_LIGHT\";\r\n\r\nexport const UPDATE_AMBIENT_LIGHT = \"UPDATE_AMBIENT_LIGHT\";\r\n\r\nexport const REMOVE_AMBIENT_LIGHT = \"REMOVE_AMBIENT_LIGHT\";\r\n\r\n// SpotLight\r\n\r\nexport const SET_SPOT_LIGHT = \"SET_SPOT_LIGHT\";\r\n\r\nexport const UPDATE_SPOT_LIGHT = \"UPDATE_SPOT_LIGHT\";\r\n\r\nexport const REMOVE_SPOT_LIGHT = \"REMOVE_SPOT_LIGHT\";\r\n\r\n// Planes\r\n\r\nexport const SET_PLANE = \"SET_PLANE\";\r\n\r\nexport const UPDATE_PLANE = \"UPDATE_PLANE\";\r\n\r\nexport const REMOVE_PLANE = \"REMOVE_PLANE\";\r\n\r\n\r\n// Outline\r\n\r\nexport const ADD_OUTLINED_MESH = \"ADD_OUTLINED_MESH\";\r\n\r\nexport const SET_OUTLINED_MESH = \"SET_OUTLINED_MESH\";\r\n\r\n// Animations\r\n\r\nexport const PLAY_RINGS_ANIMATION = \"PLAY_RINGS_ANIMATION\";\r\n\r\nexport const PLAY_DODECAHEDRONS_ANIMATION = \"PLAY_DODECAHEDRONS_ANIMATION\";\r\n\r\nexport const PLAY_TETRAHEDRONS_ANIMATION = \"PLAY_TETRAHEDRONS_ANIMATION\";\r\n\r\nexport const PLAY_SPHERES_ANIMATION = \"PLAY_SPHERES_ANIMATION\";\r\n\r\nexport const PLAY_LATHES_ANIMATION = \"PLAY_LATHES_ANIMATION\";\r\n\r\n// Sound\r\n\r\nexport const PLAY_TRANSIENT_SOUND = \"PLAY_TRANSIENT_SOUND\";\r\n\r\nexport const PLAY_LOOP_SOUND = \"PLAY_LOOP_SOUND\";\r\n\r\nexport const STOP_LOOP_SOUND = \"STOP_LOOP_SOUND\";\r\n","import * as types from '../actionTypes';\r\n\r\nconst spotLightsReducer = (state, action) => {\r\n    switch(action.type) {\r\n        case types.SET_SPOT_LIGHT:\r\n            return [\r\n                ...state,\r\n                {\r\n                    key: action.key,\r\n                    ...action.props\r\n                }\r\n            ];\r\n        case types.UPDATE_SPOT_LIGHT:\r\n            return [\r\n                state.filter(spotLight => spotLight.key === action.key),\r\n                {\r\n                    key: action.key,\r\n                    ...action.props\r\n                }\r\n            ]\r\n        case types.REMOVE_SPOT_LIGHT:\r\n            return state.filter(spotLight => spotLight.key === action.key);\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default spotLightsReducer;\r\n","import * as types from '../actionTypes';\r\n\r\nconst planesReducer = (state, action) => {\r\n    switch(action.type) {\r\n        case types.SET_PLANE:\r\n            return [\r\n                ...state,\r\n                {\r\n                    key: action.key,\r\n                    ...action.props\r\n                }\r\n            ];\r\n        case types.UPDATE_PLANE:\r\n            return [\r\n                state.filter(plane => plane.key === action.key),\r\n                {\r\n                    key: action.key,\r\n                    ...action.props\r\n                }\r\n            ]\r\n        case types.REMOVE_PLANE:\r\n            return state.filter(plane => plane.key === action.key);\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default planesReducer;\r\n","import * as types from '../actionTypes';\r\n\r\nconst cameraReducer = (state, action) => {\r\n    switch(action.type) {\r\n        case types.SET_CAMERA:\r\n            return {\r\n                ...action.props\r\n            }\r\n        case types.MOVE_CAMERA:\r\n            return {\r\n                ...action.props,\r\n                startTime: action.startTime\r\n            }\r\n        default:\r\n            return state\r\n    }\r\n};\r\n\r\nexport default cameraReducer;\r\n","import * as actionTypes from '../actionTypes';\r\nimport { omit } from 'lodash';\r\n\r\nconst outlineReducer = (state, action) => {\r\n    switch(action.type) {\r\n        case actionTypes.ADD_OUTLINED_MESH:\r\n            return {\r\n                ...state,\r\n                [action.key]: action.mesh\r\n            };\r\n        case actionTypes.SET_OUTLINED_MESH:\r\n            return omit(state, action.key);\r\n        default:\r\n            return state;\r\n    };\r\n};\r\n\r\nexport default outlineReducer;\r\n","const fragments = 4;\r\n\r\nconst fragmentWidth = 2;\r\n\r\nconst fragmentHeight = 2;\r\n\r\nconst fragmentDepth = 2;\r\n\r\nconst delta = (max) => Math.random() * max - max / 2;\r\n\r\nconst getParticlePositions = (initialPosition, finalPosition, width, height, depth) =>{\r\n    return {\r\n        initialPosition: [\r\n            initialPosition[0] - delta(width),\r\n            initialPosition[1] - delta(height),\r\n            initialPosition[2] - delta(depth)\r\n        ],\r\n        finalPosition: [\r\n            finalPosition[0] - delta(width),\r\n            finalPosition[1] - delta(height),\r\n            finalPosition[2] - delta(depth)\r\n        ]\r\n    }\r\n};\r\n\r\nconst betweenRange = (index, firstIndex, latestIndex) => {\r\n    return (index >= firstIndex && index <= latestIndex);\r\n};\r\n\r\nconst getFirstIndex = (lastFree, animationSize, amount) => {\r\n    \r\n    return lastFree + animationSize > amount ? 0 : lastFree % amount;\r\n};\r\n\r\nconst getLastIndex = (firstIndex, animationSize) => {\r\n    return firstIndex + (animationSize === 0 ? 0 : animationSize - 1);\r\n};\r\n\r\nconst getNextFree = (firstIndex, animationSize) => {\r\n    return firstIndex + animationSize;\r\n};\r\n\r\nconst getShapes = (oldShapes, firstIndex, lastIndex, newProps) => {\r\n    const particlePositions = () => newProps.isParticle ? getParticlePositions(\r\n        newProps.initialPosition,\r\n        newProps.finalPosition,\r\n        fragmentWidth,\r\n        fragmentHeight,\r\n        fragmentDepth\r\n    ) : {};\r\n    const array = oldShapes.map((oldProps, index) => {\r\n        return betweenRange(\r\n            index,\r\n            firstIndex,\r\n            lastIndex,\r\n        ) ? {\r\n                ...newProps,\r\n                ...particlePositions(),\r\n                key: (index - firstIndex) % fragments\r\n            } : oldProps\r\n    });\r\n    return array;\r\n};\r\n\r\nconst updateAnimations = (oldShapes, amount, lastFree, startTime, newProps) => {\r\n    const size = newProps.animationSize * (newProps.isParticle ? fragments : 1);\r\n    const firstIndex = getFirstIndex(lastFree, size, amount);\r\n    const lastIndex = getLastIndex(firstIndex, size);\r\n    const nextFree = getNextFree(firstIndex, size);\r\n    return {\r\n        amount: amount,\r\n        lastFree: nextFree,\r\n        shapes: getShapes(oldShapes, firstIndex, lastIndex, {\r\n            startTime: startTime,\r\n            ...newProps\r\n        })\r\n    };\r\n};\r\n\r\nconst shapesAnimationsReducer = actionType => (state, action) => {\r\n    \r\n    switch(action.type) {\r\n        case actionType:\r\n            return updateAnimations(\r\n                state.shapes,\r\n                state.amount,\r\n                state.lastFree,\r\n                action.startTime,\r\n                action.props\r\n            );\r\n        default:\r\n            return state;\r\n    };\r\n};\r\n\r\nexport default shapesAnimationsReducer;\r\n","import ambientLightReducer from './ambientLightReducer';\r\nimport spotLightsReducer from './spotLightsReducer';\r\nimport planesReducer from './planesReducer';\r\nimport cameraReducer from './cameraReducer';\r\nimport outlineReducer from './outlineReducer';\r\nimport shapesAnimationsReducer from './shapesAnimationsReducer';\r\nimport * as types from '../actionTypes';\r\n\r\nconst stateReducer = (state, action) => {\r\n    return {\r\n        camera: cameraReducer(state.camera, action),\r\n        ambientLight: ambientLightReducer(state.ambientLight, action),\r\n        spotLights: spotLightsReducer(state.spotLights, action),\r\n        planes: planesReducer(state.planes, action),\r\n        outline: outlineReducer(state.outline, action),\r\n        ringsAnimations: shapesAnimationsReducer(types.PLAY_RINGS_ANIMATION)(state.ringsAnimations, action),\r\n        dodecahedronsAnimations: shapesAnimationsReducer(types.PLAY_DODECAHEDRONS_ANIMATION)(state.dodecahedronsAnimations, action),\r\n        lathesAnimations: shapesAnimationsReducer(types.PLAY_LATHES_ANIMATION)(state.lathesAnimations, action),\r\n        spheresAnimations: shapesAnimationsReducer(types.PLAY_SPHERES_ANIMATION)(state.spheresAnimations, action),\r\n        tetrahedronsAnimations: shapesAnimationsReducer(types.PLAY_TETRAHEDRONS_ANIMATION)(state.tetrahedronsAnimations, action)\r\n    }\r\n}\r\n\r\nexport default stateReducer;\r\n","import create from 'zustand';\r\nimport storeReducer from './reducers/storeReducer';\r\n\r\nconst RINGS_AMOUNT = 1;\r\nconst DODECAHEDRONS_AMOUNT = 0;\r\nconst SPHERES_AMOUNT = 38500;\r\nconst LATHES_AMOUNT = 0;\r\nconst TETRAHEDRONS_AMOUNT = 0;\r\nconst EMPTY = \"EMPTY\";\r\n\r\nconst animation = (amount) => {\r\n  return {\r\n    amount: amount,\r\n    lastFree: 0,\r\n    shapes: [...Array(amount)].map(() => EMPTY),\r\n  }\r\n};\r\n\r\nconst initialState = {\r\n  camera: {\r\n    position: [0, 0, 0]\r\n  },\r\n  ambientLight: {\r\n    intensity: 0.5\r\n  },\r\n  spotLights: [],\r\n  shapes: [],\r\n  planes: [],\r\n  outline: {},\r\n  dodecahedronsAnimations: animation(DODECAHEDRONS_AMOUNT),\r\n  tetrahedronsAnimations: animation(TETRAHEDRONS_AMOUNT),\r\n  lathesAnimations: animation(LATHES_AMOUNT),\r\n  spheresAnimations: animation(SPHERES_AMOUNT),\r\n  ringsAnimations: animation(RINGS_AMOUNT),\r\n  waves: []\r\n};\r\n\r\nexport const [useStore, storeApi] = create(set => ({\r\n    ...initialState,\r\n    dispatch: action => set(state => storeReducer(state, action)),\r\n    setWaves: waves => set(state => {\r\n      return {\r\n        ...state,\r\n        waves\r\n      }\r\n    }\r\n  )\r\n}));\r\n","import React from 'react';\r\nimport { useStore } from '../../state/store';\r\n\r\nconst AmbientLightProvider = () => {\r\n\r\n    const [ambientLight] = useStore(state => [state.ambientLight])\r\n\r\n    return(<ambientLight {...ambientLight}/>);\r\n};\r\n\r\nexport default AmbientLightProvider;\r\n","import React, { useEffect } from 'react';\r\nimport { useFrame } from 'react-three-fiber';\r\nimport { Mesh } from 'three';\r\nimport { omit } from 'lodash';\r\n\r\nconst SHADOW_MAP_SIZE = 4096;\r\n\r\nconst SpotLight = (props) => {\r\n\r\n    const lightTarget = new Mesh();\r\n    \r\n    const spotLightRef = React.useRef();\r\n\r\n    useEffect(() => {\r\n        spotLightRef.current.shadowDarkness = 1;\r\n    }, []);\r\n\r\n    useFrame(({clock}, delta) => {\r\n        if(props.update) props.update(spotLightRef, clock, delta)\r\n    });\r\n\r\n    return (\r\n        <group>\r\n            <primitive\r\n                object={lightTarget}\r\n                position={props.target}\r\n            />\r\n            <spotLight\r\n                ref={spotLightRef}\r\n                {...omit(props, \"target\")}\r\n                shadow-bias={-0.00005}\r\n                shadow-mapSize-width={256}\r\n                shadow-mapSize-height={256}\r\n                castShadow\r\n                target={lightTarget}\r\n            />\r\n        </group>\r\n    );\r\n};\r\n\r\nexport default SpotLight;\r\n","import React from 'react';\r\nimport { useStore } from '../../state/store';\r\nimport SpotLight from '../3d/light/SpotLight';\r\n\r\nconst SpotLightsProvider = () => {\r\n\r\n    const [spotLights] = useStore(state => [state.spotLights])\r\n\r\n    return spotLights.map(spotLight => <SpotLight {...spotLight}/>);\r\n};\r\n\r\nexport default SpotLightsProvider;\r\n","import React, { useRef } from 'react';\r\nimport { planeColor } from '../material/color';\r\nimport gradientMap from '../material/gradientMap';\r\n\r\nconst Plane = props => {\r\n\r\n    const mesh = useRef();\r\n    return (\r\n      <group>\r\n\r\n        <mesh\r\n          {...props}\r\n          ref={mesh}\r\n          scale={props.scale ? props.scale : [1, 1, 1]}\r\n          position={props.position ? props.position : [0, 0, 0]}\r\n          rotation={props.rotation ? props.rotation.map(n => Math.PI * n) : [0, 0, 0]}\r\n        >\r\n          <planeGeometry  args={[props.width, props.height]}/>\r\n          <meshPhongMaterial color={props.color}/>\r\n        </mesh>\r\n        <mesh\r\n          {...props}\r\n          ref={mesh}\r\n          scale={props.scale ? props.scale : [1, 1, 1]}\r\n          position={props.position ? props.position : [0, 0, 0]}\r\n          rotation={props.rotation ? props.rotation.map(n => Math.PI * n) : [0, 0, 0]}\r\n          receiveShadow\r\n          castShadow\r\n        >\r\n          <planeGeometry args={[props.width, props.height]}/>\r\n          <shadowMaterial color=\"#black\" opacity={0.5} />\r\n        </mesh>\r\n      </group>\r\n    );\r\n  \r\n  };\r\n\r\n  export default Plane;\r\n","import * as THREE from 'three';\r\n\r\nexport const shapeHoverColor = new THREE.Color().setHSL( 0.02, 0.8, 0.25 ).multiplyScalar( 0.8 );\r\nexport const shapeIdleColor = new THREE.Color().setHSL( 0.02, 0.8, 0.2 ).multiplyScalar( 0.8 );\r\nexport const planeColor = \"hsla(210, 100% , 40%, 1)\";\r\n","import React from 'react';\r\nimport { useStore } from '../../state/store';\r\nimport Plane from '../3d/geometry/Plane';\r\n\r\nconst PlanesProvider = () => {\r\n\r\n    const [planes] = useStore(state => [state.planes])\r\n\r\n    return planes.map(plane => <Plane {...plane}/>);\r\n};\r\n\r\nexport default PlanesProvider;\r\n","import { omit } from 'lodash';\r\n\r\nconst POSITION_PYRAMID = \"POSITION_PYRAMID\";\r\n\r\nconst POSITION_GRID = \"POSITION_GRID\";\r\n\r\nconst INVERSE_POSITION_GRID = \"INVERSE_POSITION_GRID\";\r\n\r\nconst INTERPOLATION_PYRAMID = \"INTERPOLATION_PYRAMID\";\r\n\r\nconst INTERPOLATION_GRID = \"INTERPOLATION_GRID\";\r\n\r\nconst INVERSE_INTERPOLATION_GRID = \"INVERSE_INTERPOLATION_GRID\";\r\n\r\nconst applyProps = (props, injectedProps) => {\r\n    return {\r\n        ...props,\r\n        ...injectedProps\r\n    };\r\n}\r\n\r\nconst applyGrid = (amount, fn) => {\r\n    \r\n    return [...Array(amount[2]).keys()].flatMap(z =>\r\n        [...Array(amount[1]).keys()].flatMap(y =>\r\n            [...Array(amount[0]).keys()].map(x =>\r\n                {\r\n                    return fn(x, y, z)\r\n                }\r\n            )\r\n        )\r\n    )\r\n}\r\n\r\nconst positionGridPosition = (position, separation) => (x, y, z) => {\r\n    \r\n    const r = [\r\n        position[0] + x * separation[0],\r\n        position[1] + y * separation[1],\r\n        position[2] + z * separation[2]\r\n    ];\r\n    return r;\r\n}\r\n\r\nconst positionGridEventProps = (time, sprites, position, separation) => (x, y, z) => (\r\n    {\r\n        time: time,\r\n        type: \"SINGLE\",\r\n        sprites: sprites,\r\n        props: {\r\n            position: position(position, separation)(x, y, z)\r\n        }\r\n    }\r\n);\r\n\r\nconst getTime = (time, delay, x) => {\r\n    return time + delay * x;\r\n};\r\n\r\nconst interpolationGridEventProps = (time, sprites, initialPosition, finalPosition, separation, delay) => (x, y, z) => {\r\n    const props = {\r\n        initialPosition: positionGridPosition(initialPosition, separation)(x, y, z),\r\n        finalPosition: positionGridPosition(finalPosition, separation)(x, y, z)\r\n    };\r\n    return {\r\n        time: getTime(time, delay, x),\r\n        type: \"SINGLE\",\r\n        sprites: sprites,\r\n        props: props\r\n    };\r\n};\r\n\r\nconst applyPositionGrid = (event) => applyGrid(event.polyphony.amount, positionGridEventProps(\r\n    event.time,\r\n    event.sprites,\r\n    event.polyphony.position,\r\n    event.polyphony.separation\r\n));\r\n\r\nconst applyInterpolationGrid = (event) => applyGrid(event.polyphony.amount, interpolationGridEventProps(\r\n    event.time,\r\n    event.sprites,\r\n    event.polyphony.initialPosition,\r\n    event.polyphony.finalPosition,\r\n    event.polyphony.separation,\r\n    event.polyphony.delay\r\n));\r\n\r\nconst applyPoliphony = event => {\r\n    switch(event.polyphony.type) {\r\n        case POSITION_GRID:\r\n            return applyPositionGrid(event);\r\n        case INTERPOLATION_GRID:\r\n            return applyInterpolationGrid(event);\r\n        default:\r\n            throw new Error(`event ${JSON.stringify(event)} was not polyphonic.`);\r\n    };\r\n};\r\n\r\nconst apply = (events) => {\r\n    const r = [\r\n        ...events.filter(event => event.type !== \"POLYPHONIC\"),\r\n        ...events.filter(event => event.type === \"POLYPHONIC\").flatMap(event => applyPoliphony(event))\r\n    ];\r\n    return r;\r\n};\r\n\r\nconst EventPolyphonyService = {\r\n    apply: (events) => apply(events)\r\n};\r\n\r\nexport default EventPolyphonyService;\r\n","import { omit } from 'lodash';\r\nimport PolyphonyService from './EventPolyphonyService';\r\n\r\nconst getInitialCamera = (json) => {\r\n    return json.initialCamera;\r\n};\r\n\r\nconst getStartTime = (json) => {\r\n    const startTime = json.startTime;\r\n    return startTime ? startTime : 0;\r\n}\r\n\r\nconst getLoops = (json) => {\r\n\r\n};\r\n\r\nconst getEventPlusSprite = (event, sprites) => {\r\n    const eventWithoutProps = omit(event, \"props\");\r\n    if(eventWithoutProps.sprites && eventWithoutProps.sprites.length > 0) {\r\n        const eventWithoutPropsOrSprites = omit(eventWithoutProps, \"sprites\");\r\n        const spritesToApply = event.sprites ? Object.keys(sprites).filter(key => event.sprites.includes(key)).map(key => sprites[key]) : [];\r\n        return spritesToApply.reduce((event, sprite) => ({\r\n            ...omit(sprite, \"props\"),\r\n            ...eventWithoutPropsOrSprites\r\n        }), omit(event, \"props\"));\r\n    };\r\n    return eventWithoutProps;\r\n}\r\n\r\nconst useSpriteProps = (event, sprites) => {\r\n    if(event.sprites && event.sprites.length > 0) {\r\n        const spritesToApply = Object.keys(sprites).filter(key => event.sprites.includes(key)).map(key => sprites[key]);\r\n        return spritesToApply.reduce((event, sprite) => ({\r\n            ...sprite.props,\r\n            ...event.props\r\n        }), event);\r\n    }\r\n    return event.props;\r\n};\r\n\r\nconst getEvents = (eventsJson, spritesJson) => {\r\n    \r\n    const events = PolyphonyService.apply(eventsJson.events);\r\n    const sprites = spritesJson.sprites;\r\n    return events.map((event, index) => {\r\n        const eventPlusSprite = getEventPlusSprite(event, sprites);\r\n        return {\r\n            time: event.time,\r\n            action: {\r\n                type: `${eventPlusSprite.action}_${eventPlusSprite.element}`,\r\n                key: `${eventPlusSprite.action}_${eventPlusSprite.element}_${index}`,\r\n                props: useSpriteProps(event, sprites)\r\n            }\r\n        };\r\n    })\r\n}\r\n\r\nconst SequenceReaderService = (eventsJson, spritesJson) => {\r\n    return {\r\n        getStartTime: getStartTime(eventsJson),\r\n        getInitialCamera: getInitialCamera(eventsJson),\r\n        getEvents: getEvents(eventsJson, spritesJson),\r\n        getLoops: getLoops(eventsJson, spritesJson)\r\n    }\r\n}\r\n\r\nexport default SequenceReaderService;\r\n","import React from 'react';\r\nimport {Howl} from 'howler';\r\nimport { omit } from 'lodash';\r\n\r\nconst SoundContext = React.createContext();\r\n\r\nlet sounds = {};\r\n\r\nconst PREFIX = \"/sound/\";\r\n\r\n\r\nexport const eventTypes = {\r\n    ADD_SOUND: \"ADD_SOUND\",\r\n    PLAY_SOUND: \"PLAY_SOUND\",\r\n    STOP_SOUND: \"STOP_SOUND\",\r\n    REMOVE_SOUND: \"REMOVE_SOUND\",\r\n    LOOP_SOUND: \"LOOP_SOUND\"\r\n};\r\n\r\nconst soundFns = {\r\n    add: (key, file, startTime, props) => {\r\n        sounds[key] = new Howl({\r\n            src: [PREFIX + file],\r\n            sprite: {\r\n                [`${key}_sound`]: [startTime * 1000, 1800000]\r\n            },\r\n            ...omit(props, [\"key\", \"file\"])\r\n        });\r\n    },\r\n    loop: (key, loop) => {\r\n        sounds[key].loop(loop);\r\n    },\r\n    play: (key) => {\r\n        sounds[key].play(`${key}_sound`);\r\n    },\r\n    stop: (key) => {\r\n        sounds[key].stop();\r\n    },\r\n    remove: (key) => {\r\n        sounds[key].unload();\r\n        delete sounds[key];\r\n    }\r\n}\r\n\r\nvar soundApi = {\r\n    ...soundFns,\r\n    execute: (action) => {\r\n        switch(action.type) {\r\n            case eventTypes.ADD_SOUND:\r\n                soundFns.add(action.props.key, action.props.file, action.startTime, action.props);\r\n                break;\r\n            case eventTypes.PLAY_SOUND:\r\n                soundFns.play(action.props.key);\r\n                break;\r\n            case eventTypes.LOOP_SOUND:\r\n                soundFns.loop(action.props.key, action.props.loop);\r\n            case eventTypes.STOP_SOUND:\r\n                soundFns.stop(action.props.key);\r\n                break;\r\n            case eventTypes.REMOVE_SOUND:\r\n                soundFns.remove(action.props.key);\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n};\r\n\r\nexport const Sound = (props) => {\r\n    return (\r\n        <SoundContext.Provider value={soundApi}>\r\n            {props.children}\r\n        </SoundContext.Provider>\r\n    );\r\n};\r\n\r\nexport const useSoundsApi = () => React.useContext(SoundContext);\r\n","import { eventTypes as SoundEventTypes } from '../components/Sound'; \r\n\r\nconst isSoundEvent = action => Object.values(SoundEventTypes).includes(action.type);\r\n\r\nconst EventDispatcherService = {\r\n    play: (events, startTime, dispatch, clock, soundsApi) => {\r\n        events.map(event => {\r\n            console.log(event)\r\n            if((!event.action.type.includes(\"PLAY\") || !event.action.type.includes(\"MOVE\") || (event.time >= startTime)) && !isSoundEvent(event.action)) {\r\n                setTimeout(() => {\r\n                        const elapsedTime = clock.elapsedTime;\r\n                        dispatch({\r\n                            ...event.action,\r\n                            startTime: elapsedTime\r\n                        })\r\n                }, (event.time - startTime) * 1000);\r\n            } else if (isSoundEvent(event.action)) {\r\n                soundsApi.execute(\r\n                    {\r\n                        ...event.action,\r\n                        startTime: startTime\r\n                    }\r\n                )\r\n            }\r\n        });\r\n    }\r\n};\r\n\r\nexport default EventDispatcherService;\r\n","import React, {useEffect} from 'react';\r\nimport SequenceService from '../services/SequenceReaderService';\r\nimport PolyphonyService from '../services/EventPolyphonyService';\r\nimport EventDispatcherService from '../services/EventDispatcherService';\r\nimport sequence from '../sequences/sequence.json';\r\nimport sprites from '../sequences/sprites.json';\r\nimport { useStore } from '../state/store';\r\nimport { useThree } from 'react-three-fiber';\r\n\r\nconst sceneService = SequenceService(sequence, sprites);\r\n\r\n\r\nconst Sequencer = (props) => {\r\n    \r\n    \r\n    const [dispatch] = useStore(state => [state.dispatch]);\r\n    \r\n    const {clock} = useThree();\r\n\r\n    useEffect(() => {\r\n        const soundsApi = props.soundsApi;\r\n\r\n        EventDispatcherService.play(sceneService.getEvents, sceneService.getStartTime, dispatch, clock, soundsApi);  \r\n    }, []);\r\n\r\n    return (<></>);\r\n};\r\n\r\nexport default Sequencer;\r\n","import React from 'react';\r\nimport {Suspense} from 'react';\r\nimport { BrightnessContrast, EffectComposer, DepthOfField, Bloom, Noise, Vignette, Outline } from '@react-three/postprocessing';\r\nimport { BlendFunction, OverrideMaterialManager } from 'postprocessing';\r\nimport { useRef, useEffect } from 'react';\r\nimport { storeApi } from '../state/store';\r\nimport { useFrame } from 'react-three-fiber';\r\n\r\nconst Effects = () => {\r\n\r\n  const outlineRef = useRef();\r\n  \r\n  useEffect(() => {\r\n\r\n    OverrideMaterialManager.workaroundEnabled = true;\r\n  }, []);\r\n\r\n  useFrame(() => {\r\n    if(outlineRef.current) {\r\n      outlineRef.current.selection.set(Object.values(storeApi.getState().outline));\r\n    }\r\n  });\r\n  \r\n  return (\r\n    <Suspense fallback={null}>\r\n      <EffectComposer>\r\n        <Bloom luminanceThreshold={0} luminanceSmoothing={0.9} height={300} />\r\n        <Noise opacity={0.05} />\r\n        <Vignette eskil={false} offset={0.1} darkness={0.1} />\r\n        <BrightnessContrast brightness={0.06} contrast={0.51}/>\r\n      </EffectComposer>\r\n    </Suspense>\r\n  );\r\n};\r\n\r\nexport default Effects;\r\n","import React from 'react';\r\nimport { Canvas, extend, useThree, useFrame } from \"react-three-fiber\";\r\nimport {\r\n    CubeTextureLoader,\r\n    CubeCamera,\r\n    WebGLCubeRenderTarget,\r\n    RGBFormat,\r\n    LinearMipmapLinearFilter,\r\n  } from \"three\";\r\n\r\nconst cubeRenderTarget = new WebGLCubeRenderTarget(256, {\r\n    format: RGBFormat,\r\n    generateMipmaps: true,\r\n    minFilter: LinearMipmapLinearFilter,\r\n  });\r\n  \r\n  const cubeCamera = new CubeCamera(1, 100, cubeRenderTarget);\r\n  \r\n  cubeCamera.position.set(0, 100, 0);\r\n  \r\n  // Loads the skybox texture and applies it to the scene.\r\n  const SkyBox = () => {\r\n  \r\n    const { scene, gl } = useThree();\r\n  \r\n    React.useEffect(() => {\r\n      const loader = new CubeTextureLoader();\r\n  \r\n      const texture = loader.load([\r\n        \"sky-1.png\",\r\n        \"sky-2.png\",\r\n        \"sky-3.png\",\r\n        \"sky-4.png\",\r\n        \"sky-5.png\",\r\n        \"sky-6.png\",\r\n      ]);\r\n      scene.background = texture;\r\n    }\r\n  \r\n    )\r\n    return null;\r\n}\r\n\r\nexport default SkyBox;\r\n","import * as THREE from 'three';\r\n\r\nvar WFCTool3D = function(){\r\n  var tiles = []\r\n  var materials = {}\r\n  var weights = []\r\n  var n_prototypes = 0\r\n  var formulae = []\r\n  \r\n  \r\n  var transformBank = {\r\n    ry:function(m){\r\n      var r = JSON.parse(JSON.stringify(m));\r\n      for (var i = 0; i < m.length; i++){\r\n        for (var j = 0; j < m.length; j++){\r\n          for (var k = 0; k < m.length; k++){\r\n            r[i][j][k] = m[i][m.length-1-k][j]; \r\n          }\r\n        }\r\n      }\r\n      return r;\r\n    },\r\n    \r\n    rx:function(m){\r\n      var r = JSON.parse(JSON.stringify(m));\r\n      for (var i = 0; i < m.length; i++){\r\n        for (var j = 0; j < m.length; j++){\r\n          for (var k = 0; k < m.length; k++){\r\n            r[i][j][k] = m[k][j][m.length-1-i]; \r\n          }\r\n        }\r\n      }\r\n      return r;\r\n    },\r\n    \r\n    rz:function(m){\r\n      var r = JSON.parse(JSON.stringify(m));\r\n      for (var i = 0; i < m.length; i++){\r\n        for (var j = 0; j < m.length; j++){\r\n          for (var k = 0; k < m.length; k++){\r\n            r[i][j][k] = m[m.length-1-j][i][k]; \r\n          }\r\n        }\r\n      }\r\n      return r;\r\n    },\r\n    \r\n    fz:function(m){\r\n      var r = JSON.parse(JSON.stringify(m));\r\n      for (var i = 0; i < m.length; i++){\r\n        for (var j = 0; j < m[0].length; j++){\r\n          for (var k = 0; k < m[0][0].length; k++){\r\n            r[i][j][k] = m[i][j][m.length-1-k]; \r\n          }\r\n        }\r\n      }\r\n      return r;\r\n    },\r\n    \r\n    fx:function(m){\r\n      var r = JSON.parse(JSON.stringify(m));\r\n      for (var i = 0; i < m.length; i++){\r\n        for (var j = 0; j < m[0].length; j++){\r\n          for (var k = 0; k < m[0][0].length; k++){\r\n            r[i][j][k] = m[i][m.length-1-j][k]; \r\n          }\r\n        }\r\n      }\r\n      return r;\r\n    },\r\n    \r\n    fy:function(m){\r\n      \r\n      var r = JSON.parse(JSON.stringify(m));\r\n\r\n      for (var i = 0; i < m.length; i++){\r\n        for (var j = 0; j < m[0].length; j++){\r\n          for (var k = 0; k < m[0][0].length; k++){\r\n            r[i][j][k] = m[m.length-1-i][j][k]; \r\n          }\r\n        }\r\n      }\r\n      return r;\r\n    },\r\n  }\r\n\r\n  function equal(m,r){\r\n    for (var i = 0; i < m.length; i++){\r\n      for (var j = 0; j < m[0].length; j++){\r\n        for (var k = 0; k < m[0][0].length; k++){\r\n          if (m[i][j][k] != r[i][j][k]){\r\n            return false;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    return true;\r\n  }\r\n  \r\n  function fit(d,a,b){\r\n    if (d == \"x\"){\r\n      for (var i = 0; i < a.length; i++){\r\n        for (var j = 0; j < a[i][0].length; j++){\r\n          if (a[i][a[i].length-1][j] != b[i][0][j]){\r\n            return false;\r\n          }\r\n        }\r\n      }\r\n    }else if (d == \"y\"){\r\n      for (var i = 0; i < a[0].length; i++){\r\n        for (var j = 0; j < a[i][0].length; j++){\r\n          if (a[a.length-1][i][j] != b[0][i][j]){\r\n            return false;\r\n          }\r\n        }\r\n      }\r\n    }else if (d == \"z\"){\r\n      for (var i = 0; i < a.length; i++){\r\n        for (var j = 0; j < a[0].length; j++){\r\n          if (a[i][j][a[i][0].length-1] != b[i][j][0]){\r\n            return false;\r\n          }\r\n        }\r\n      }      \r\n    }\r\n    return true;\r\n  }\r\n  \r\n  this.addTile = function(s,{transforms=\"auto\",weight=1}={}){\r\n    var t = s.map(y=>y.split(\"\\n\").map(x=>x.split(\"\")));\r\n    tiles.push(t);\r\n    formulae.push([ n_prototypes, '', t ])\r\n    weights.push(weight)\r\n    \r\n    var tests = []\r\n    \r\n    if (transforms == \"auto\"){\r\n      transforms = ['ry','ry','ry+ry+ry','fy','fy+ry','fy+ry+ry','fy+ry+ry+ry']\r\n    }\r\n    \r\n    for (var i = 0; i < transforms.length; i++){\r\n      var tl = transforms[i].split(\"+\")\r\n      var tt = t\r\n      for (var j = 0; j < tl.length; j++){\r\n        tt = transformBank[tl[j]](tt);\r\n      }\r\n      tests.push(tt);\r\n    }\r\n    for (var i = 0; i < tests.length; i++){\r\n      var ok = true;\r\n      for (var j = 0; j < tiles.length; j++){\r\n        if (equal(tests[i],tiles[j])){\r\n          ok = false;\r\n          break;\r\n        }\r\n      }\r\n      if (ok){\r\n        tiles.push(tests[i])\r\n        weights.push(weight)\r\n        formulae.push([ n_prototypes, transforms[i], tests[i] ])\r\n      }\r\n    }\r\n    n_prototypes++;\r\n  }\r\n  \r\n  this.addMaterial = function(symbol, material){\r\n    materials[symbol] = material;\r\n  }\r\n  \r\n  this.getTileFormulae = function(){\r\n    return formulae;\r\n  }\r\n  \r\n  this.generateWFCInput = function(){\r\n    var rules = []\r\n    for (var i = 0; i < tiles.length; i++){\r\n      for (var j = 0; j < tiles.length; j++){\r\n\r\n        if (fit(\"x\",tiles[i],tiles[j])){\r\n          rules.push(['x',i,j])\r\n        }\r\n        if (fit(\"y\",tiles[i],tiles[j])){\r\n          rules.push(['y',i,j])\r\n        }\r\n        if (fit(\"z\",tiles[i],tiles[j])){\r\n          rules.push(['z',i,j])\r\n        }\r\n      }\r\n    }\r\n    return {weights,rules,nd:3}\r\n  }\r\n  \r\n  /*global describe THREE */\r\n  this.plotWFCOutput = function(root,wave){\r\n\r\n    while (root.children.length){\r\n      root.children.pop();\r\n    }\r\n    \r\n    var wz = tiles[0][0][0].length\r\n    var wx = tiles[0][0].length\r\n    var wy = tiles[0].length;\r\n    \r\n    const geometryScale = 10;\r\n\r\n    var geometry = new THREE.BoxGeometry( geometryScale /wx, geometryScale/wy, geometryScale/wz );\r\n    for (var K in wave){\r\n      var [y,x,z] = K.split(\",\").map(x=>parseInt(x));\r\n      for (var i = 0; i < wy; i++){\r\n        for (var j = 0; j < wx; j++){\r\n          for (var k = 0; k < wz; k++){\r\n            var material = materials[tiles[wave[K]][i][j][k]]\r\n            if (material){\r\n              var cube = new THREE.Mesh(geometry,material);\r\n              cube.position.set(geometryScale * (z+k/wz), geometryScale * (x+j/wx),  geometryScale * (y+i/wy) + 10)\r\n              cube.castShadow = true;\r\n              cube.receiveShadow = true;\r\n              root.add(cube);\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n  \r\n}\r\n\r\nexport default WFCTool3D;\r\n","/*\nauto-generated by: https://github.com/pmndrs/gltfjsx\n*/\nimport React, { useRef, Suspense } from 'react'\nimport { useGLTF } from '@react-three/drei/useGLTF'\nimport { PositionalAudio } from '@react-three/drei'\n\nexport default function Model(props) {\n  const group = useRef()\n  const { nodes, materials } = useGLTF('/ColumnaGiro.gltf')\n\n  return (\n    <group ref={group} {...props}>\n      <mesh castShadow receiveShadow material={materials['Mat.2']} geometry={nodes.Columna_esquina.geometry} position={[0, 0.013694, 0]}></mesh>\n      <Suspense fallback={null}>\n        <PositionalAudio loop url=\"/objs-8.mp3\" distance={0.8}/>\n      </Suspense>\n    </group>\n  )\n}\n\nuseGLTF.preload('/ColumnaGiro.gltf')\n","/*\nauto-generated by: https://github.com/pmndrs/gltfjsx\n*/\nimport React, { useRef } from 'react'\nimport { useGLTF } from '@react-three/drei/useGLTF'\nimport { MeshStandardMaterial } from 'three';\n\nconst mat = (oldMat) => {\n  const newMat = new MeshStandardMaterial({\n    color: oldMat.color, \n    map: oldMat.map\n})\n\n  return newMat;\n}\n\nexport default function Model(props) {\n  \n  const group = useRef()\n  const { nodes, materials } = useGLTF('/ColumnaGiroNS.gltf')\n  return (\n    <group ref={group} {...props}>\n      <mesh receiveShadow castShadow material={materials['Mat.2']} geometry={nodes.Columna_Ns.geometry} position={[0.655, 0, -0.655]}>\n      </mesh>\n    </group>\n  )\n}\n\nuseGLTF.preload('/ColumnaGiroNS.gltf')\n","/*\nauto-generated by: https://github.com/pmndrs/gltfjsx\n*/\nimport React, { useRef } from 'react'\nimport { useGLTF } from '@react-three/drei/useGLTF'\n\nexport default function Model(props) {\n  const group = useRef()\n  const { nodes, materials } = useGLTF('/Pared.gltf')\n  return (\n    <group ref={group} {...props}>\n    <mesh castShadow receiveShadow material={materials['Mat.2']} geometry={nodes.Pared.geometry} />\n      <mesh receiveShadow geometry={nodes.Pared.geometry} >\n        \n        <shadowMaterial color=\"#black\" opacity={0.5} />\n      </mesh>\n    </group>\n  )\n}\n\nuseGLTF.preload('/Pared.gltf')\n","/*\nauto-generated by: https://github.com/pmndrs/gltfjsx\n*/\nimport React, { useRef } from 'react'\nimport { useGLTF } from '@react-three/drei/useGLTF'\n\nexport default function Model(props) {\n  const group = useRef()\n  const { nodes, materials } = useGLTF('/ParedNS.gltf')\n  return (\n    <group ref={group} {...props}>\n    <mesh castShadow receiveShadow material={materials['Mat.2']} geometry={nodes.Pared_Ns.geometry} position={[0.36, 0, 0]}/>\n    </group>\n  )\n}\n\nuseGLTF.preload('/ParedNS.gltf')\n","/*\nauto-generated by: https://github.com/pmndrs/gltfjsx\n*/\nimport React, { useRef, Suspense } from 'react'\nimport { useGLTF } from '@react-three/drei/useGLTF'\nimport { PositionalAudio } from '@react-three/drei'\n\nexport default function Model(props) {\n  const group = useRef()\n  const { nodes, materials } = useGLTF('/ParedEsquina.gltf')\n  return (\n    <group ref={group} {...props}>\n      <mesh castShadow receiveShadow material={materials['Mat.2']} geometry={nodes.Pared_esquina.geometry} >\n      </mesh>\n      <Suspense fallback={null}>\n        <PositionalAudio loop url=\"/objs-7.mp3\" distance={0.8}/>\n      </Suspense>\n    </group>\n  )\n}\n\nuseGLTF.preload('/ParedEsquina.gltf')\n","/*\nauto-generated by: https://github.com/pmndrs/gltfjsx\n*/\nimport React, { useRef } from 'react'\nimport { useGLTF } from '@react-three/drei/useGLTF'\n\nexport default function Model(props) {\n  const group = useRef()\n  const { nodes, materials } = useGLTF('/ParedEsquinaNS.gltf')\n  return (\n    <group ref={group} {...props}>\n      <mesh castShadow receiveShadow material={materials['Mat.2']} geometry={nodes.Paredesquina_Ns.geometry} />\n\n    </group>\n  )\n}\n\nuseGLTF.preload('/ParedEsquinaNS.gltf')\n","/*\nauto-generated by: https://github.com/pmndrs/gltfjsx\n*/\nimport React, { useRef, Suspense } from 'react'\nimport { useGLTF } from '@react-three/drei/useGLTF'\nimport { PositionalAudio } from '@react-three/drei'\n\nexport default function Model(props) {\n  const group = useRef()\n  const { nodes, materials } = useGLTF('/Puerta.gltf')\n  return (\n    <group castShadow receiveShadow ref={group} {...props}>\n      <mesh castShadow receiveShadow material={materials['Mat.2']} geometry={nodes.Puerta.geometry}  position={[0, 0.013694, 0]}/>\n      <Suspense fallback={null}>\n        <PositionalAudio loop url=\"/objs-11.mp3\" distance={0.8}/>\n      </Suspense>\n    </group>\n  )\n}\n\nuseGLTF.preload('/Puerta.gltf')\n","/*\nauto-generated by: https://github.com/pmndrs/gltfjsx\n*/\nimport React, { useRef } from 'react'\nimport { useGLTF } from '@react-three/drei/useGLTF'\n\nexport default function Model(props) {\n  const group = useRef()\n  const { nodes, materials } = useGLTF('/SobrePuerta.gltf')\n  \n  return (\n    <group ref={group} {...props}>\n    <mesh castShadow receiveShadow material={materials['Mat.2']} geometry={nodes.Pared_puerta_Ns.geometry} position={[0.65, 0, 0]}/>\n\n    </group>\n  )\n}\n\nuseGLTF.preload('/SobrePuerta.gltf')\n","import ColumnaGiro from '../components/3d/modules/ColumnaGiro';\r\nimport ColumnaGiroNS from '../components/3d/modules/ColumnaGiroNS';\r\nimport Pared from '../components/3d/modules/Pared';\r\nimport ParedNS from '../components/3d/modules/ParedNS';\r\nimport ParedEsquina from '../components/3d/modules/ParedEsquina';\r\nimport ParedEsquinaNS from '../components/3d/modules/ParedEsquinaNS';\r\nimport Puerta from '../components/3d/modules/Puerta';\r\nimport SobrePuerta from '../components/3d/modules/SobrePuerta';\r\nimport React from 'react';\r\n\r\n/**\r\n * = Piso\r\n * _ Aire\r\n * X Pared\r\n * # Pared Superior\r\n * | Puerta\r\n * @ Puerta Superior\r\n */\r\n\r\nconst ColumnaGiroTiles = \r\n{\r\n    tiles: [\r\n`\\\r\n===\r\n__X\r\n__#`\r\n,`\\\r\n===\r\n___\r\n___`\r\n,`\\\r\n===\r\n___\r\n___`\r\n],\r\n    params: { transforms: [], weight: 2},\r\n    component: (props) => { return (<ColumnaGiro position={props.position} /> )}\r\n}\r\n\r\nconst ColumnaGiroTiles90 = {\r\n  tiles: [\r\n`\\\r\n===\r\nX__\r\n#__`\r\n,`\\\r\n===\r\n___\r\n___`\r\n,`\\\r\n===\r\n___\r\n___`\r\n    ],\r\n    params: { transforms: [], weight: 2},\r\n    component:(props) => { return ( <ColumnaGiro position={props.position} rotation={[0, 0.5 * Math.PI, 0]}/>) }\r\n}\r\n\r\nconst ColumnaGiroTiles180 = {\r\n  tiles: [\r\n`\\\r\n===\r\n___\r\n___`\r\n,`\\\r\n===\r\n___\r\n___`\r\n,`\\\r\n===\r\nX__\r\n#__`\r\n    ],\r\n    params: { transforms: [], weight: 2},\r\n    component:(props) => { return ( <ColumnaGiro position={props.position} rotation={[0, 1 * Math.PI, 0]}/>)}\r\n}\r\n\r\nconst ColumnaGiroTiles270 = {\r\n    tiles: [\r\n`\\\r\n===\r\n___\r\n___`\r\n,`\\\r\n===\r\n___\r\n___`\r\n,`\\\r\n===\r\n__X\r\n__#`\r\n    ],\r\n    params: { transforms: [], weight: 2},\r\n    component: (props) => { return (<ColumnaGiro position={props.position} rotation={[0, 1.5 * Math.PI, 0]}/> )}\r\n}\r\n\r\nconst ColumnaGiroTilesNS = \r\n{\r\n    tiles: [\r\n`\\\r\n__#\r\n__#\r\n__#`\r\n,`\\\r\n___\r\n___\r\n___`\r\n,`\\\r\n___\r\n___\r\n___`\r\n],\r\n    params: { transforms: [], weight: 1},\r\n    component: (props) => { return (<ColumnaGiroNS position={props.position} /> )}\r\n}\r\n\r\nconst ColumnaGiroTilesNS90 = {\r\n  tiles: [\r\n`\\\r\n#__\r\n#__\r\n#__`\r\n,`\\\r\n___\r\n___\r\n___`\r\n,`\\\r\n___\r\n___\r\n___`\r\n    ],\r\n    params: { transforms: [], weight: 1},\r\n    component:(props) => { return ( <ColumnaGiroNS position={props.position} rotation={[0, 0.5 * Math.PI, 0]}/>) }\r\n}\r\n\r\nconst ColumnaGiroTilesNS180 = {\r\n  tiles: [\r\n`\\\r\n___\r\n___\r\n___`\r\n,`\\\r\n___\r\n___\r\n___`\r\n,`\\\r\n#__\r\n#__\r\n#__`\r\n    ],\r\n    params: { transforms: [], weight: 1},\r\n    component:(props) => { return ( <ColumnaGiroNS position={props.position} rotation={[0, 1 * Math.PI, 0]}/>)}\r\n}\r\n\r\nconst ColumnaGiroTilesNS270 = {\r\n    tiles: [\r\n`\\\r\n___\r\n___\r\n___`\r\n,`\\\r\n___\r\n___\r\n___`\r\n,`\\\r\n__#\r\n__#\r\n__#`\r\n    ],\r\n    params: { transforms: [], weight: 1},\r\n    component: (props) => { return (<ColumnaGiroNS position={props.position} rotation={[0, 1.5 * Math.PI, 0]}/> )}\r\n}\r\n\r\n//==============\r\n\r\n\r\nconst ParedTiles = \r\n{\r\n    tiles: [\r\n`\\\r\n===\r\n__X\r\n__#`\r\n,`\\\r\n===\r\n__X\r\n__#`\r\n,`\\\r\n===\r\n__X\r\n__#`\r\n],\r\n    params: { transforms: [], weight: 20},\r\n    component: (props) => { return (<Pared position={props.position} /> )}\r\n}\r\n\r\nconst ParedTiles90 = {\r\n  tiles: [\r\n`\\\r\n===\r\nXXX\r\n###`\r\n,`\\\r\n===\r\n___\r\n___`\r\n,`\\\r\n===\r\n___\r\n___`\r\n    ],\r\n    params: { transforms: [], weight: 20},\r\n    component:(props) => { return ( <Pared position={props.position} rotation={[0, 0.5 * Math.PI, 0]}/>) }\r\n}\r\n\r\nconst ParedTiles180 = {\r\n  tiles: [\r\n`\\\r\n===\r\nX__\r\n#__`\r\n,`\\\r\n===\r\nX__\r\n#__`\r\n,`\\\r\n===\r\nX__\r\n#__`\r\n    ],\r\n    params: { transforms: [], weight: 20},\r\n    component:(props) => { return ( <Pared position={props.position} rotation={[0, 1 * Math.PI, 0]}/>)}\r\n}\r\n\r\nconst ParedTiles270 = {\r\n    tiles: [\r\n`\\\r\n===\r\n___\r\n___`\r\n,`\\\r\n===\r\n___\r\n___`\r\n,`\\\r\n===\r\nXXX\r\n###`\r\n    ],\r\n    params: { transforms: [], weight: 20},\r\n    component: (props) => { return (<Pared position={props.position} rotation={[0, 1.5 * Math.PI, 0]}/> )}\r\n}\r\n\r\nconst ParedTilesNS = \r\n{\r\n    tiles: [\r\n`\\\r\n__#\r\n__#\r\n__#`\r\n,`\\\r\n__#\r\n__#\r\n__#`\r\n,`\\\r\n__#\r\n__#\r\n__#`\r\n],\r\n    params: { transforms: [], weight: 1},\r\n    component: (props) => { return (<ParedNS position={props.position} /> )}\r\n}\r\n\r\nconst ParedTilesNS90 = {\r\n  tiles: [\r\n`\\\r\n###\r\n###\r\n###`\r\n,`\\\r\n___\r\n___\r\n___`\r\n,`\\\r\n___\r\n___\r\n___`\r\n    ],\r\n    params: { transforms: [], weight: 1},\r\n    component:(props) => { return ( <ParedNS position={props.position} rotation={[0, 0.5 * Math.PI, 0]}/>) }\r\n}\r\n\r\nconst ParedTilesNS180 = {\r\n  tiles: [\r\n`\\\r\n#__\r\n#__\r\n#__`\r\n,`\\\r\n#__\r\n#__\r\n#__`\r\n,`\\\r\n#__\r\n#__\r\n#__`\r\n    ],\r\n    params: { transforms: [], weight: 1},\r\n    component:(props) => { return ( <ParedNS position={props.position} rotation={[0, 1 * Math.PI, 0]}/>)}\r\n}\r\n\r\nconst ParedTilesNS270 = {\r\n    tiles: [\r\n`\\\r\n___\r\n___\r\n___`\r\n,`\\\r\n___\r\n___\r\n___`\r\n,`\\\r\n###\r\n###\r\n###`\r\n    ],\r\n    params: { transforms: [], weight: 1},\r\n    component: (props) => { return (<ParedNS position={props.position} rotation={[0, 1.5 * Math.PI, 0]}/> )}\r\n}\r\n\r\nconst PlaceHolder = {\r\n    tiles: [\r\n`\\\r\n===\r\nXXX\r\n###`\r\n,`\\\r\n===\r\nX_X\r\n#_#`\r\n,`\\\r\n===\r\nXXX\r\n###`\r\n    ],\r\n    params: { transforms: [], weight: 1},\r\n    component: (props) => { return (<></>)}\r\n}\r\nconst PlaceHolderNS = {\r\n    tiles: [\r\n`\\\r\n###\r\n###\r\n###`\r\n,`\\\r\n#_#\r\n#_#\r\n#_#`\r\n,`\\\r\n###\r\n###\r\n###`\r\n    ],\r\n    params: { transforms: [], weight: 1},\r\n    component: (props) => { return (<></>)}\r\n}\r\n\r\n\r\n//==============\r\n\r\n\r\nconst ParedEsquinaTiles = \r\n{\r\n    tiles: [\r\n`\\\r\n===\r\nXXX\r\n###`\r\n,`\\\r\n===\r\n__X\r\n__#`\r\n,`\\\r\n===\r\n__X\r\n__#`\r\n],\r\n    params: { transforms: [], weight: 20},\r\n    component: (props) => { return (<ParedEsquina position={props.position} /> )}\r\n}\r\n\r\nconst ParedEsquinaTiles90 = {\r\n  tiles: [\r\n`\\\r\n===\r\nXXX\r\n###`\r\n,`\\\r\n===\r\nX__\r\n#__`\r\n,`\\\r\n===\r\nX__\r\n#__`\r\n    ],\r\n    params: { transforms: [], weight: 20},\r\n    component:(props) => { return ( <ParedEsquina position={props.position} rotation={[0, 0.5 * Math.PI, 0]}/>) }\r\n}\r\n\r\nconst ParedEsquinaTiles180 = {\r\n  tiles: [\r\n`\\\r\n===\r\nX__\r\n#__`\r\n,`\\\r\n===\r\nX__\r\n#__`\r\n,`\\\r\n===\r\nXXX\r\n###`\r\n    ],\r\n    params: { transforms: [], weight: 20},\r\n    component:(props) => { return ( <ParedEsquina position={props.position} rotation={[0, 1 * Math.PI, 0]}/>)}\r\n}\r\n\r\nconst ParedEsquinaTiles270 = {\r\n    tiles: [\r\n`\\\r\n===\r\n__X\r\n__#`\r\n,`\\\r\n===\r\n__X\r\n__#`\r\n,`\\\r\n===\r\nXXX\r\n###`\r\n    ],\r\n    params: { transforms: [], weight: 20},\r\n    component: (props) => { return (<ParedEsquina position={props.position} rotation={[0, 1.5 * Math.PI, 0]}/> )}\r\n}\r\n\r\nconst ParedEsquinaTilesNS = \r\n{\r\n    tiles: [\r\n`\\\r\n###\r\n###\r\n###`\r\n,`\\\r\n__#\r\n__#\r\n__#`\r\n,`\\\r\n__#\r\n__#\r\n__#`\r\n],\r\n    params: { transforms: [], weight: 1},\r\n    component: (props) => { return (<ParedEsquinaNS position={props.position} /> )}\r\n}\r\n\r\nconst ParedEsquinaTilesNS90 = {\r\n  tiles: [\r\n`\\\r\n###\r\n###\r\n###`\r\n,`\\\r\n#__\r\n#__\r\n#__`\r\n,`\\\r\n#__\r\n#__\r\n#__`\r\n    ],\r\n    params: { transforms: [], weight: 1},\r\n    component:(props) => { return ( <ParedEsquinaNS position={props.position} rotation={[0, 0.5 * Math.PI, 0]}/>) }\r\n}\r\n\r\nconst ParedEsquinaTilesNS180 = {\r\n  tiles: [\r\n`\\\r\n#__\r\n#__\r\n#__`\r\n,`\\\r\n#__\r\n#__\r\n#__`\r\n,`\\\r\n###\r\n###\r\n###`\r\n    ],\r\n    params: { transforms: [], weight: 1},\r\n    component:(props) => { return ( <ParedEsquinaNS position={props.position} rotation={[0, 1 * Math.PI, 0]}/>)}\r\n}\r\n\r\nconst ParedEsquinaTilesNS270 = {\r\n    tiles: [\r\n`\\\r\n__#\r\n__#\r\n__#`\r\n,`\\\r\n__#\r\n__#\r\n__#`\r\n,`\\\r\n###\r\n###\r\n###`\r\n    ],\r\n    params: { transforms: [], weight: 1},\r\n    component: (props) => { return (<ParedEsquinaNS position={props.position} rotation={[0, 1.5 * Math.PI, 0]}/> )}\r\n}\r\n\r\n\r\n\r\n//==============\r\n\r\n\r\nconst PuertaTiles = \r\n{\r\n    tiles: [\r\n`\\\r\n===\r\n__X\r\n__#`\r\n,`\\\r\n===\r\n__|\r\n__@`\r\n,`\\\r\n===\r\n__X\r\n__#`\r\n],\r\n    params: { transforms: [], weight: 10},\r\n    component: (props) => { return (<Puerta position={props.position} /> )}\r\n}\r\n\r\nconst PuertaTiles90 = {\r\n  tiles: [\r\n`\\\r\n===\r\nX|X\r\n#@#`\r\n,`\\\r\n===\r\n___\r\n___`\r\n,`\\\r\n===\r\n___\r\n___`\r\n    ],\r\n    params: { transforms: [], weight: 10},\r\n    component:(props) => { return ( <Puerta position={props.position} rotation={[0, 0.5 * Math.PI, 0]}/>) }\r\n}\r\n\r\nconst PuertaTiles180 = {\r\n  tiles: [\r\n`\\\r\n===\r\nX__\r\n#__`\r\n,`\\\r\n===\r\n|__\r\n@__`\r\n,`\\\r\n===\r\nX__\r\n#__`\r\n    ],\r\n    params: { transforms: [], weight: 10},\r\n    component:(props) => { return ( <Puerta position={props.position} rotation={[0, 1 * Math.PI, 0]}/>)}\r\n}\r\n\r\nconst PuertaTiles270 = {\r\n    tiles: [\r\n`\\\r\n===\r\n___\r\n___`\r\n,`\\\r\n===\r\n___\r\n___`\r\n,`\\\r\n===\r\nX|X\r\n#@#`\r\n    ],\r\n    params: { transforms: [], weight: 10},\r\n    component: (props) => { return (<Puerta position={props.position} rotation={[0, 1.5 * Math.PI, 0]}/> )}\r\n}\r\n\r\nconst PuertaTilesNS = \r\n{\r\n    tiles: [\r\n`\\\r\n__#\r\n__#\r\n__#`\r\n,`\\\r\n__@\r\n__@\r\n__@`\r\n,`\\\r\n__#\r\n__#\r\n__#`\r\n],\r\n    params: { transforms: [], weight: 1},\r\n    component: (props) => { return (<SobrePuerta position={props.position} /> )}\r\n}\r\n\r\nconst PuertaTilesNS90 = {\r\n  tiles: [\r\n`\\\r\n#@#\r\n#@#\r\n#@#`\r\n,`\\\r\n___\r\n___\r\n___`\r\n,`\\\r\n___\r\n___\r\n___`\r\n    ],\r\n    params: { transforms: [], weight: 1},\r\n    component:(props) => { return ( <SobrePuerta position={props.position} rotation={[0, 0.5 * Math.PI, 0]}/>) }\r\n}\r\n\r\nconst PuertaTilesNS180 = {\r\n  tiles: [\r\n`\\\r\n#__\r\n#__\r\n#__`\r\n,`\\\r\n@__\r\n@__\r\n@__`\r\n,`\\\r\n#__\r\n#__\r\n#__`\r\n    ],\r\n    params: { transforms: [], weight: 1},\r\n    component:(props) => { return ( <SobrePuerta position={props.position} rotation={[0, 1 * Math.PI, 0]}/>)}\r\n}\r\n\r\nconst PuertaTilesNS270 = {\r\n    tiles: [\r\n`\\\r\n___\r\n___\r\n___`\r\n,`\\\r\n___\r\n___\r\n___`\r\n,`\\\r\n#@#\r\n#@#\r\n#@#`\r\n    ],\r\n    params: { transforms: [], weight: 1},\r\n    component: (props) => { return (<SobrePuerta position={props.position} rotation={[0, 1.5 * Math.PI, 0]}/> )}\r\n}\r\n\r\nconst wavesTiles = [\r\n    PlaceHolder,\r\n    PlaceHolderNS,\r\n    ColumnaGiroTiles,\r\n    ColumnaGiroTiles90,\r\n    ColumnaGiroTiles180,\r\n    ColumnaGiroTiles270,\r\n    ColumnaGiroTilesNS,\r\n    ColumnaGiroTilesNS90,\r\n    ColumnaGiroTilesNS180,\r\n    ColumnaGiroTilesNS270,\r\n    ParedTiles,\r\n    ParedTiles90,\r\n    ParedTiles180,\r\n    ParedTiles270,\r\n    ParedTilesNS,\r\n    ParedTilesNS90,\r\n    ParedTilesNS180,\r\n    ParedTilesNS270,\r\n    ParedEsquinaTiles,\r\n    ParedEsquinaTiles90,\r\n    ParedEsquinaTiles180,\r\n    ParedEsquinaTiles270,\r\n    ParedEsquinaTilesNS,\r\n    ParedEsquinaTilesNS90,\r\n    ParedEsquinaTilesNS180,\r\n    ParedEsquinaTilesNS270,\r\n    PuertaTiles,\r\n    PuertaTiles90,\r\n    PuertaTiles180,\r\n    PuertaTiles270,\r\n    PuertaTilesNS,\r\n    PuertaTilesNS90,\r\n    PuertaTilesNS180,\r\n    PuertaTilesNS270\r\n]\r\n\r\nexport default wavesTiles;\r\n","import React from 'react';\r\nimport { cloneDeep } from 'lodash';\r\nimport WFCTool3D from '../procedural/ndwfc-tools';\r\nimport WFC from '../procedural/ndwfc';\r\nimport { useStore } from '../state/store';\r\n\r\nimport waveTiles from './wavesTiles';\r\n\r\nvar tool = new WFCTool3D();\r\n\r\nwaveTiles.forEach(waveTile => tool.addTile(waveTile.tiles,  waveTile.params))\r\n\r\nvar wave;\r\n\r\nvar wfc;\r\nvar size;\r\nvar increment;\r\nvar multiply;\r\n\r\nlet expansions = 0;\r\n\r\nfunction execute(){\r\n\r\n    while(expansions <= 1) {\r\n        if (!wfc){\r\n        return\r\n        }\r\n        var done = wfc.step();\r\n        if (done){\r\n            wfc.expand([-size, 0,-size],[size, 2, size]);\r\n            size=Math.ceil((size+increment)*multiply);\r\n            expansions++;\r\n        }\r\n        wave = wfc.readout()\r\n    }\r\n    }\r\n    \r\nconst executeOp = function(e) {\r\n    if (e.op == \"init\"){\r\n    wfc = new WFC(e.wfcInput);\r\n    size = e.initialSize;\r\n    increment = e.increment;\r\n    multiply = e.multiply\r\n    execute();\r\n    }\r\n}\r\n\r\nexecuteOp({\r\n    op:'init',\r\n    wfcInput:tool.generateWFCInput(),\r\n    initialSize:10,\r\n    increment:0,\r\n    multiply:1\r\n})\r\n\r\nconst WaveTest = () => {\r\n\r\n    const setWaves = useStore(state => state.setWaves);\r\n    \r\n    React.useEffect(() => {\r\n        setWaves(cloneDeep(wave))\r\n    }, []);\r\n\r\n    return (<></>);\r\n};\r\n\r\nexport default WaveTest;\r\n","import React from 'react';\r\nimport { useStore } from '../../../state/store';\r\nimport ColumnaGiro from './ColumnaGiro';\r\nimport waveTiles from '../../wavesTiles';\r\n\r\nconst Module = (props) => {\r\n    return waveTiles[props.index].component(props)\r\n};\r\n\r\nexport default Module;\r\n","import React from 'react';\r\nimport { useStore } from '../state/store';\r\nimport Module from './3d/modules/Module';\r\n\r\nconst keyToPosition = key => {\r\n    const k = key.split(\",\").map(position => parseInt(position))\r\n    return [k[2] * 2, k[1] * 1.6, k[0] * 2]\r\n}\r\n\r\nconst WaveModules = () => {\r\n    const waves = useStore(state => state.waves);\r\n    \r\n    return (\r\n        <group>\r\n            {Object.keys(waves).map(waveKey => <Module position={keyToPosition(waveKey)} index={parseInt(waves[waveKey])}/>)}\r\n        </group>\r\n    );\r\n};\r\n\r\nexport default WaveModules;\r\n","import React, { useRef } from 'react';\r\nimport AmbientLightProvider from './providers/AmbientLightProvider';\r\nimport SpotLightsProvider from './providers/SpotLightsProvider';\r\nimport PlanesProvider from './providers/PlanesProvider';\r\nimport Sequencer from './Sequencer';\r\nimport Effects from './Effects';\r\nimport { OrbitControls } from '@react-three/drei';\r\nimport SkyBox from './3d/models/SkyBox';\r\nimport WavesGenerator from './WavesGenerator';\r\nimport WaveModules from './WaveModules';\r\nimport { useThree } from 'react-three-fiber';\r\nimport { sRGBEncoding } from 'three';\r\n\r\n/**\r\n * = Piso\r\n * | Columna\r\n * @ Columna Superior\r\n * X pared\r\n * # Pared Superior\r\n * _ Aire\r\n */\r\n\r\n//<Effects/>\r\n//<WaveModules/>\r\nconst Scene = (props) => {\r\n  const orbitRef = useRef();\r\n  const { gl } = useThree();\r\n  React.useEffect(() => {\r\n    gl.shadowMap.renderSingleSided = false\r\n    gl.outputEncoding = sRGBEncoding\r\n    gl.gammaOutput = true;\r\n    gl.gammaFactor = 2.2;\r\n    orbitRef.current.enableKeys = true;\r\n  }, [])\r\n\r\n  return (\r\n    <>\r\n    <OrbitControls ref={orbitRef} enableKeys/>\r\n    <SkyBox/>\r\n    <SpotLightsProvider/>\r\n    <AmbientLightProvider/>\r\n    <PlanesProvider/>\r\n    <Sequencer soundsApi={props.soundsApi}/>\r\n    <WavesGenerator/>\r\n    <Effects/>\r\n    <WaveModules/>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Scene;\r\n","import React from 'react';\r\nimport { Canvas } from 'react-three-fiber';\r\n\r\nimport Scene from './Scene';\r\nimport { useSoundsApi } from './Sound';\r\nimport Effects from './Effects';\r\nconst FullSizeCanvas = (props) => {\r\n    return (\r\n        <Canvas {...props} style={{height: \"100vh\", width: \"100%\"}} invalidateFrameloop shadowMap/>\r\n    );\r\n}\r\n\r\nconst Frame = () => {\r\n\r\n    const soundsApi = useSoundsApi();\r\n\r\n    return (\r\n        <FullSizeCanvas\r\n            concurrent\r\n            gl={{ antialias: false }}\r\n        >\r\n            <Scene soundsApi={soundsApi}/>\r\n        </FullSizeCanvas>\r\n    );\r\n\r\n}\r\n\r\nexport default Frame;","export const fontColor = 'hsla(0, 80%, 80%, 1)';\r\n\r\nexport const backgroundColor = `hsla(0, 80%, 10%, 1);`;\r\n\r\nexport const backgroundActive = `hsla(0, 80%, 20%, 1);`;\r\n","import styled from 'styled-components';\r\nimport {fontColor} from '../../style/color';\r\n\r\nconst Title = styled.h1`\r\n    ${props => props.noMarginTop ? \"\" : \"margin-top: 15vh;\"}\r\n    font-size: ${props => props.mobileHorizontal === true ? \"3.5em\" : \"5em\"};\r\n    color: ${fontColor};\r\n`;\r\n\r\nexport default Title;\r\n","import styled from 'styled-components';\r\nimport {fontColor} from '../../style/color';\r\n\r\nconst SubTitle = styled.h1`\r\n    margin-top: 5vh;\r\n    font-size: ${props => props.mobileHorizontal === true ? \"2.5rem\" : \"3em\"};\r\n    color: ${fontColor};\r\n`;\r\n\r\nexport default SubTitle;\r\n\r\n","import styled from 'styled-components';\r\nimport {fontColor} from '../../style/color';\r\n\r\nconst Credits = styled.h1`\r\n    margin-top: 5vh;\r\n    font-size: ${props => props.mobileHorizontal === true ?  \"1rem\" : \"1.5em\"};\r\n    color: ${fontColor};\r\n`;\r\n\r\nexport default Credits;\r\n","import React from 'react';\r\n\r\nfunction useMobilePress(props) {\r\n\r\n    const [active, isActive] = React.useState(false);\r\n    const [moved, isMoved] = React.useState(false);\r\n    \r\n    return {\r\n        onClick: (e) => {\r\n            if(props.onClick !== undefined) props.onClick(e);\r\n        },\r\n        active: active && !moved,\r\n        onTouchStart: (e) => {\r\n            e.preventDefault();\r\n            setTimeout(() => {\r\n                if(!moved)isActive(true)\r\n            }, 100);\r\n            if(props.onTouchStart !== undefined) props.onTouchStart();\r\n        },\r\n        onTouchEnd: (e) => {\r\n            e.preventDefault();\r\n            e.persist();\r\n            if(!moved)props.onClick(e);\r\n            isMoved(false);\r\n            isActive(false);\r\n            setTimeout(() => isActive(false), 100);\r\n            if(props.onTouchEnd !== undefined) props.onTouchEnd(e);   \r\n        },\r\n        onTouchMove: (e) => {\r\n            e.preventDefault();\r\n            isMoved(true);\r\n            isActive(false);\r\n            setTimeout(() => isActive(false), 100);\r\n            if(props.onTouchMove !== undefined) props.onTouchMove(e);\r\n        },\r\n        onTouchCancel: (e) => {\r\n            e.preventDefault();\r\n            isActive(false);\r\n            isMoved(false);\r\n            setTimeout(() => isActive(false), 100);\r\n            if(props.onTouchCancel !== undefined) props.onTouchCancel(e);\r\n        },\r\n        onMouseDown: (e) => {\r\n            if(props.onMouseDown !== undefined) props.onMouseDown(e);\r\n            isActive(true);\r\n        },\r\n        onMouseUp: (e) => {\r\n            if(props.onMouseUp !== undefined) props.onMouseUp(e);\r\n            isActive(false);\r\n        },\r\n        onMouseLeave: (e) => {\r\n            if(props.onMouseUp !== undefined) props.onMouseUp(e);\r\n            isActive(false);\r\n        }\r\n    };\r\n  };\r\n\r\n  export default useMobilePress;\r\n","import { fontColor, backgroundColor, backgroundActive } from '../../style/color.js';\r\nimport styled from 'styled-components';\r\nimport useMobilePress from '../../hooks/useMobilePress';\r\nimport React from \"react\";\r\n\r\nconst paddingMinusBorder = (base, borderWidth) => base - borderWidth;\r\n    \r\nconst padding = (baseX, baseY) => {\r\n    return `${paddingMinusBorder(baseX, 0.1)}rem ${paddingMinusBorder(baseY, 0.1)}rem`;\r\n};\r\n\r\nexport const hoverTransform = `transform:scale(1.05, 1.05)`;\r\n\r\nconst hover = (props) => !props.active ? `\r\n    @media (hover: hover) and (pointer: fine) {\r\n      &:hover {\r\n        ${hoverTransform}\r\n      }\r\n    }\r\n  ` : \"\";\r\n\r\nconst StyledButtonWithoutMobileSupport = styled.button`\r\n    border-radius: 50%;\r\n    padding: ${padding(0.4, 0.5)};\r\n    border: 0.1vmax solid ${fontColor};\r\n    box-sizing: border-box;\r\n    &:focus {\r\n        outline:none !important;\r\n    };\r\n    -webkit-user-select: none; /* Safari */        \r\n    -moz-user-select: none; /* Firefox */\r\n    -ms-user-select: none; /* IE10+/Edge */\r\n    user-select: none; /* Standard */\r\n    position: relative;\r\n    color: ${fontColor};\r\n    ${props => hover(props)}\r\n    ${props => props.active ? \"transform:scale(0.95, 0.95);\" : \"\"}\r\n    background: ${props => props.active ? backgroundActive : backgroundColor};\r\n    transition: ${props => `background ${props.active ? 0 : 0.25}s linear;`};\r\n    ${props => props.absolute ? `position: absolute;` : \"\"};\r\n    ${props => props.top ? `top: ${props.top}%;` : \"\"}\r\n    ${props => props.right ? `right: ${props.right}%;` : \"\"}\r\n    ${props => props.floating ? `z-index: 5000;` : \"\"};\r\n`;\r\n\r\nconst StyledButton = (props) => {\r\n\r\n  const press = useMobilePress(props);\r\n  \r\n  return <StyledButtonWithoutMobileSupport {...props} {...press}/>;\r\n};\r\n\r\nexport default StyledButton;\r\n","const vw = Math.max(document.documentElement.clientWidth || 0, window.innerWidth || 0)\r\n\r\nconst vh = Math.max(document.documentElement.clientHeight || 0, window.innerHeight || 0)\r\n\r\nconst isVertical = vh > vw;\r\n\r\nexport default isVertical;\r\n","import React from 'react';\r\nimport styled from 'styled-components';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport {fontColor} from '../../../style/color';\r\nimport Title from '../../text/Title';\r\nimport SubTitle from '../../text/SubTitle';\r\nimport Credits from '../../text/Credits';\r\nimport PlayArrowIcon from '@material-ui/icons/PlayArrow';\r\nimport StyledButton from '../../buttons/StyledButton';\r\nimport KeyboardArrowDownIcon from '@material-ui/icons/KeyboardArrowDown';\r\nimport isVertical from '../../../utils/isVertical';\r\nimport { isMobile, isTablet } from 'react-device-detect';\r\n\r\nconst mobileHorizontal = !isVertical && isMobile && !isTablet;\r\n\r\nconst Description = () => {\r\n    return (\r\n        <Grid item xs={12}>\r\n            <Title mobileHorizontal={mobileHorizontal}>Experimento</Title>\r\n            <SubTitle mobileHorizontal={mobileHorizontal}>Espacios Generativos</SubTitle>\r\n            <Credits mobileHorizontal={mobileHorizontal}>Manuel Strajman</Credits>\r\n            <Credits mobileHorizontal={mobileHorizontal}>Esteban Sagman</Credits>\r\n            <Credits mobileHorizontal={mobileHorizontal}>Leonel Sagman</Credits>\r\n            <Credits mobileHorizontal={mobileHorizontal}>Agustin Cotroneo</Credits>\r\n        </Grid>\r\n    );\r\n};\r\n\r\nconst PlayButton = (props) => {\r\n    return (\r\n        <StyledButton onClick={props.play}>\r\n            {props.started ?\r\n                <KeyboardArrowDownIcon\r\n                    fontSize=\"large\"\r\n                    style={{color: fontColor}}\r\n                />\r\n                    :\r\n                <PlayArrowIcon\r\n                    fontSize=\"large\"\r\n                    style={{color: fontColor}}\r\n                />\r\n            }\r\n        </StyledButton>\r\n    );\r\n};\r\n\r\nconst InitialPage = (props) => {\r\n    return (\r\n        <Grid container justify={\"center\"} align={\"center\"} spacing={mobileHorizontal ? 3 : 10}>\r\n            <Description/>\r\n            <Grid item xs={10}>\r\n                <PlayButton play={props.start} started={props.started}/>\r\n            </Grid>\r\n        </Grid>\r\n    );\r\n};\r\n\r\nexport default InitialPage;\r\n","import { createGlobalStyle } from \"styled-components\";\r\nimport {fontColor, backgroundColor, backgroundActive} from './color';\r\n\r\nconst GlobalStyle = createGlobalStyle`\r\n    background-color: ${backgroundColor};\r\n\r\n    ::-webkit-scrollbar {\r\n    width: 0.6rem;\r\n    }\r\n    \r\n    ::-webkit-scrollbar-track {\r\n    background-color: ${backgroundColor};\r\n    border-left: 0.05rem solid ${fontColor};\r\n    border-right: 0.05rem solid ${fontColor};\r\n    }\r\n\r\n    ::-webkit-scrollbar-thumb {\r\n    background-color: ${fontColor};\r\n    }\r\n\r\n`;\r\n\r\nexport default GlobalStyle;\r\n","import React from 'react';\nimport Frame from './components/Frame';\nimport { Sound } from './components/Sound';\nimport InitialPage from './components/layout/pages/InitialPage';\nimport GlobalStyle from './style/GlobalStyle';\n\nfunction App() {\n\n  const [started, setStarted] = React.useState(false);\n  return (\n    <div className=\"App\">\n      <GlobalStyle/>\n      <Sound>\n        {\n          started ? <Frame/> : <InitialPage started={started} start={() => setStarted(true)}/>\n        }\n      </Sound>\n    </div>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","var WFC = function({nd,weights,rules,wave}){\r\n  wave = wave || {};\r\n  var wavefront = {}\r\n  var n_patterns = weights.length\r\n  var wavefront = {}\r\n  \r\n  function coord(k){\r\n    return k.split(\",\").map(x=>parseInt(x))\r\n  }\r\n  \r\n  function entropy(x){\r\n    var one = 0\r\n    for (var i = 0; i < x.length; i++){\r\n      one += x[i]*weights[i]\r\n    }\r\n    var S = 0\r\n    for (var i = 0; i < x.length; i++){\r\n      var pi = x[i]*weights[i]/one\r\n      if (pi != 0){\r\n        S -= pi*Math.log(pi)\r\n      }\r\n    }\r\n    return S\r\n  }\r\n\r\n  function collapse(x){\r\n    var one = 0\r\n    for (var i = 0; i < x.length; i++){\r\n      one += x[i]*weights[i]\r\n    }\r\n    var r = Math.random()*one\r\n    for (var i = 0; i < x.length; i++){\r\n      r -= x[i]*weights[i]\r\n      if (r < 0){\r\n        var y = new Array(x.length).fill(0)\r\n        y[i] = 1\r\n        return y\r\n      }\r\n    }\r\n  }\r\n\r\n  function neighborable(d,a,b){\r\n    var didx = d.indexOf(1)\r\n    if (didx < 0){\r\n      didx = d.indexOf(-1)\r\n      ;[a,b] = [b,a]\r\n    }\r\n    for (var i = 0; i < rules.length; i++){\r\n      if (didx == rules[i][0] || \"yxz\"[didx] == rules[i][0]){\r\n        if (a == rules[i][1] && b == rules[i][2]){\r\n          return true\r\n        }\r\n      }\r\n    }\r\n    return false\r\n  }\r\n\r\n  function propagate(p){\r\n    var stack = [p]\r\n\r\n    while (stack.length){\r\n      p = stack.pop()\r\n\r\n      var dirs = []\r\n      for (var i = 0; i < nd; i++){\r\n        var d0 = new Array(nd).fill(0)\r\n        d0[i] = -1\r\n        dirs.push(d0)\r\n      \r\n        var d1 = new Array(nd).fill(0)\r\n        d1[i] = 1\r\n        dirs.push(d1)\r\n      }      \r\n      for (var i = 0; i < dirs.length; i++){\r\n        var q = []\r\n        for (var j = 0; j < p.length; j++){\r\n          q.push(p[j]+dirs[i][j])\r\n        }\r\n        var x = wavefront[p]; if (x == undefined) {x = wave[p]}\r\n        var y = wavefront[q]; if (x == undefined) {x = wave[q]}\r\n      \r\n        if (typeof y == 'number' || typeof y == 'undefined'){\r\n          continue\r\n\r\n        }else if (typeof x == 'number' && typeof y == 'object'){\r\n\r\n          var mod = false\r\n          for (var j = 0; j < y.length; j++){\r\n            if (y[j] == 0){\r\n              continue\r\n            }\r\n            if (y[j] > 0 && !neighborable(dirs[i],x,j)){\r\n              y[j] = 0\r\n              mod = true\r\n            }\r\n          }\r\n          if (mod){\r\n            stack.push(q);\r\n          }\r\n\r\n        }else if (typeof x == 'object' && typeof y == 'object'){\r\n          var mod = false\r\n          for (var j = 0; j < y.length; j++){\r\n            if (y[j] == 0){\r\n              continue    \r\n            }\r\n            var ok = false\r\n            for (var k = 0; k < x.length; k++){\r\n              if (x[k] > 0 && y[j] > 0 && neighborable(dirs[i],k,j)){\r\n                ok = true\r\n                break\r\n              }\r\n            }\r\n            if (!ok){\r\n              y[j] = 0\r\n              mod = true\r\n            }\r\n          }\r\n          if (mod){\r\n            stack.push(q)\r\n          }\r\n\r\n        }else{\r\n          throw Error(\"Invalid propagation parameter\",x,y);\r\n        }\r\n        \r\n      }\r\n    }\r\n  }\r\n\r\n  function argmax(vals){\r\n    var mi = -1;\r\n    var mv = -Infinity;\r\n    for (var i = 0; i < vals.length; i++){\r\n      if (vals[i] > mv){\r\n        mv = vals[i]\r\n        mi = i\r\n      }\r\n    }\r\n    return mi\r\n  }\r\n  \r\n  this.readout = function(collapse=true){\r\n    if (!collapse){\r\n      var result = {}\r\n      for (var k in wave){\r\n        var oh = Array(n_patterns).fill(0);\r\n        oh[wave[k]] = 1;\r\n        result[k] = oh;\r\n      }\r\n      for (var k in wavefront){\r\n        var s = wavefront[k].reduce((a,b) => a + b, 0)\r\n        var oh = wavefront[k].map(x=>(s==0?0:x/s));\r\n        result[k] = oh;\r\n      }\r\n      return result;\r\n    }\r\n    \r\n    var result = {}\r\n    for (var k in wavefront){\r\n      if (wavefront[k].reduce((a,b) => a + b, 0) == 1){\r\n        result[k] = argmax(wavefront[k])\r\n      }\r\n    }\r\n    return Object.assign({},wave,result)\r\n  }\r\n  \r\n  \r\n  this.expand = function(xmin, xmax){\r\n    var coords = [[0]]\r\n    for (var i = 0; i < xmin.length; i++){\r\n      var cc = []\r\n      for (var x = xmin[i]; x < xmax[i]; x++){\r\n        var c = []\r\n        for (var j = 0; j < coords.length; j++){\r\n          c.push(coords[j].concat(x))\r\n        }\r\n        cc = cc.concat(c)\r\n      }\r\n      coords = cc;\r\n    }\r\n    coords = coords.map(x=>x.slice(1)).filter(x=>!(x in wave || x in wavefront))\r\n\r\n    coords.map(x=>wavefront[x]=new Array(n_patterns).fill(1))\r\n    for (var k in wave){\r\n      propagate(coord(k))\r\n    }\r\n  }\r\n  \r\n  this.step = function(){\r\n    var min_ent = Infinity\r\n    var min_arg = undefined\r\n\r\n    for (var k in wavefront){\r\n      var ent = entropy(wavefront[k])\r\n      if (isNaN(ent)){\r\n        for (var k in wavefront){\r\n          wavefront[k]=new Array(n_patterns).fill(1)\r\n        }\r\n        for (var k in wave){\r\n          propagate(coord(k))\r\n        }\r\n        console.log(\":(\")\r\n        return false\r\n      }\r\n      if (ent == 0){\r\n        continue;\r\n      }\r\n      ent += (Math.random()-0.5)\r\n      if (ent < min_ent){\r\n        min_ent = ent\r\n        min_arg = coord(k)\r\n      }\r\n    }\r\n\r\n    if (min_ent == Infinity){\r\n      wave = this.readout();\r\n      wavefront = {};\r\n      return true;\r\n    }\r\n    wavefront[min_arg] = collapse(wavefront[min_arg]);\r\n    propagate(min_arg);\r\n    return false;\r\n  } \r\n}\r\n\r\nif (typeof module === \"object\"){\r\n  module.exports = WFC;\r\n}\r\n"],"sourceRoot":""}