{"version":3,"sources":["procedural/ndwfc.js","state/reducers/ambientLightReducer.js","state/actionTypes.js","state/reducers/spotLightsReducer.js","state/reducers/planesReducer.js","state/reducers/cameraReducer.js","state/reducers/outlineReducer.js","state/reducers/shapesAnimationsReducer.js","state/reducers/storeReducer.js","state/store.js","components/providers/AmbientLightProvider.jsx","components/3d/light/SpotLight.jsx","components/providers/SpotLightsProvider.jsx","components/3d/geometry/Plane.jsx","components/3d/material/color.js","components/providers/PlanesProvider.jsx","services/EventPolyphonyService.js","services/SequenceReaderService.js","components/Sound.jsx","services/EventDispatcherService.js","components/Sequencer.jsx","components/Effects.jsx","components/3d/models/SkyBox.jsx","procedural/ndwfc-tools.js","components/3d/modules/ColumnaGiro.js","components/3d/modules/ColumnaGiroNS.js","components/3d/modules/Pared.js","components/3d/modules/ParedNS.js","components/3d/modules/ParedEsquina.js","components/3d/modules/ParedEsquinaNS.js","components/3d/modules/Puerta.js","components/3d/modules/SobrePuerta.js","components/wavesTiles.js","components/WavesGenerator.jsx","components/3d/modules/Module.jsx","components/WaveModules.jsx","components/Scene.jsx","components/Frame.jsx","style/color.js","components/text/Title.jsx","components/text/SubTitle.jsx","components/text/Credits.jsx","hooks/useMobilePress.js","components/buttons/StyledButton.jsx","utils/isVertical.js","components/layout/pages/InitialPage.jsx","style/GlobalStyle.jsx","App.js","serviceWorker.js","index.js"],"names":["module","exports","nd","weights","rules","wave","wavefront","n_patterns","length","coord","k","split","map","x","parseInt","entropy","one","i","S","pi","Math","log","neighborable","d","a","b","didx","indexOf","propagate","p","stack","pop","dirs","d0","Array","fill","push","d1","q","j","undefined","y","mod","Error","ok","argmax","vals","mi","mv","Infinity","this","readout","collapse","result","oh","s","reduce","Object","assign","expand","xmin","xmax","coords","cc","c","concat","slice","filter","step","min_ent","min_arg","ent","isNaN","console","random","r","ambientLightReducer","state","action","type","props","spotLightsReducer","key","spotLight","planesReducer","plane","cameraReducer","startTime","outlineReducer","mesh","omit","delta","max","getShapes","oldShapes","firstIndex","lastIndex","newProps","particlePositions","isParticle","initialPosition","finalPosition","width","height","depth","oldProps","index","latestIndex","betweenRange","shapesAnimationsReducer","actionType","amount","lastFree","size","animationSize","getFirstIndex","getLastIndex","getNextFree","shapes","updateAnimations","stateReducer","camera","ambientLight","spotLights","planes","outline","ringsAnimations","dodecahedronsAnimations","lathesAnimations","spheresAnimations","tetrahedronsAnimations","animation","initialState","position","intensity","waves","create","set","dispatch","storeReducer","setWaves","useStore","storeApi","AmbientLightProvider","SpotLight","lightTarget","Mesh","spotLightRef","React","useRef","useEffect","current","shadowDarkness","useFrame","clock","update","object","target","ref","shadow-bias","shadow-mapSize-width","shadow-mapSize-height","castShadow","SpotLightsProvider","Plane","THREE","setHSL","multiplyScalar","scale","rotation","n","PI","args","color","receiveShadow","opacity","PlanesProvider","applyGrid","fn","keys","flatMap","z","positionGridPosition","separation","getTime","time","delay","applyInterpolationGrid","event","polyphony","sprites","applyPoliphony","applyPositionGrid","JSON","stringify","EventPolyphonyService","apply","events","getStartTime","json","useSpriteProps","includes","sprite","getEvents","eventsJson","spritesJson","PolyphonyService","eventPlusSprite","eventWithoutProps","eventWithoutPropsOrSprites","getEventPlusSprite","element","SequenceReaderService","getInitialCamera","initialCamera","getLoops","SoundContext","createContext","sounds","eventTypes","ADD_SOUND","PLAY_SOUND","STOP_SOUND","REMOVE_SOUND","LOOP_SOUND","soundFns","add","file","Howl","src","loop","play","stop","remove","unload","soundApi","execute","Sound","Provider","value","children","isSoundEvent","values","SoundEventTypes","EventDispatcherService","soundsApi","setTimeout","elapsedTime","sceneService","SequenceService","Sequencer","useThree","Effects","outlineRef","OverrideMaterialManager","workaroundEnabled","selection","getState","fallback","luminanceThreshold","luminanceSmoothing","eskil","offset","darkness","brightness","contrast","cubeRenderTarget","WebGLCubeRenderTarget","format","RGBFormat","generateMipmaps","minFilter","LinearMipmapLinearFilter","CubeCamera","WFCTool3D","tiles","materials","n_prototypes","formulae","transformBank","ry","m","parse","rx","rz","fz","fx","fy","equal","fit","addTile","transforms","weight","t","tests","tl","tt","addMaterial","symbol","material","getTileFormulae","generateWFCInput","plotWFCOutput","root","wz","wx","wy","geometry","K","cube","Model","group","useGLTF","nodes","Columna_esquina","url","distance","preload","Columna_Ns","Pared","Pared_Ns","Pared_esquina","Paredesquina_Ns","Puerta","Pared_puerta_Ns","wfc","increment","multiply","wavesTiles","params","component","tool","waveTiles","forEach","waveTile","expansions","e","op","wfcInput","initialSize","WFC","ceil","WaveTest","cloneDeep","Module","keyToPosition","WaveModules","waveKey","Scene","orbitRef","gl","shadowMap","renderSingleSided","outputEncoding","sRGBEncoding","gammaOutput","gammaFactor","enableKeys","Suspense","background","files","path","WavesGenerator","FullSizeCanvas","style","invalidateFrameloop","Frame","useContext","concurrent","antialias","fontColor","Title","styled","h1","noMarginTop","mobileHorizontal","SubTitle","Credits","useMobilePress","useState","active","isActive","moved","isMoved","onClick","onTouchStart","preventDefault","onTouchEnd","persist","onTouchMove","onTouchCancel","onMouseDown","onMouseUp","onMouseLeave","baseY","paddingMinusBorder","base","borderWidth","StyledButtonWithoutMobileSupport","button","hover","absolute","top","right","floating","StyledButton","press","vw","document","documentElement","clientWidth","window","innerWidth","isVertical","clientHeight","innerHeight","isMobile","isTablet","Description","Grid","item","xs","PlayButton","started","fontSize","InitialPage","container","justify","align","spacing","start","GlobalStyle","createGlobalStyle","App","setStarted","className","Boolean","location","hostname","match","ReactDOM","render","StrictMode","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","error","message"],"mappings":"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","file":"static/js/main.9e65631a.chunk.js","sourcesContent":["var WFC = function({nd,weights,rules,wave}){\r\n  wave = wave || {};\r\n  var wavefront = {}\r\n  var n_patterns = weights.length\r\n  var wavefront = {}\r\n  \r\n  function coord(k){\r\n    return k.split(\",\").map(x=>parseInt(x))\r\n  }\r\n  \r\n  function entropy(x){\r\n    var one = 0\r\n    for (var i = 0; i < x.length; i++){\r\n      one += x[i]*weights[i]\r\n    }\r\n    var S = 0\r\n    for (var i = 0; i < x.length; i++){\r\n      var pi = x[i]*weights[i]/one\r\n      if (pi != 0){\r\n        S -= pi*Math.log(pi)\r\n      }\r\n    }\r\n    return S\r\n  }\r\n\r\n  function collapse(x){\r\n    var one = 0\r\n    for (var i = 0; i < x.length; i++){\r\n      one += x[i]*weights[i]\r\n    }\r\n    var r = Math.random()*one\r\n    for (var i = 0; i < x.length; i++){\r\n      r -= x[i]*weights[i]\r\n      if (r < 0){\r\n        var y = new Array(x.length).fill(0)\r\n        y[i] = 1\r\n        return y\r\n      }\r\n    }\r\n  }\r\n\r\n  function neighborable(d,a,b){\r\n    var didx = d.indexOf(1)\r\n    if (didx < 0){\r\n      didx = d.indexOf(-1)\r\n      ;[a,b] = [b,a]\r\n    }\r\n    for (var i = 0; i < rules.length; i++){\r\n      if (didx == rules[i][0] || \"yxz\"[didx] == rules[i][0]){\r\n        if (a == rules[i][1] && b == rules[i][2]){\r\n          return true\r\n        }\r\n      }\r\n    }\r\n    return false\r\n  }\r\n\r\n  function propagate(p){\r\n    var stack = [p]\r\n\r\n    while (stack.length){\r\n      p = stack.pop()\r\n\r\n      var dirs = []\r\n      for (var i = 0; i < nd; i++){\r\n        var d0 = new Array(nd).fill(0)\r\n        d0[i] = -1\r\n        dirs.push(d0)\r\n      \r\n        var d1 = new Array(nd).fill(0)\r\n        d1[i] = 1\r\n        dirs.push(d1)\r\n      }      \r\n      for (var i = 0; i < dirs.length; i++){\r\n        var q = []\r\n        for (var j = 0; j < p.length; j++){\r\n          q.push(p[j]+dirs[i][j])\r\n        }\r\n        var x = wavefront[p]; if (x == undefined) {x = wave[p]}\r\n        var y = wavefront[q]; if (x == undefined) {x = wave[q]}\r\n      \r\n        if (typeof y == 'number' || typeof y == 'undefined'){\r\n          continue\r\n\r\n        }else if (typeof x == 'number' && typeof y == 'object'){\r\n\r\n          var mod = false\r\n          for (var j = 0; j < y.length; j++){\r\n            if (y[j] == 0){\r\n              continue\r\n            }\r\n            if (y[j] > 0 && !neighborable(dirs[i],x,j)){\r\n              y[j] = 0\r\n              mod = true\r\n            }\r\n          }\r\n          if (mod){\r\n            stack.push(q);\r\n          }\r\n\r\n        }else if (typeof x == 'object' && typeof y == 'object'){\r\n          var mod = false\r\n          for (var j = 0; j < y.length; j++){\r\n            if (y[j] == 0){\r\n              continue    \r\n            }\r\n            var ok = false\r\n            for (var k = 0; k < x.length; k++){\r\n              if (x[k] > 0 && y[j] > 0 && neighborable(dirs[i],k,j)){\r\n                ok = true\r\n                break\r\n              }\r\n            }\r\n            if (!ok){\r\n              y[j] = 0\r\n              mod = true\r\n            }\r\n          }\r\n          if (mod){\r\n            stack.push(q)\r\n          }\r\n\r\n        }else{\r\n          throw Error(\"Invalid propagation parameter\",x,y);\r\n        }\r\n        \r\n      }\r\n    }\r\n  }\r\n\r\n  function argmax(vals){\r\n    var mi = -1;\r\n    var mv = -Infinity;\r\n    for (var i = 0; i < vals.length; i++){\r\n      if (vals[i] > mv){\r\n        mv = vals[i]\r\n        mi = i\r\n      }\r\n    }\r\n    return mi\r\n  }\r\n  \r\n  this.readout = function(collapse=true){\r\n    if (!collapse){\r\n      var result = {}\r\n      for (var k in wave){\r\n        var oh = Array(n_patterns).fill(0);\r\n        oh[wave[k]] = 1;\r\n        result[k] = oh;\r\n      }\r\n      for (var k in wavefront){\r\n        var s = wavefront[k].reduce((a,b) => a + b, 0)\r\n        var oh = wavefront[k].map(x=>(s==0?0:x/s));\r\n        result[k] = oh;\r\n      }\r\n      return result;\r\n    }\r\n    \r\n    var result = {}\r\n    for (var k in wavefront){\r\n      if (wavefront[k].reduce((a,b) => a + b, 0) == 1){\r\n        result[k] = argmax(wavefront[k])\r\n      }\r\n    }\r\n    return Object.assign({},wave,result)\r\n  }\r\n  \r\n  \r\n  this.expand = function(xmin, xmax){\r\n    var coords = [[0]]\r\n    for (var i = 0; i < xmin.length; i++){\r\n      var cc = []\r\n      for (var x = xmin[i]; x < xmax[i]; x++){\r\n        var c = []\r\n        for (var j = 0; j < coords.length; j++){\r\n          c.push(coords[j].concat(x))\r\n        }\r\n        cc = cc.concat(c)\r\n      }\r\n      coords = cc;\r\n    }\r\n    coords = coords.map(x=>x.slice(1)).filter(x=>!(x in wave || x in wavefront))\r\n\r\n    coords.map(x=>wavefront[x]=new Array(n_patterns).fill(1))\r\n    for (var k in wave){\r\n      propagate(coord(k))\r\n    }\r\n  }\r\n  \r\n  this.step = function(){\r\n    var min_ent = Infinity\r\n    var min_arg = undefined\r\n\r\n    for (var k in wavefront){\r\n      var ent = entropy(wavefront[k])\r\n      if (isNaN(ent)){\r\n        for (var k in wavefront){\r\n          wavefront[k]=new Array(n_patterns).fill(1)\r\n        }\r\n        for (var k in wave){\r\n          propagate(coord(k))\r\n        }\r\n        console.log(\":(\")\r\n        return false\r\n      }\r\n      if (ent == 0){\r\n        continue;\r\n      }\r\n      ent += (Math.random()-0.5)\r\n      if (ent < min_ent){\r\n        min_ent = ent\r\n        min_arg = coord(k)\r\n      }\r\n    }\r\n\r\n    if (min_ent == Infinity){\r\n      wave = this.readout();\r\n      wavefront = {};\r\n      return true;\r\n    }\r\n    wavefront[min_arg] = collapse(wavefront[min_arg]);\r\n    propagate(min_arg);\r\n    return false;\r\n  } \r\n}\r\n\r\nif (typeof module === \"object\"){\r\n  module.exports = WFC;\r\n}\r\n","import * as types from '../actionTypes';\r\n\r\nconst ambientLightReducer = (state, action) => {\r\n    switch(action.type) {\r\n        case types.SET_AMBIENT_LIGHT:\r\n            return {\r\n                ...action.props\r\n            }\r\n        default:\r\n            return state\r\n    }\r\n};\r\n\r\nexport default ambientLightReducer;\r\n","// Camera\r\n\r\nexport const SET_CAMERA = \"SET_CAMERA\";\r\n\r\nexport const MOVE_CAMERA = \"MOVE_CAMERA\";\r\n\r\n// Shapes\r\n\r\nexport const PLAY_BASIC_SHAPE = \"PLAY_BASIC_SHAPE\";\r\n\r\nexport const CLEAN_BASIC_SHAPE = \"CLEAN_BASIC_SHAPE\";\r\n\r\n// Ambient Light\r\n\r\nexport const SET_AMBIENT_LIGHT = \"SET_AMBIENT_LIGHT\";\r\n\r\nexport const UPDATE_AMBIENT_LIGHT = \"UPDATE_AMBIENT_LIGHT\";\r\n\r\nexport const REMOVE_AMBIENT_LIGHT = \"REMOVE_AMBIENT_LIGHT\";\r\n\r\n// SpotLight\r\n\r\nexport const SET_SPOT_LIGHT = \"SET_SPOT_LIGHT\";\r\n\r\nexport const UPDATE_SPOT_LIGHT = \"UPDATE_SPOT_LIGHT\";\r\n\r\nexport const REMOVE_SPOT_LIGHT = \"REMOVE_SPOT_LIGHT\";\r\n\r\n// Planes\r\n\r\nexport const SET_PLANE = \"SET_PLANE\";\r\n\r\nexport const UPDATE_PLANE = \"UPDATE_PLANE\";\r\n\r\nexport const REMOVE_PLANE = \"REMOVE_PLANE\";\r\n\r\n\r\n// Outline\r\n\r\nexport const ADD_OUTLINED_MESH = \"ADD_OUTLINED_MESH\";\r\n\r\nexport const SET_OUTLINED_MESH = \"SET_OUTLINED_MESH\";\r\n\r\n// Animations\r\n\r\nexport const PLAY_RINGS_ANIMATION = \"PLAY_RINGS_ANIMATION\";\r\n\r\nexport const PLAY_DODECAHEDRONS_ANIMATION = \"PLAY_DODECAHEDRONS_ANIMATION\";\r\n\r\nexport const PLAY_TETRAHEDRONS_ANIMATION = \"PLAY_TETRAHEDRONS_ANIMATION\";\r\n\r\nexport const PLAY_SPHERES_ANIMATION = \"PLAY_SPHERES_ANIMATION\";\r\n\r\nexport const PLAY_LATHES_ANIMATION = \"PLAY_LATHES_ANIMATION\";\r\n\r\n// Sound\r\n\r\nexport const PLAY_TRANSIENT_SOUND = \"PLAY_TRANSIENT_SOUND\";\r\n\r\nexport const PLAY_LOOP_SOUND = \"PLAY_LOOP_SOUND\";\r\n\r\nexport const STOP_LOOP_SOUND = \"STOP_LOOP_SOUND\";\r\n","import * as types from '../actionTypes';\r\n\r\nconst spotLightsReducer = (state, action) => {\r\n    switch(action.type) {\r\n        case types.SET_SPOT_LIGHT:\r\n            return [\r\n                ...state,\r\n                {\r\n                    key: action.key,\r\n                    ...action.props\r\n                }\r\n            ];\r\n        case types.UPDATE_SPOT_LIGHT:\r\n            return [\r\n                state.filter(spotLight => spotLight.key === action.key),\r\n                {\r\n                    key: action.key,\r\n                    ...action.props\r\n                }\r\n            ]\r\n        case types.REMOVE_SPOT_LIGHT:\r\n            return state.filter(spotLight => spotLight.key === action.key);\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default spotLightsReducer;\r\n","import * as types from '../actionTypes';\r\n\r\nconst planesReducer = (state, action) => {\r\n    switch(action.type) {\r\n        case types.SET_PLANE:\r\n            return [\r\n                ...state,\r\n                {\r\n                    key: action.key,\r\n                    ...action.props\r\n                }\r\n            ];\r\n        case types.UPDATE_PLANE:\r\n            return [\r\n                state.filter(plane => plane.key === action.key),\r\n                {\r\n                    key: action.key,\r\n                    ...action.props\r\n                }\r\n            ]\r\n        case types.REMOVE_PLANE:\r\n            return state.filter(plane => plane.key === action.key);\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default planesReducer;\r\n","import * as types from '../actionTypes';\r\n\r\nconst cameraReducer = (state, action) => {\r\n    switch(action.type) {\r\n        case types.SET_CAMERA:\r\n            return {\r\n                ...action.props\r\n            }\r\n        case types.MOVE_CAMERA:\r\n            return {\r\n                ...action.props,\r\n                startTime: action.startTime\r\n            }\r\n        default:\r\n            return state\r\n    }\r\n};\r\n\r\nexport default cameraReducer;\r\n","import * as actionTypes from '../actionTypes';\r\nimport { omit } from 'lodash';\r\n\r\nconst outlineReducer = (state, action) => {\r\n    switch(action.type) {\r\n        case actionTypes.ADD_OUTLINED_MESH:\r\n            return {\r\n                ...state,\r\n                [action.key]: action.mesh\r\n            };\r\n        case actionTypes.SET_OUTLINED_MESH:\r\n            return omit(state, action.key);\r\n        default:\r\n            return state;\r\n    };\r\n};\r\n\r\nexport default outlineReducer;\r\n","const fragments = 4;\r\n\r\nconst fragmentWidth = 2;\r\n\r\nconst fragmentHeight = 2;\r\n\r\nconst fragmentDepth = 2;\r\n\r\nconst delta = (max) => Math.random() * max - max / 2;\r\n\r\nconst getParticlePositions = (initialPosition, finalPosition, width, height, depth) =>{\r\n    return {\r\n        initialPosition: [\r\n            initialPosition[0] - delta(width),\r\n            initialPosition[1] - delta(height),\r\n            initialPosition[2] - delta(depth)\r\n        ],\r\n        finalPosition: [\r\n            finalPosition[0] - delta(width),\r\n            finalPosition[1] - delta(height),\r\n            finalPosition[2] - delta(depth)\r\n        ]\r\n    }\r\n};\r\n\r\nconst betweenRange = (index, firstIndex, latestIndex) => {\r\n    return (index >= firstIndex && index <= latestIndex);\r\n};\r\n\r\nconst getFirstIndex = (lastFree, animationSize, amount) => {\r\n    \r\n    return lastFree + animationSize > amount ? 0 : lastFree % amount;\r\n};\r\n\r\nconst getLastIndex = (firstIndex, animationSize) => {\r\n    return firstIndex + (animationSize === 0 ? 0 : animationSize - 1);\r\n};\r\n\r\nconst getNextFree = (firstIndex, animationSize) => {\r\n    return firstIndex + animationSize;\r\n};\r\n\r\nconst getShapes = (oldShapes, firstIndex, lastIndex, newProps) => {\r\n    const particlePositions = () => newProps.isParticle ? getParticlePositions(\r\n        newProps.initialPosition,\r\n        newProps.finalPosition,\r\n        fragmentWidth,\r\n        fragmentHeight,\r\n        fragmentDepth\r\n    ) : {};\r\n    const array = oldShapes.map((oldProps, index) => {\r\n        return betweenRange(\r\n            index,\r\n            firstIndex,\r\n            lastIndex,\r\n        ) ? {\r\n                ...newProps,\r\n                ...particlePositions(),\r\n                key: (index - firstIndex) % fragments\r\n            } : oldProps\r\n    });\r\n    return array;\r\n};\r\n\r\nconst updateAnimations = (oldShapes, amount, lastFree, startTime, newProps) => {\r\n    const size = newProps.animationSize * (newProps.isParticle ? fragments : 1);\r\n    const firstIndex = getFirstIndex(lastFree, size, amount);\r\n    const lastIndex = getLastIndex(firstIndex, size);\r\n    const nextFree = getNextFree(firstIndex, size);\r\n    return {\r\n        amount: amount,\r\n        lastFree: nextFree,\r\n        shapes: getShapes(oldShapes, firstIndex, lastIndex, {\r\n            startTime: startTime,\r\n            ...newProps\r\n        })\r\n    };\r\n};\r\n\r\nconst shapesAnimationsReducer = actionType => (state, action) => {\r\n    \r\n    switch(action.type) {\r\n        case actionType:\r\n            return updateAnimations(\r\n                state.shapes,\r\n                state.amount,\r\n                state.lastFree,\r\n                action.startTime,\r\n                action.props\r\n            );\r\n        default:\r\n            return state;\r\n    };\r\n};\r\n\r\nexport default shapesAnimationsReducer;\r\n","import ambientLightReducer from './ambientLightReducer';\r\nimport spotLightsReducer from './spotLightsReducer';\r\nimport planesReducer from './planesReducer';\r\nimport cameraReducer from './cameraReducer';\r\nimport outlineReducer from './outlineReducer';\r\nimport shapesAnimationsReducer from './shapesAnimationsReducer';\r\nimport * as types from '../actionTypes';\r\n\r\nconst stateReducer = (state, action) => {\r\n    return {\r\n        camera: cameraReducer(state.camera, action),\r\n        ambientLight: ambientLightReducer(state.ambientLight, action),\r\n        spotLights: spotLightsReducer(state.spotLights, action),\r\n        planes: planesReducer(state.planes, action),\r\n        outline: outlineReducer(state.outline, action),\r\n        ringsAnimations: shapesAnimationsReducer(types.PLAY_RINGS_ANIMATION)(state.ringsAnimations, action),\r\n        dodecahedronsAnimations: shapesAnimationsReducer(types.PLAY_DODECAHEDRONS_ANIMATION)(state.dodecahedronsAnimations, action),\r\n        lathesAnimations: shapesAnimationsReducer(types.PLAY_LATHES_ANIMATION)(state.lathesAnimations, action),\r\n        spheresAnimations: shapesAnimationsReducer(types.PLAY_SPHERES_ANIMATION)(state.spheresAnimations, action),\r\n        tetrahedronsAnimations: shapesAnimationsReducer(types.PLAY_TETRAHEDRONS_ANIMATION)(state.tetrahedronsAnimations, action)\r\n    }\r\n}\r\n\r\nexport default stateReducer;\r\n","import create from 'zustand';\r\nimport storeReducer from './reducers/storeReducer';\r\n\r\nconst RINGS_AMOUNT = 1;\r\nconst DODECAHEDRONS_AMOUNT = 0;\r\nconst SPHERES_AMOUNT = 38500;\r\nconst LATHES_AMOUNT = 0;\r\nconst TETRAHEDRONS_AMOUNT = 0;\r\nconst EMPTY = \"EMPTY\";\r\n\r\nconst animation = (amount) => {\r\n  return {\r\n    amount: amount,\r\n    lastFree: 0,\r\n    shapes: [...Array(amount)].map(() => EMPTY),\r\n  }\r\n};\r\n\r\nconst initialState = {\r\n  camera: {\r\n    position: [0, 0, 0]\r\n  },\r\n  ambientLight: {\r\n    intensity: 0.5\r\n  },\r\n  spotLights: [],\r\n  shapes: [],\r\n  planes: [],\r\n  outline: {},\r\n  dodecahedronsAnimations: animation(DODECAHEDRONS_AMOUNT),\r\n  tetrahedronsAnimations: animation(TETRAHEDRONS_AMOUNT),\r\n  lathesAnimations: animation(LATHES_AMOUNT),\r\n  spheresAnimations: animation(SPHERES_AMOUNT),\r\n  ringsAnimations: animation(RINGS_AMOUNT),\r\n  waves: []\r\n};\r\n\r\nexport const [useStore, storeApi] = create(set => ({\r\n    ...initialState,\r\n    dispatch: action => set(state => storeReducer(state, action)),\r\n    setWaves: waves => set(state => {\r\n      return {\r\n        ...state,\r\n        waves\r\n      }\r\n    }\r\n  )\r\n}));\r\n","import React from 'react';\r\nimport { useStore } from '../../state/store';\r\n\r\nconst AmbientLightProvider = () => {\r\n\r\n    const [ambientLight] = useStore(state => [state.ambientLight])\r\n\r\n    return(<ambientLight {...ambientLight}/>);\r\n};\r\n\r\nexport default AmbientLightProvider;\r\n","import React, { useEffect } from 'react';\r\nimport { useFrame } from 'react-three-fiber';\r\nimport { Mesh } from 'three';\r\nimport { omit } from 'lodash';\r\n\r\nconst SHADOW_MAP_SIZE = 4096;\r\n\r\nconst SpotLight = (props) => {\r\n\r\n    const lightTarget = new Mesh();\r\n    \r\n    const spotLightRef = React.useRef();\r\n\r\n    useEffect(() => {\r\n        spotLightRef.current.shadowDarkness = 1;\r\n    }, []);\r\n\r\n    useFrame(({clock}, delta) => {\r\n        if(props.update) props.update(spotLightRef, clock, delta)\r\n    });\r\n\r\n    return (\r\n        <group>\r\n            <primitive\r\n                object={lightTarget}\r\n                position={props.target}\r\n            />\r\n            <spotLight\r\n                ref={spotLightRef}\r\n                {...omit(props, \"target\")}\r\n                shadow-bias={-0.00005}\r\n                shadow-mapSize-width={256}\r\n                shadow-mapSize-height={256}\r\n                castShadow\r\n                target={lightTarget}\r\n            />\r\n        </group>\r\n    );\r\n};\r\n\r\nexport default SpotLight;\r\n","import React from 'react';\r\nimport { useStore } from '../../state/store';\r\nimport SpotLight from '../3d/light/SpotLight';\r\n\r\nconst SpotLightsProvider = () => {\r\n\r\n    const [spotLights] = useStore(state => [state.spotLights])\r\n\r\n    return spotLights.map(spotLight => <SpotLight {...spotLight}/>);\r\n};\r\n\r\nexport default SpotLightsProvider;\r\n","import React, { useRef } from 'react';\r\nimport { planeColor } from '../material/color';\r\nimport gradientMap from '../material/gradientMap';\r\n\r\nconst Plane = props => {\r\n\r\n    const mesh = useRef();\r\n    return (\r\n      <group>\r\n\r\n        <mesh\r\n          {...props}\r\n          ref={mesh}\r\n          scale={props.scale ? props.scale : [1, 1, 1]}\r\n          position={props.position ? props.position : [0, 0, 0]}\r\n          rotation={props.rotation ? props.rotation.map(n => Math.PI * n) : [0, 0, 0]}\r\n        >\r\n          <planeGeometry  args={[props.width, props.height]}/>\r\n          <meshPhongMaterial color={props.color}/>\r\n        </mesh>\r\n        <mesh\r\n          {...props}\r\n          ref={mesh}\r\n          scale={props.scale ? props.scale : [1, 1, 1]}\r\n          position={props.position ? props.position : [0, 0, 0]}\r\n          rotation={props.rotation ? props.rotation.map(n => Math.PI * n) : [0, 0, 0]}\r\n          receiveShadow\r\n          castShadow\r\n        >\r\n          <planeGeometry args={[props.width, props.height]}/>\r\n          <shadowMaterial color=\"#black\" opacity={0.5} />\r\n        </mesh>\r\n      </group>\r\n    );\r\n  \r\n  };\r\n\r\n  export default Plane;\r\n","import * as THREE from 'three';\r\n\r\nexport const shapeHoverColor = new THREE.Color().setHSL( 0.02, 0.8, 0.25 ).multiplyScalar( 0.8 );\r\nexport const shapeIdleColor = new THREE.Color().setHSL( 0.02, 0.8, 0.2 ).multiplyScalar( 0.8 );\r\nexport const planeColor = \"hsla(210, 100% , 40%, 1)\";\r\n","import React from 'react';\r\nimport { useStore } from '../../state/store';\r\nimport Plane from '../3d/geometry/Plane';\r\n\r\nconst PlanesProvider = () => {\r\n\r\n    const [planes] = useStore(state => [state.planes])\r\n\r\n    return planes.map(plane => <Plane {...plane}/>);\r\n};\r\n\r\nexport default PlanesProvider;\r\n","import { omit } from 'lodash';\r\n\r\nconst POSITION_PYRAMID = \"POSITION_PYRAMID\";\r\n\r\nconst POSITION_GRID = \"POSITION_GRID\";\r\n\r\nconst INVERSE_POSITION_GRID = \"INVERSE_POSITION_GRID\";\r\n\r\nconst INTERPOLATION_PYRAMID = \"INTERPOLATION_PYRAMID\";\r\n\r\nconst INTERPOLATION_GRID = \"INTERPOLATION_GRID\";\r\n\r\nconst INVERSE_INTERPOLATION_GRID = \"INVERSE_INTERPOLATION_GRID\";\r\n\r\nconst applyProps = (props, injectedProps) => {\r\n    return {\r\n        ...props,\r\n        ...injectedProps\r\n    };\r\n}\r\n\r\nconst applyGrid = (amount, fn) => {\r\n    \r\n    return [...Array(amount[2]).keys()].flatMap(z =>\r\n        [...Array(amount[1]).keys()].flatMap(y =>\r\n            [...Array(amount[0]).keys()].map(x =>\r\n                {\r\n                    return fn(x, y, z)\r\n                }\r\n            )\r\n        )\r\n    )\r\n}\r\n\r\nconst positionGridPosition = (position, separation) => (x, y, z) => {\r\n    \r\n    const r = [\r\n        position[0] + x * separation[0],\r\n        position[1] + y * separation[1],\r\n        position[2] + z * separation[2]\r\n    ];\r\n    return r;\r\n}\r\n\r\nconst positionGridEventProps = (time, sprites, position, separation) => (x, y, z) => (\r\n    {\r\n        time: time,\r\n        type: \"SINGLE\",\r\n        sprites: sprites,\r\n        props: {\r\n            position: position(position, separation)(x, y, z)\r\n        }\r\n    }\r\n);\r\n\r\nconst getTime = (time, delay, x) => {\r\n    return time + delay * x;\r\n};\r\n\r\nconst interpolationGridEventProps = (time, sprites, initialPosition, finalPosition, separation, delay) => (x, y, z) => {\r\n    const props = {\r\n        initialPosition: positionGridPosition(initialPosition, separation)(x, y, z),\r\n        finalPosition: positionGridPosition(finalPosition, separation)(x, y, z)\r\n    };\r\n    return {\r\n        time: getTime(time, delay, x),\r\n        type: \"SINGLE\",\r\n        sprites: sprites,\r\n        props: props\r\n    };\r\n};\r\n\r\nconst applyPositionGrid = (event) => applyGrid(event.polyphony.amount, positionGridEventProps(\r\n    event.time,\r\n    event.sprites,\r\n    event.polyphony.position,\r\n    event.polyphony.separation\r\n));\r\n\r\nconst applyInterpolationGrid = (event) => applyGrid(event.polyphony.amount, interpolationGridEventProps(\r\n    event.time,\r\n    event.sprites,\r\n    event.polyphony.initialPosition,\r\n    event.polyphony.finalPosition,\r\n    event.polyphony.separation,\r\n    event.polyphony.delay\r\n));\r\n\r\nconst applyPoliphony = event => {\r\n    switch(event.polyphony.type) {\r\n        case POSITION_GRID:\r\n            return applyPositionGrid(event);\r\n        case INTERPOLATION_GRID:\r\n            return applyInterpolationGrid(event);\r\n        default:\r\n            throw new Error(`event ${JSON.stringify(event)} was not polyphonic.`);\r\n    };\r\n};\r\n\r\nconst apply = (events) => {\r\n    const r = [\r\n        ...events.filter(event => event.type !== \"POLYPHONIC\"),\r\n        ...events.filter(event => event.type === \"POLYPHONIC\").flatMap(event => applyPoliphony(event))\r\n    ];\r\n    return r;\r\n};\r\n\r\nconst EventPolyphonyService = {\r\n    apply: (events) => apply(events)\r\n};\r\n\r\nexport default EventPolyphonyService;\r\n","import { omit } from 'lodash';\r\nimport PolyphonyService from './EventPolyphonyService';\r\n\r\nconst getInitialCamera = (json) => {\r\n    return json.initialCamera;\r\n};\r\n\r\nconst getStartTime = (json) => {\r\n    const startTime = json.startTime;\r\n    return startTime ? startTime : 0;\r\n}\r\n\r\nconst getLoops = (json) => {\r\n\r\n};\r\n\r\nconst getEventPlusSprite = (event, sprites) => {\r\n    const eventWithoutProps = omit(event, \"props\");\r\n    if(eventWithoutProps.sprites && eventWithoutProps.sprites.length > 0) {\r\n        const eventWithoutPropsOrSprites = omit(eventWithoutProps, \"sprites\");\r\n        const spritesToApply = event.sprites ? Object.keys(sprites).filter(key => event.sprites.includes(key)).map(key => sprites[key]) : [];\r\n        return spritesToApply.reduce((event, sprite) => ({\r\n            ...omit(sprite, \"props\"),\r\n            ...eventWithoutPropsOrSprites\r\n        }), omit(event, \"props\"));\r\n    };\r\n    return eventWithoutProps;\r\n}\r\n\r\nconst useSpriteProps = (event, sprites) => {\r\n    if(event.sprites && event.sprites.length > 0) {\r\n        const spritesToApply = Object.keys(sprites).filter(key => event.sprites.includes(key)).map(key => sprites[key]);\r\n        return spritesToApply.reduce((event, sprite) => ({\r\n            ...sprite.props,\r\n            ...event.props\r\n        }), event);\r\n    }\r\n    return event.props;\r\n};\r\n\r\nconst getEvents = (eventsJson, spritesJson) => {\r\n    \r\n    const events = PolyphonyService.apply(eventsJson.events);\r\n    const sprites = spritesJson.sprites;\r\n    return events.map((event, index) => {\r\n        const eventPlusSprite = getEventPlusSprite(event, sprites);\r\n        return {\r\n            time: event.time,\r\n            action: {\r\n                type: `${eventPlusSprite.action}_${eventPlusSprite.element}`,\r\n                key: `${eventPlusSprite.action}_${eventPlusSprite.element}_${index}`,\r\n                props: useSpriteProps(event, sprites)\r\n            }\r\n        };\r\n    })\r\n}\r\n\r\nconst SequenceReaderService = (eventsJson, spritesJson) => {\r\n    return {\r\n        getStartTime: getStartTime(eventsJson),\r\n        getInitialCamera: getInitialCamera(eventsJson),\r\n        getEvents: getEvents(eventsJson, spritesJson),\r\n        getLoops: getLoops(eventsJson, spritesJson)\r\n    }\r\n}\r\n\r\nexport default SequenceReaderService;\r\n","import React from 'react';\r\nimport {Howl} from 'howler';\r\nimport { omit } from 'lodash';\r\n\r\nconst SoundContext = React.createContext();\r\n\r\nlet sounds = {};\r\n\r\nconst PREFIX = \"/experimento/sound/\";\r\n\r\n\r\nexport const eventTypes = {\r\n    ADD_SOUND: \"ADD_SOUND\",\r\n    PLAY_SOUND: \"PLAY_SOUND\",\r\n    STOP_SOUND: \"STOP_SOUND\",\r\n    REMOVE_SOUND: \"REMOVE_SOUND\",\r\n    LOOP_SOUND: \"LOOP_SOUND\"\r\n};\r\n\r\nconst soundFns = {\r\n    add: (key, file, startTime, props) => {\r\n        sounds[key] = new Howl({\r\n            src: [PREFIX + file],\r\n            sprite: {\r\n                [`${key}_sound`]: [startTime * 1000, 1800000]\r\n            },\r\n            ...omit(props, [\"key\", \"file\"])\r\n        });\r\n    },\r\n    loop: (key, loop) => {\r\n        sounds[key].loop(loop);\r\n    },\r\n    play: (key) => {\r\n        sounds[key].play(`${key}_sound`);\r\n    },\r\n    stop: (key) => {\r\n        sounds[key].stop();\r\n    },\r\n    remove: (key) => {\r\n        sounds[key].unload();\r\n        delete sounds[key];\r\n    }\r\n}\r\n\r\nvar soundApi = {\r\n    ...soundFns,\r\n    execute: (action) => {\r\n        switch(action.type) {\r\n            case eventTypes.ADD_SOUND:\r\n                soundFns.add(action.props.key, action.props.file, action.startTime, action.props);\r\n                break;\r\n            case eventTypes.PLAY_SOUND:\r\n                soundFns.play(action.props.key);\r\n                break;\r\n            case eventTypes.LOOP_SOUND:\r\n                soundFns.loop(action.props.key, action.props.loop);\r\n            case eventTypes.STOP_SOUND:\r\n                soundFns.stop(action.props.key);\r\n                break;\r\n            case eventTypes.REMOVE_SOUND:\r\n                soundFns.remove(action.props.key);\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n};\r\n\r\nexport const Sound = (props) => {\r\n    return (\r\n        <SoundContext.Provider value={soundApi}>\r\n            {props.children}\r\n        </SoundContext.Provider>\r\n    );\r\n};\r\n\r\nexport const useSoundsApi = () => React.useContext(SoundContext);\r\n","import { eventTypes as SoundEventTypes } from '../components/Sound'; \r\n\r\nconst isSoundEvent = action => Object.values(SoundEventTypes).includes(action.type);\r\n\r\nconst EventDispatcherService = {\r\n    play: (events, startTime, dispatch, clock, soundsApi) => {\r\n        events.map(event => {\r\n            if((!event.action.type.includes(\"PLAY\") || !event.action.type.includes(\"MOVE\") || (event.time >= startTime)) && !isSoundEvent(event.action)) {\r\n                setTimeout(() => {\r\n                        const elapsedTime = clock.elapsedTime;\r\n                        dispatch({\r\n                            ...event.action,\r\n                            startTime: elapsedTime\r\n                        })\r\n                }, (event.time - startTime) * 1000);\r\n            } else if (isSoundEvent(event.action)) {\r\n                soundsApi.execute(\r\n                    {\r\n                        ...event.action,\r\n                        startTime: startTime\r\n                    }\r\n                )\r\n            }\r\n        });\r\n    }\r\n};\r\n\r\nexport default EventDispatcherService;\r\n","import React, {useEffect} from 'react';\r\nimport SequenceService from '../services/SequenceReaderService';\r\nimport PolyphonyService from '../services/EventPolyphonyService';\r\nimport EventDispatcherService from '../services/EventDispatcherService';\r\nimport sequence from '../sequences/sequence.json';\r\nimport sprites from '../sequences/sprites.json';\r\nimport { useStore } from '../state/store';\r\nimport { useThree } from 'react-three-fiber';\r\n\r\nconst sceneService = SequenceService(sequence, sprites);\r\n\r\n\r\nconst Sequencer = (props) => {\r\n    \r\n    \r\n    const [dispatch] = useStore(state => [state.dispatch]);\r\n    \r\n    const {clock} = useThree();\r\n\r\n    useEffect(() => {\r\n        const soundsApi = props.soundsApi;\r\n\r\n        EventDispatcherService.play(sceneService.getEvents, sceneService.getStartTime, dispatch, clock, soundsApi);  \r\n    }, []);\r\n\r\n    return (<></>);\r\n};\r\n\r\nexport default Sequencer;\r\n","import React from 'react';\r\nimport {Suspense} from 'react';\r\nimport { BrightnessContrast, EffectComposer, DepthOfField, Bloom, Noise, Vignette, Outline } from '@react-three/postprocessing';\r\nimport { BlendFunction, OverrideMaterialManager } from 'postprocessing';\r\nimport { useRef, useEffect } from 'react';\r\nimport { storeApi } from '../state/store';\r\nimport { useFrame } from 'react-three-fiber';\r\n\r\nconst Effects = () => {\r\n\r\n  const outlineRef = useRef();\r\n  \r\n  useEffect(() => {\r\n\r\n    OverrideMaterialManager.workaroundEnabled = true;\r\n  }, []);\r\n\r\n  useFrame(() => {\r\n    if(outlineRef.current) {\r\n      outlineRef.current.selection.set(Object.values(storeApi.getState().outline));\r\n    }\r\n  });\r\n  \r\n  return (\r\n    <Suspense fallback={null}>\r\n      <EffectComposer>\r\n        <Bloom luminanceThreshold={0} luminanceSmoothing={0.9} height={300} />\r\n        <Noise opacity={0.05} />\r\n        <Vignette eskil={false} offset={0.1} darkness={0.1} />\r\n        <BrightnessContrast brightness={0.06} contrast={0.51}/>\r\n      </EffectComposer>\r\n    </Suspense>\r\n  );\r\n};\r\n\r\nexport default Effects;\r\n","import React from 'react';\r\nimport { Canvas, extend, useThree, useFrame } from \"react-three-fiber\";\r\nimport {\r\n    CubeTextureLoader,\r\n    CubeCamera,\r\n    WebGLCubeRenderTarget,\r\n    RGBFormat,\r\n    LinearMipmapLinearFilter,\r\n  } from \"three\";\r\n\r\nconst cubeRenderTarget = new WebGLCubeRenderTarget(256, {\r\n    format: RGBFormat,\r\n    generateMipmaps: true,\r\n    minFilter: LinearMipmapLinearFilter,\r\n  });\r\n  \r\n  const cubeCamera = new CubeCamera(1, 100, cubeRenderTarget);\r\n  \r\n  cubeCamera.position.set(0, 100, 0);\r\n  \r\n  // Loads the skybox texture and applies it to the scene.\r\n  const SkyBox = () => {\r\n  \r\n    const { scene, gl } = useThree();\r\n  \r\n    React.useEffect(() => {\r\n      const loader = new CubeTextureLoader();\r\n  \r\n      const texture = loader.load([\r\n        process.env.REACT_APP_PREFIX + \"sky-1.png\",\r\n        process.env.REACT_APP_PREFIX + \"sky-2.png\",\r\n        process.env.REACT_APP_PREFIX + \"sky-3.png\",\r\n        process.env.REACT_APP_PREFIX + \"sky-4.png\",\r\n        process.env.REACT_APP_PREFIX + \"sky-5.png\",\r\n        process.env.REACT_APP_PREFIX + \"sky-6.png\",\r\n      ]);\r\n      scene.background = texture;\r\n    }\r\n  \r\n    )\r\n    return null;\r\n}\r\n\r\nexport default SkyBox;\r\n","import * as THREE from 'three';\r\n\r\nvar WFCTool3D = function(){\r\n  var tiles = []\r\n  var materials = {}\r\n  var weights = []\r\n  var n_prototypes = 0\r\n  var formulae = []\r\n  \r\n  \r\n  var transformBank = {\r\n    ry:function(m){\r\n      var r = JSON.parse(JSON.stringify(m));\r\n      for (var i = 0; i < m.length; i++){\r\n        for (var j = 0; j < m.length; j++){\r\n          for (var k = 0; k < m.length; k++){\r\n            r[i][j][k] = m[i][m.length-1-k][j]; \r\n          }\r\n        }\r\n      }\r\n      return r;\r\n    },\r\n    \r\n    rx:function(m){\r\n      var r = JSON.parse(JSON.stringify(m));\r\n      for (var i = 0; i < m.length; i++){\r\n        for (var j = 0; j < m.length; j++){\r\n          for (var k = 0; k < m.length; k++){\r\n            r[i][j][k] = m[k][j][m.length-1-i]; \r\n          }\r\n        }\r\n      }\r\n      return r;\r\n    },\r\n    \r\n    rz:function(m){\r\n      var r = JSON.parse(JSON.stringify(m));\r\n      for (var i = 0; i < m.length; i++){\r\n        for (var j = 0; j < m.length; j++){\r\n          for (var k = 0; k < m.length; k++){\r\n            r[i][j][k] = m[m.length-1-j][i][k]; \r\n          }\r\n        }\r\n      }\r\n      return r;\r\n    },\r\n    \r\n    fz:function(m){\r\n      var r = JSON.parse(JSON.stringify(m));\r\n      for (var i = 0; i < m.length; i++){\r\n        for (var j = 0; j < m[0].length; j++){\r\n          for (var k = 0; k < m[0][0].length; k++){\r\n            r[i][j][k] = m[i][j][m.length-1-k]; \r\n          }\r\n        }\r\n      }\r\n      return r;\r\n    },\r\n    \r\n    fx:function(m){\r\n      var r = JSON.parse(JSON.stringify(m));\r\n      for (var i = 0; i < m.length; i++){\r\n        for (var j = 0; j < m[0].length; j++){\r\n          for (var k = 0; k < m[0][0].length; k++){\r\n            r[i][j][k] = m[i][m.length-1-j][k]; \r\n          }\r\n        }\r\n      }\r\n      return r;\r\n    },\r\n    \r\n    fy:function(m){\r\n      \r\n      var r = JSON.parse(JSON.stringify(m));\r\n\r\n      for (var i = 0; i < m.length; i++){\r\n        for (var j = 0; j < m[0].length; j++){\r\n          for (var k = 0; k < m[0][0].length; k++){\r\n            r[i][j][k] = m[m.length-1-i][j][k]; \r\n          }\r\n        }\r\n      }\r\n      return r;\r\n    },\r\n  }\r\n\r\n  function equal(m,r){\r\n    for (var i = 0; i < m.length; i++){\r\n      for (var j = 0; j < m[0].length; j++){\r\n        for (var k = 0; k < m[0][0].length; k++){\r\n          if (m[i][j][k] != r[i][j][k]){\r\n            return false;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    return true;\r\n  }\r\n  \r\n  function fit(d,a,b){\r\n    if (d == \"x\"){\r\n      for (var i = 0; i < a.length; i++){\r\n        for (var j = 0; j < a[i][0].length; j++){\r\n          if (a[i][a[i].length-1][j] != b[i][0][j]){\r\n            return false;\r\n          }\r\n        }\r\n      }\r\n    }else if (d == \"y\"){\r\n      for (var i = 0; i < a[0].length; i++){\r\n        for (var j = 0; j < a[i][0].length; j++){\r\n          if (a[a.length-1][i][j] != b[0][i][j]){\r\n            return false;\r\n          }\r\n        }\r\n      }\r\n    }else if (d == \"z\"){\r\n      for (var i = 0; i < a.length; i++){\r\n        for (var j = 0; j < a[0].length; j++){\r\n          if (a[i][j][a[i][0].length-1] != b[i][j][0]){\r\n            return false;\r\n          }\r\n        }\r\n      }      \r\n    }\r\n    return true;\r\n  }\r\n  \r\n  this.addTile = function(s,{transforms=\"auto\",weight=1}={}){\r\n    var t = s.map(y=>y.split(\"\\n\").map(x=>x.split(\"\")));\r\n    tiles.push(t);\r\n    formulae.push([ n_prototypes, '', t ])\r\n    weights.push(weight)\r\n    \r\n    var tests = []\r\n    \r\n    if (transforms == \"auto\"){\r\n      transforms = ['ry','ry','ry+ry+ry','fy','fy+ry','fy+ry+ry','fy+ry+ry+ry']\r\n    }\r\n    \r\n    for (var i = 0; i < transforms.length; i++){\r\n      var tl = transforms[i].split(\"+\")\r\n      var tt = t\r\n      for (var j = 0; j < tl.length; j++){\r\n        tt = transformBank[tl[j]](tt);\r\n      }\r\n      tests.push(tt);\r\n    }\r\n    for (var i = 0; i < tests.length; i++){\r\n      var ok = true;\r\n      for (var j = 0; j < tiles.length; j++){\r\n        if (equal(tests[i],tiles[j])){\r\n          ok = false;\r\n          break;\r\n        }\r\n      }\r\n      if (ok){\r\n        tiles.push(tests[i])\r\n        weights.push(weight)\r\n        formulae.push([ n_prototypes, transforms[i], tests[i] ])\r\n      }\r\n    }\r\n    n_prototypes++;\r\n  }\r\n  \r\n  this.addMaterial = function(symbol, material){\r\n    materials[symbol] = material;\r\n  }\r\n  \r\n  this.getTileFormulae = function(){\r\n    return formulae;\r\n  }\r\n  \r\n  this.generateWFCInput = function(){\r\n    var rules = []\r\n    for (var i = 0; i < tiles.length; i++){\r\n      for (var j = 0; j < tiles.length; j++){\r\n\r\n        if (fit(\"x\",tiles[i],tiles[j])){\r\n          rules.push(['x',i,j])\r\n        }\r\n        if (fit(\"y\",tiles[i],tiles[j])){\r\n          rules.push(['y',i,j])\r\n        }\r\n        if (fit(\"z\",tiles[i],tiles[j])){\r\n          rules.push(['z',i,j])\r\n        }\r\n      }\r\n    }\r\n    return {weights,rules,nd:3}\r\n  }\r\n  \r\n  /*global describe THREE */\r\n  this.plotWFCOutput = function(root,wave){\r\n\r\n    while (root.children.length){\r\n      root.children.pop();\r\n    }\r\n    \r\n    var wz = tiles[0][0][0].length\r\n    var wx = tiles[0][0].length\r\n    var wy = tiles[0].length;\r\n    \r\n    const geometryScale = 10;\r\n\r\n    var geometry = new THREE.BoxGeometry( geometryScale /wx, geometryScale/wy, geometryScale/wz );\r\n    for (var K in wave){\r\n      var [y,x,z] = K.split(\",\").map(x=>parseInt(x));\r\n      for (var i = 0; i < wy; i++){\r\n        for (var j = 0; j < wx; j++){\r\n          for (var k = 0; k < wz; k++){\r\n            var material = materials[tiles[wave[K]][i][j][k]]\r\n            if (material){\r\n              var cube = new THREE.Mesh(geometry,material);\r\n              cube.position.set(geometryScale * (z+k/wz), geometryScale * (x+j/wx),  geometryScale * (y+i/wy) + 10)\r\n              cube.castShadow = true;\r\n              cube.receiveShadow = true;\r\n              root.add(cube);\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n  \r\n}\r\n\r\nexport default WFCTool3D;\r\n","/*\nauto-generated by: https://github.com/pmndrs/gltfjsx\n*/\nimport React, { useRef, Suspense } from 'react'\nimport { useGLTF } from '@react-three/drei/useGLTF'\nimport { PositionalAudio } from '@react-three/drei'\n\nexport default function Model(props) {\n  const group = useRef()\n  const { nodes, materials } = useGLTF('/experimento/ColumnaGiro.gltf')\n\n  return (\n    <group ref={group} {...props}>\n      <mesh castShadow receiveShadow material={materials['Mat.2']} geometry={nodes.Columna_esquina.geometry} position={[0, 0.013694, 0]}></mesh>\n      <Suspense fallback={null}>\n        <PositionalAudio loop url=\"/objs-8.mp3\" distance={0.8}/>\n      </Suspense>\n    </group>\n  )\n}\n\nuseGLTF.preload('/experimento/ColumnaGiro.gltf')\n","/*\nauto-generated by: https://github.com/pmndrs/gltfjsx\n*/\nimport React, { useRef } from 'react'\nimport { useGLTF } from '@react-three/drei/useGLTF'\nimport { MeshStandardMaterial } from 'three';\n\nconst mat = (oldMat) => {\n  const newMat = new MeshStandardMaterial({\n    color: oldMat.color, \n    map: oldMat.map\n})\n\n  return newMat;\n}\n\nexport default function Model(props) {\n  \n  const group = useRef()\n  const { nodes, materials } = useGLTF('/experimento/ColumnaGiroNS.gltf')\n  return (\n    <group ref={group} {...props}>\n      <mesh receiveShadow castShadow material={materials['Mat.2']} geometry={nodes.Columna_Ns.geometry} position={[0.655, 0, -0.655]}>\n      </mesh>\n    </group>\n  )\n}\n\nuseGLTF.preload('/experimento/ColumnaGiroNS.gltf')\n","/*\nauto-generated by: https://github.com/pmndrs/gltfjsx\n*/\nimport React, { useRef } from 'react'\nimport { useGLTF } from '@react-three/drei/useGLTF'\n\nexport default function Model(props) {\n  const group = useRef()\n  const { nodes, materials } = useGLTF('/experimento/Pared.gltf')\n  return (\n    <group ref={group} {...props}>\n    <mesh castShadow receiveShadow material={materials['Mat.2']} geometry={nodes.Pared.geometry} />\n      <mesh receiveShadow geometry={nodes.Pared.geometry} >\n        \n        <shadowMaterial color=\"#black\" opacity={0.5} />\n      </mesh>\n    </group>\n  )\n}\n\nuseGLTF.preload('/experimento/Pared.gltf')\n","/*\nauto-generated by: https://github.com/pmndrs/gltfjsx\n*/\nimport React, { useRef } from 'react'\nimport { useGLTF } from '@react-three/drei/useGLTF'\n\nexport default function Model(props) {\n  const group = useRef()\n  const { nodes, materials } = useGLTF('/experimento/ParedNS.gltf')\n  return (\n    <group ref={group} {...props}>\n    <mesh castShadow receiveShadow material={materials['Mat.2']} geometry={nodes.Pared_Ns.geometry} position={[0.36, 0, 0]}/>\n    </group>\n  )\n}\n\nuseGLTF.preload('/experimento/ParedNS.gltf')\n","/*\nauto-generated by: https://github.com/pmndrs/gltfjsx\n*/\nimport React, { useRef, Suspense } from 'react'\nimport { useGLTF } from '@react-three/drei/useGLTF'\nimport { PositionalAudio } from '@react-three/drei'\n\nexport default function Model(props) {\n  const group = useRef()\n  const { nodes, materials } = useGLTF('/experimento/ParedEsquina.gltf')\n  return (\n    <group ref={group} {...props}>\n      <mesh castShadow receiveShadow material={materials['Mat.2']} geometry={nodes.Pared_esquina.geometry} >\n      </mesh>\n      <Suspense fallback={null}>\n        <PositionalAudio loop url=\"/objs-7.mp3\" distance={0.8}/>\n      </Suspense>\n    </group>\n  )\n}\n\nuseGLTF.preload('/experimento/ParedEsquina.gltf')\n","/*\nauto-generated by: https://github.com/pmndrs/gltfjsx\n*/\nimport React, { useRef } from 'react'\nimport { useGLTF } from '@react-three/drei/useGLTF'\n\nexport default function Model(props) {\n  const group = useRef()\n  const { nodes, materials } = useGLTF('/experimento/ParedEsquinaNS.gltf')\n  return (\n    <group ref={group} {...props}>\n      <mesh castShadow receiveShadow material={materials['Mat.2']} geometry={nodes.Paredesquina_Ns.geometry} />\n\n    </group>\n  )\n}\n\nuseGLTF.preload('/experimento/ParedEsquinaNS.gltf')\n","/*\nauto-generated by: https://github.com/pmndrs/gltfjsx\n*/\nimport React, { useRef, Suspense } from 'react'\nimport { useGLTF } from '@react-three/drei/useGLTF'\nimport { PositionalAudio } from '@react-three/drei'\n\nexport default function Model(props) {\n  const group = useRef()\n  const { nodes, materials } = useGLTF('/experimento/Puerta.gltf')\n  return (\n    <group castShadow receiveShadow ref={group} {...props}>\n      <mesh castShadow receiveShadow material={materials['Mat.2']} geometry={nodes.Puerta.geometry}  position={[0, 0.013694, 0]}/>\n      <Suspense fallback={null}>\n        <PositionalAudio loop url=\"/experimento/objs-11.mp3\" distance={0.8}/>\n      </Suspense>\n    </group>\n  )\n}\n\nuseGLTF.preload('/experimento/Puerta.gltf')\n","/*\nauto-generated by: https://github.com/pmndrs/gltfjsx\n*/\nimport React, { useRef } from 'react'\nimport { useGLTF } from '@react-three/drei/useGLTF'\n\nexport default function Model(props) {\n  const group = useRef()\n  const { nodes, materials } = useGLTF('/experimento/SobrePuerta.gltf')\n  \n  return (\n    <group ref={group} {...props}>\n    <mesh castShadow receiveShadow material={materials['Mat.2']} geometry={nodes.Pared_puerta_Ns.geometry} position={[0.65, 0, 0]}/>\n\n    </group>\n  )\n}\n\nuseGLTF.preload('/experimento/SobrePuerta.gltf')\n","import ColumnaGiro from '../components/3d/modules/ColumnaGiro';\r\nimport ColumnaGiroNS from '../components/3d/modules/ColumnaGiroNS';\r\nimport Pared from '../components/3d/modules/Pared';\r\nimport ParedNS from '../components/3d/modules/ParedNS';\r\nimport ParedEsquina from '../components/3d/modules/ParedEsquina';\r\nimport ParedEsquinaNS from '../components/3d/modules/ParedEsquinaNS';\r\nimport Puerta from '../components/3d/modules/Puerta';\r\nimport SobrePuerta from '../components/3d/modules/SobrePuerta';\r\nimport React from 'react';\r\n\r\n/**\r\n * = Piso\r\n * _ Aire\r\n * X Pared\r\n * # Pared Superior\r\n * | Puerta\r\n * @ Puerta Superior\r\n */\r\n\r\nconst ColumnaGiroTiles = \r\n{\r\n    tiles: [\r\n`\\\r\n===\r\n__X\r\n__#`\r\n,`\\\r\n===\r\n___\r\n___`\r\n,`\\\r\n===\r\n___\r\n___`\r\n],\r\n    params: { transforms: [], weight: 2},\r\n    component: (props) => { return (<ColumnaGiro position={props.position} /> )}\r\n}\r\n\r\nconst ColumnaGiroTiles90 = {\r\n  tiles: [\r\n`\\\r\n===\r\nX__\r\n#__`\r\n,`\\\r\n===\r\n___\r\n___`\r\n,`\\\r\n===\r\n___\r\n___`\r\n    ],\r\n    params: { transforms: [], weight: 2},\r\n    component:(props) => { return ( <ColumnaGiro position={props.position} rotation={[0, 0.5 * Math.PI, 0]}/>) }\r\n}\r\n\r\nconst ColumnaGiroTiles180 = {\r\n  tiles: [\r\n`\\\r\n===\r\n___\r\n___`\r\n,`\\\r\n===\r\n___\r\n___`\r\n,`\\\r\n===\r\nX__\r\n#__`\r\n    ],\r\n    params: { transforms: [], weight: 2},\r\n    component:(props) => { return ( <ColumnaGiro position={props.position} rotation={[0, 1 * Math.PI, 0]}/>)}\r\n}\r\n\r\nconst ColumnaGiroTiles270 = {\r\n    tiles: [\r\n`\\\r\n===\r\n___\r\n___`\r\n,`\\\r\n===\r\n___\r\n___`\r\n,`\\\r\n===\r\n__X\r\n__#`\r\n    ],\r\n    params: { transforms: [], weight: 2},\r\n    component: (props) => { return (<ColumnaGiro position={props.position} rotation={[0, 1.5 * Math.PI, 0]}/> )}\r\n}\r\n\r\nconst ColumnaGiroTilesNS = \r\n{\r\n    tiles: [\r\n`\\\r\n__#\r\n__#\r\n__#`\r\n,`\\\r\n___\r\n___\r\n___`\r\n,`\\\r\n___\r\n___\r\n___`\r\n],\r\n    params: { transforms: [], weight: 1},\r\n    component: (props) => { return (<ColumnaGiroNS position={props.position} /> )}\r\n}\r\n\r\nconst ColumnaGiroTilesNS90 = {\r\n  tiles: [\r\n`\\\r\n#__\r\n#__\r\n#__`\r\n,`\\\r\n___\r\n___\r\n___`\r\n,`\\\r\n___\r\n___\r\n___`\r\n    ],\r\n    params: { transforms: [], weight: 1},\r\n    component:(props) => { return ( <ColumnaGiroNS position={props.position} rotation={[0, 0.5 * Math.PI, 0]}/>) }\r\n}\r\n\r\nconst ColumnaGiroTilesNS180 = {\r\n  tiles: [\r\n`\\\r\n___\r\n___\r\n___`\r\n,`\\\r\n___\r\n___\r\n___`\r\n,`\\\r\n#__\r\n#__\r\n#__`\r\n    ],\r\n    params: { transforms: [], weight: 1},\r\n    component:(props) => { return ( <ColumnaGiroNS position={props.position} rotation={[0, 1 * Math.PI, 0]}/>)}\r\n}\r\n\r\nconst ColumnaGiroTilesNS270 = {\r\n    tiles: [\r\n`\\\r\n___\r\n___\r\n___`\r\n,`\\\r\n___\r\n___\r\n___`\r\n,`\\\r\n__#\r\n__#\r\n__#`\r\n    ],\r\n    params: { transforms: [], weight: 1},\r\n    component: (props) => { return (<ColumnaGiroNS position={props.position} rotation={[0, 1.5 * Math.PI, 0]}/> )}\r\n}\r\n\r\n//==============\r\n\r\n\r\nconst ParedTiles = \r\n{\r\n    tiles: [\r\n`\\\r\n===\r\n__X\r\n__#`\r\n,`\\\r\n===\r\n__X\r\n__#`\r\n,`\\\r\n===\r\n__X\r\n__#`\r\n],\r\n    params: { transforms: [], weight: 20},\r\n    component: (props) => { return (<Pared position={props.position} /> )}\r\n}\r\n\r\nconst ParedTiles90 = {\r\n  tiles: [\r\n`\\\r\n===\r\nXXX\r\n###`\r\n,`\\\r\n===\r\n___\r\n___`\r\n,`\\\r\n===\r\n___\r\n___`\r\n    ],\r\n    params: { transforms: [], weight: 20},\r\n    component:(props) => { return ( <Pared position={props.position} rotation={[0, 0.5 * Math.PI, 0]}/>) }\r\n}\r\n\r\nconst ParedTiles180 = {\r\n  tiles: [\r\n`\\\r\n===\r\nX__\r\n#__`\r\n,`\\\r\n===\r\nX__\r\n#__`\r\n,`\\\r\n===\r\nX__\r\n#__`\r\n    ],\r\n    params: { transforms: [], weight: 20},\r\n    component:(props) => { return ( <Pared position={props.position} rotation={[0, 1 * Math.PI, 0]}/>)}\r\n}\r\n\r\nconst ParedTiles270 = {\r\n    tiles: [\r\n`\\\r\n===\r\n___\r\n___`\r\n,`\\\r\n===\r\n___\r\n___`\r\n,`\\\r\n===\r\nXXX\r\n###`\r\n    ],\r\n    params: { transforms: [], weight: 20},\r\n    component: (props) => { return (<Pared position={props.position} rotation={[0, 1.5 * Math.PI, 0]}/> )}\r\n}\r\n\r\nconst ParedTilesNS = \r\n{\r\n    tiles: [\r\n`\\\r\n__#\r\n__#\r\n__#`\r\n,`\\\r\n__#\r\n__#\r\n__#`\r\n,`\\\r\n__#\r\n__#\r\n__#`\r\n],\r\n    params: { transforms: [], weight: 1},\r\n    component: (props) => { return (<ParedNS position={props.position} /> )}\r\n}\r\n\r\nconst ParedTilesNS90 = {\r\n  tiles: [\r\n`\\\r\n###\r\n###\r\n###`\r\n,`\\\r\n___\r\n___\r\n___`\r\n,`\\\r\n___\r\n___\r\n___`\r\n    ],\r\n    params: { transforms: [], weight: 1},\r\n    component:(props) => { return ( <ParedNS position={props.position} rotation={[0, 0.5 * Math.PI, 0]}/>) }\r\n}\r\n\r\nconst ParedTilesNS180 = {\r\n  tiles: [\r\n`\\\r\n#__\r\n#__\r\n#__`\r\n,`\\\r\n#__\r\n#__\r\n#__`\r\n,`\\\r\n#__\r\n#__\r\n#__`\r\n    ],\r\n    params: { transforms: [], weight: 1},\r\n    component:(props) => { return ( <ParedNS position={props.position} rotation={[0, 1 * Math.PI, 0]}/>)}\r\n}\r\n\r\nconst ParedTilesNS270 = {\r\n    tiles: [\r\n`\\\r\n___\r\n___\r\n___`\r\n,`\\\r\n___\r\n___\r\n___`\r\n,`\\\r\n###\r\n###\r\n###`\r\n    ],\r\n    params: { transforms: [], weight: 1},\r\n    component: (props) => { return (<ParedNS position={props.position} rotation={[0, 1.5 * Math.PI, 0]}/> )}\r\n}\r\n\r\nconst PlaceHolder = {\r\n    tiles: [\r\n`\\\r\n===\r\nXXX\r\n###`\r\n,`\\\r\n===\r\nX_X\r\n#_#`\r\n,`\\\r\n===\r\nXXX\r\n###`\r\n    ],\r\n    params: { transforms: [], weight: 1},\r\n    component: (props) => { return (<></>)}\r\n}\r\nconst PlaceHolderNS = {\r\n    tiles: [\r\n`\\\r\n###\r\n###\r\n###`\r\n,`\\\r\n#_#\r\n#_#\r\n#_#`\r\n,`\\\r\n###\r\n###\r\n###`\r\n    ],\r\n    params: { transforms: [], weight: 1},\r\n    component: (props) => { return (<></>)}\r\n}\r\n\r\n\r\n//==============\r\n\r\n\r\nconst ParedEsquinaTiles = \r\n{\r\n    tiles: [\r\n`\\\r\n===\r\nXXX\r\n###`\r\n,`\\\r\n===\r\n__X\r\n__#`\r\n,`\\\r\n===\r\n__X\r\n__#`\r\n],\r\n    params: { transforms: [], weight: 20},\r\n    component: (props) => { return (<ParedEsquina position={props.position} /> )}\r\n}\r\n\r\nconst ParedEsquinaTiles90 = {\r\n  tiles: [\r\n`\\\r\n===\r\nXXX\r\n###`\r\n,`\\\r\n===\r\nX__\r\n#__`\r\n,`\\\r\n===\r\nX__\r\n#__`\r\n    ],\r\n    params: { transforms: [], weight: 20},\r\n    component:(props) => { return ( <ParedEsquina position={props.position} rotation={[0, 0.5 * Math.PI, 0]}/>) }\r\n}\r\n\r\nconst ParedEsquinaTiles180 = {\r\n  tiles: [\r\n`\\\r\n===\r\nX__\r\n#__`\r\n,`\\\r\n===\r\nX__\r\n#__`\r\n,`\\\r\n===\r\nXXX\r\n###`\r\n    ],\r\n    params: { transforms: [], weight: 20},\r\n    component:(props) => { return ( <ParedEsquina position={props.position} rotation={[0, 1 * Math.PI, 0]}/>)}\r\n}\r\n\r\nconst ParedEsquinaTiles270 = {\r\n    tiles: [\r\n`\\\r\n===\r\n__X\r\n__#`\r\n,`\\\r\n===\r\n__X\r\n__#`\r\n,`\\\r\n===\r\nXXX\r\n###`\r\n    ],\r\n    params: { transforms: [], weight: 20},\r\n    component: (props) => { return (<ParedEsquina position={props.position} rotation={[0, 1.5 * Math.PI, 0]}/> )}\r\n}\r\n\r\nconst ParedEsquinaTilesNS = \r\n{\r\n    tiles: [\r\n`\\\r\n###\r\n###\r\n###`\r\n,`\\\r\n__#\r\n__#\r\n__#`\r\n,`\\\r\n__#\r\n__#\r\n__#`\r\n],\r\n    params: { transforms: [], weight: 1},\r\n    component: (props) => { return (<ParedEsquinaNS position={props.position} /> )}\r\n}\r\n\r\nconst ParedEsquinaTilesNS90 = {\r\n  tiles: [\r\n`\\\r\n###\r\n###\r\n###`\r\n,`\\\r\n#__\r\n#__\r\n#__`\r\n,`\\\r\n#__\r\n#__\r\n#__`\r\n    ],\r\n    params: { transforms: [], weight: 1},\r\n    component:(props) => { return ( <ParedEsquinaNS position={props.position} rotation={[0, 0.5 * Math.PI, 0]}/>) }\r\n}\r\n\r\nconst ParedEsquinaTilesNS180 = {\r\n  tiles: [\r\n`\\\r\n#__\r\n#__\r\n#__`\r\n,`\\\r\n#__\r\n#__\r\n#__`\r\n,`\\\r\n###\r\n###\r\n###`\r\n    ],\r\n    params: { transforms: [], weight: 1},\r\n    component:(props) => { return ( <ParedEsquinaNS position={props.position} rotation={[0, 1 * Math.PI, 0]}/>)}\r\n}\r\n\r\nconst ParedEsquinaTilesNS270 = {\r\n    tiles: [\r\n`\\\r\n__#\r\n__#\r\n__#`\r\n,`\\\r\n__#\r\n__#\r\n__#`\r\n,`\\\r\n###\r\n###\r\n###`\r\n    ],\r\n    params: { transforms: [], weight: 1},\r\n    component: (props) => { return (<ParedEsquinaNS position={props.position} rotation={[0, 1.5 * Math.PI, 0]}/> )}\r\n}\r\n\r\n\r\n\r\n//==============\r\n\r\n\r\nconst PuertaTiles = \r\n{\r\n    tiles: [\r\n`\\\r\n===\r\n__X\r\n__#`\r\n,`\\\r\n===\r\n__|\r\n__@`\r\n,`\\\r\n===\r\n__X\r\n__#`\r\n],\r\n    params: { transforms: [], weight: 10},\r\n    component: (props) => { return (<Puerta position={props.position} /> )}\r\n}\r\n\r\nconst PuertaTiles90 = {\r\n  tiles: [\r\n`\\\r\n===\r\nX|X\r\n#@#`\r\n,`\\\r\n===\r\n___\r\n___`\r\n,`\\\r\n===\r\n___\r\n___`\r\n    ],\r\n    params: { transforms: [], weight: 10},\r\n    component:(props) => { return ( <Puerta position={props.position} rotation={[0, 0.5 * Math.PI, 0]}/>) }\r\n}\r\n\r\nconst PuertaTiles180 = {\r\n  tiles: [\r\n`\\\r\n===\r\nX__\r\n#__`\r\n,`\\\r\n===\r\n|__\r\n@__`\r\n,`\\\r\n===\r\nX__\r\n#__`\r\n    ],\r\n    params: { transforms: [], weight: 10},\r\n    component:(props) => { return ( <Puerta position={props.position} rotation={[0, 1 * Math.PI, 0]}/>)}\r\n}\r\n\r\nconst PuertaTiles270 = {\r\n    tiles: [\r\n`\\\r\n===\r\n___\r\n___`\r\n,`\\\r\n===\r\n___\r\n___`\r\n,`\\\r\n===\r\nX|X\r\n#@#`\r\n    ],\r\n    params: { transforms: [], weight: 10},\r\n    component: (props) => { return (<Puerta position={props.position} rotation={[0, 1.5 * Math.PI, 0]}/> )}\r\n}\r\n\r\nconst PuertaTilesNS = \r\n{\r\n    tiles: [\r\n`\\\r\n__#\r\n__#\r\n__#`\r\n,`\\\r\n__@\r\n__@\r\n__@`\r\n,`\\\r\n__#\r\n__#\r\n__#`\r\n],\r\n    params: { transforms: [], weight: 1},\r\n    component: (props) => { return (<SobrePuerta position={props.position} /> )}\r\n}\r\n\r\nconst PuertaTilesNS90 = {\r\n  tiles: [\r\n`\\\r\n#@#\r\n#@#\r\n#@#`\r\n,`\\\r\n___\r\n___\r\n___`\r\n,`\\\r\n___\r\n___\r\n___`\r\n    ],\r\n    params: { transforms: [], weight: 1},\r\n    component:(props) => { return ( <SobrePuerta position={props.position} rotation={[0, 0.5 * Math.PI, 0]}/>) }\r\n}\r\n\r\nconst PuertaTilesNS180 = {\r\n  tiles: [\r\n`\\\r\n#__\r\n#__\r\n#__`\r\n,`\\\r\n@__\r\n@__\r\n@__`\r\n,`\\\r\n#__\r\n#__\r\n#__`\r\n    ],\r\n    params: { transforms: [], weight: 1},\r\n    component:(props) => { return ( <SobrePuerta position={props.position} rotation={[0, 1 * Math.PI, 0]}/>)}\r\n}\r\n\r\nconst PuertaTilesNS270 = {\r\n    tiles: [\r\n`\\\r\n___\r\n___\r\n___`\r\n,`\\\r\n___\r\n___\r\n___`\r\n,`\\\r\n#@#\r\n#@#\r\n#@#`\r\n    ],\r\n    params: { transforms: [], weight: 1},\r\n    component: (props) => { return (<SobrePuerta position={props.position} rotation={[0, 1.5 * Math.PI, 0]}/> )}\r\n}\r\n\r\nconst wavesTiles = [\r\n    PlaceHolder,\r\n    PlaceHolderNS,\r\n    ColumnaGiroTiles,\r\n    ColumnaGiroTiles90,\r\n    ColumnaGiroTiles180,\r\n    ColumnaGiroTiles270,\r\n    ColumnaGiroTilesNS,\r\n    ColumnaGiroTilesNS90,\r\n    ColumnaGiroTilesNS180,\r\n    ColumnaGiroTilesNS270,\r\n    ParedTiles,\r\n    ParedTiles90,\r\n    ParedTiles180,\r\n    ParedTiles270,\r\n    ParedTilesNS,\r\n    ParedTilesNS90,\r\n    ParedTilesNS180,\r\n    ParedTilesNS270,\r\n    ParedEsquinaTiles,\r\n    ParedEsquinaTiles90,\r\n    ParedEsquinaTiles180,\r\n    ParedEsquinaTiles270,\r\n    ParedEsquinaTilesNS,\r\n    ParedEsquinaTilesNS90,\r\n    ParedEsquinaTilesNS180,\r\n    ParedEsquinaTilesNS270,\r\n    PuertaTiles,\r\n    PuertaTiles90,\r\n    PuertaTiles180,\r\n    PuertaTiles270,\r\n    PuertaTilesNS,\r\n    PuertaTilesNS90,\r\n    PuertaTilesNS180,\r\n    PuertaTilesNS270\r\n]\r\n\r\nexport default wavesTiles;\r\n","import React from 'react';\r\nimport { cloneDeep } from 'lodash';\r\nimport WFCTool3D from '../procedural/ndwfc-tools';\r\nimport WFC from '../procedural/ndwfc';\r\nimport { useStore } from '../state/store';\r\n\r\nimport waveTiles from './wavesTiles';\r\n\r\nvar tool = new WFCTool3D();\r\n\r\nwaveTiles.forEach(waveTile => tool.addTile(waveTile.tiles,  waveTile.params))\r\n\r\nvar wave;\r\n\r\nvar wfc;\r\nvar size;\r\nvar increment;\r\nvar multiply;\r\n\r\nlet expansions = 0;\r\n\r\nfunction execute(){\r\n\r\n    while(expansions <= 1) {\r\n        if (!wfc){\r\n        return\r\n        }\r\n        var done = wfc.step();\r\n        if (done){\r\n            wfc.expand([-size, 0,-size],[size, 2, size]);\r\n            size=Math.ceil((size+increment)*multiply);\r\n            expansions++;\r\n        }\r\n        wave = wfc.readout()\r\n    }\r\n    }\r\n    \r\nconst executeOp = function(e) {\r\n    if (e.op == \"init\"){\r\n    wfc = new WFC(e.wfcInput);\r\n    size = e.initialSize;\r\n    increment = e.increment;\r\n    multiply = e.multiply\r\n    execute();\r\n    }\r\n}\r\n\r\nexecuteOp({\r\n    op:'init',\r\n    wfcInput:tool.generateWFCInput(),\r\n    initialSize:10,\r\n    increment:0,\r\n    multiply:1\r\n})\r\n\r\nconst WaveTest = () => {\r\n\r\n    const setWaves = useStore(state => state.setWaves);\r\n    \r\n    React.useEffect(() => {\r\n        setWaves(cloneDeep(wave))\r\n    }, []);\r\n\r\n    return (<></>);\r\n};\r\n\r\nexport default WaveTest;\r\n","import React from 'react';\r\nimport { useStore } from '../../../state/store';\r\nimport ColumnaGiro from './ColumnaGiro';\r\nimport waveTiles from '../../wavesTiles';\r\n\r\nconst Module = (props) => {\r\n    return waveTiles[props.index].component(props)\r\n};\r\n\r\nexport default Module;\r\n","import React from 'react';\r\nimport { useStore } from '../state/store';\r\nimport Module from './3d/modules/Module';\r\n\r\nconst keyToPosition = key => {\r\n    const k = key.split(\",\").map(position => parseInt(position))\r\n    return [k[2] * 2, k[1] * 1.6, k[0] * 2]\r\n}\r\n\r\nconst WaveModules = () => {\r\n    const waves = useStore(state => state.waves);\r\n    \r\n    return (\r\n        <group>\r\n            {Object.keys(waves).map(waveKey => <Module position={keyToPosition(waveKey)} index={parseInt(waves[waveKey])}/>)}\r\n        </group>\r\n    );\r\n};\r\n\r\nexport default WaveModules;\r\n","import React, { useRef } from 'react';\r\nimport AmbientLightProvider from './providers/AmbientLightProvider';\r\nimport SpotLightsProvider from './providers/SpotLightsProvider';\r\nimport PlanesProvider from './providers/PlanesProvider';\r\nimport Sequencer from './Sequencer';\r\nimport Effects from './Effects';\r\nimport { OrbitControls, Environment } from '@react-three/drei';\r\nimport SkyBox from './3d/models/SkyBox';\r\nimport WavesGenerator from './WavesGenerator';\r\nimport WaveModules from './WaveModules';\r\nimport { useThree } from 'react-three-fiber';\r\nimport { sRGBEncoding } from 'three';\r\n\r\n/**\r\n * = Piso\r\n * | Columna\r\n * @ Columna Superior\r\n * X pared\r\n * # Pared Superior\r\n * _ Aire\r\n */\r\n\r\n//<Effects/>\r\n//<WaveModules/>\r\nconst Scene = (props) => {\r\n  const orbitRef = useRef();\r\n  const { gl } = useThree();\r\n  React.useEffect(() => {\r\n    gl.shadowMap.renderSingleSided = false\r\n    gl.outputEncoding = sRGBEncoding\r\n    gl.gammaOutput = true;\r\n    gl.gammaFactor = 2.2;\r\n    orbitRef.current.enableKeys = true;\r\n  }, [])\r\n\r\n  return (\r\n    <>\r\n    <OrbitControls ref={orbitRef} enableKeys/>\r\n    <React.Suspense fallback={null}>\r\n      <Environment background={true} files={['sky-1.png', 'sky-2.png', 'sky-3.png', 'sky-4.png', 'sky-5.png', 'sky-6.png']} path={'/experimento/'} />\r\n    </React.Suspense>\r\n    <SpotLightsProvider/>\r\n    <AmbientLightProvider/>\r\n    <PlanesProvider/>\r\n    <Sequencer soundsApi={props.soundsApi}/>\r\n    <WavesGenerator/>\r\n    <Effects/>\r\n    <WaveModules/>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Scene;\r\n","import React from 'react';\r\nimport { Canvas } from 'react-three-fiber';\r\n\r\nimport Scene from './Scene';\r\nimport { useSoundsApi } from './Sound';\r\nimport Effects from './Effects';\r\nconst FullSizeCanvas = (props) => {\r\n    return (\r\n        <Canvas {...props} style={{height: \"100vh\", width: \"100%\"}} invalidateFrameloop shadowMap/>\r\n    );\r\n}\r\n\r\nconst Frame = () => {\r\n\r\n    const soundsApi = useSoundsApi();\r\n\r\n    return (\r\n        <FullSizeCanvas\r\n            concurrent\r\n            gl={{ antialias: false }}\r\n        >\r\n            <Scene soundsApi={soundsApi}/>\r\n        </FullSizeCanvas>\r\n    );\r\n\r\n}\r\n\r\nexport default Frame;","export const fontColor = 'hsla(0, 80%, 80%, 1)';\r\n\r\nexport const backgroundColor = `hsla(0, 80%, 10%, 1);`;\r\n\r\nexport const backgroundActive = `hsla(0, 80%, 20%, 1);`;\r\n","import styled from 'styled-components';\r\nimport {fontColor} from '../../style/color';\r\n\r\nconst Title = styled.h1`\r\n    ${props => props.noMarginTop ? \"\" : \"margin-top: 15vh;\"}\r\n    font-size: ${props => props.mobileHorizontal === true ? \"3.5em\" : \"5em\"};\r\n    color: ${fontColor};\r\n`;\r\n\r\nexport default Title;\r\n","import styled from 'styled-components';\r\nimport {fontColor} from '../../style/color';\r\n\r\nconst SubTitle = styled.h1`\r\n    margin-top: 5vh;\r\n    font-size: ${props => props.mobileHorizontal === true ? \"2.5rem\" : \"3em\"};\r\n    color: ${fontColor};\r\n`;\r\n\r\nexport default SubTitle;\r\n\r\n","import styled from 'styled-components';\r\nimport {fontColor} from '../../style/color';\r\n\r\nconst Credits = styled.h1`\r\n    margin-top: 5vh;\r\n    font-size: ${props => props.mobileHorizontal === true ?  \"1rem\" : \"1.5em\"};\r\n    color: ${fontColor};\r\n`;\r\n\r\nexport default Credits;\r\n","import React from 'react';\r\n\r\nfunction useMobilePress(props) {\r\n\r\n    const [active, isActive] = React.useState(false);\r\n    const [moved, isMoved] = React.useState(false);\r\n    \r\n    return {\r\n        onClick: (e) => {\r\n            if(props.onClick !== undefined) props.onClick(e);\r\n        },\r\n        active: active && !moved,\r\n        onTouchStart: (e) => {\r\n            e.preventDefault();\r\n            setTimeout(() => {\r\n                if(!moved)isActive(true)\r\n            }, 100);\r\n            if(props.onTouchStart !== undefined) props.onTouchStart();\r\n        },\r\n        onTouchEnd: (e) => {\r\n            e.preventDefault();\r\n            e.persist();\r\n            if(!moved)props.onClick(e);\r\n            isMoved(false);\r\n            isActive(false);\r\n            setTimeout(() => isActive(false), 100);\r\n            if(props.onTouchEnd !== undefined) props.onTouchEnd(e);   \r\n        },\r\n        onTouchMove: (e) => {\r\n            e.preventDefault();\r\n            isMoved(true);\r\n            isActive(false);\r\n            setTimeout(() => isActive(false), 100);\r\n            if(props.onTouchMove !== undefined) props.onTouchMove(e);\r\n        },\r\n        onTouchCancel: (e) => {\r\n            e.preventDefault();\r\n            isActive(false);\r\n            isMoved(false);\r\n            setTimeout(() => isActive(false), 100);\r\n            if(props.onTouchCancel !== undefined) props.onTouchCancel(e);\r\n        },\r\n        onMouseDown: (e) => {\r\n            if(props.onMouseDown !== undefined) props.onMouseDown(e);\r\n            isActive(true);\r\n        },\r\n        onMouseUp: (e) => {\r\n            if(props.onMouseUp !== undefined) props.onMouseUp(e);\r\n            isActive(false);\r\n        },\r\n        onMouseLeave: (e) => {\r\n            if(props.onMouseUp !== undefined) props.onMouseUp(e);\r\n            isActive(false);\r\n        }\r\n    };\r\n  };\r\n\r\n  export default useMobilePress;\r\n","import { fontColor, backgroundColor, backgroundActive } from '../../style/color.js';\r\nimport styled from 'styled-components';\r\nimport useMobilePress from '../../hooks/useMobilePress';\r\nimport React from \"react\";\r\n\r\nconst paddingMinusBorder = (base, borderWidth) => base - borderWidth;\r\n    \r\nconst padding = (baseX, baseY) => {\r\n    return `${paddingMinusBorder(baseX, 0.1)}rem ${paddingMinusBorder(baseY, 0.1)}rem`;\r\n};\r\n\r\nexport const hoverTransform = `transform:scale(1.05, 1.05)`;\r\n\r\nconst hover = (props) => !props.active ? `\r\n    @media (hover: hover) and (pointer: fine) {\r\n      &:hover {\r\n        ${hoverTransform}\r\n      }\r\n    }\r\n  ` : \"\";\r\n\r\nconst StyledButtonWithoutMobileSupport = styled.button`\r\n    border-radius: 50%;\r\n    padding: ${padding(0.4, 0.5)};\r\n    border: 0.1vmax solid ${fontColor};\r\n    box-sizing: border-box;\r\n    &:focus {\r\n        outline:none !important;\r\n    };\r\n    -webkit-user-select: none; /* Safari */        \r\n    -moz-user-select: none; /* Firefox */\r\n    -ms-user-select: none; /* IE10+/Edge */\r\n    user-select: none; /* Standard */\r\n    position: relative;\r\n    color: ${fontColor};\r\n    ${props => hover(props)}\r\n    ${props => props.active ? \"transform:scale(0.95, 0.95);\" : \"\"}\r\n    background: ${props => props.active ? backgroundActive : backgroundColor};\r\n    transition: ${props => `background ${props.active ? 0 : 0.25}s linear;`};\r\n    ${props => props.absolute ? `position: absolute;` : \"\"};\r\n    ${props => props.top ? `top: ${props.top}%;` : \"\"}\r\n    ${props => props.right ? `right: ${props.right}%;` : \"\"}\r\n    ${props => props.floating ? `z-index: 5000;` : \"\"};\r\n`;\r\n\r\nconst StyledButton = (props) => {\r\n\r\n  const press = useMobilePress(props);\r\n  \r\n  return <StyledButtonWithoutMobileSupport {...props} {...press}/>;\r\n};\r\n\r\nexport default StyledButton;\r\n","const vw = Math.max(document.documentElement.clientWidth || 0, window.innerWidth || 0)\r\n\r\nconst vh = Math.max(document.documentElement.clientHeight || 0, window.innerHeight || 0)\r\n\r\nconst isVertical = vh > vw;\r\n\r\nexport default isVertical;\r\n","import React from 'react';\r\nimport styled from 'styled-components';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport {fontColor} from '../../../style/color';\r\nimport Title from '../../text/Title';\r\nimport SubTitle from '../../text/SubTitle';\r\nimport Credits from '../../text/Credits';\r\nimport PlayArrowIcon from '@material-ui/icons/PlayArrow';\r\nimport StyledButton from '../../buttons/StyledButton';\r\nimport KeyboardArrowDownIcon from '@material-ui/icons/KeyboardArrowDown';\r\nimport isVertical from '../../../utils/isVertical';\r\nimport { isMobile, isTablet } from 'react-device-detect';\r\n\r\nconst mobileHorizontal = !isVertical && isMobile && !isTablet;\r\n\r\nconst Description = () => {\r\n    return (\r\n        <Grid item xs={12}>\r\n            <Title mobileHorizontal={mobileHorizontal}>Experimento</Title>\r\n            <SubTitle mobileHorizontal={mobileHorizontal}>Espacio Procedural</SubTitle>\r\n            <Credits mobileHorizontal={mobileHorizontal}>Manuel Strajman</Credits>\r\n            <Credits mobileHorizontal={mobileHorizontal}>Esteban Sagman</Credits>\r\n            <Credits mobileHorizontal={mobileHorizontal}>Leonel Sagman</Credits>\r\n            <Credits mobileHorizontal={mobileHorizontal}>Agustin Cotroneo</Credits>\r\n        </Grid>\r\n    );\r\n};\r\n\r\nconst PlayButton = (props) => {\r\n    return (\r\n        <StyledButton onClick={props.play}>\r\n            {props.started ?\r\n                <KeyboardArrowDownIcon\r\n                    fontSize=\"large\"\r\n                    style={{color: fontColor}}\r\n                />\r\n                    :\r\n                <PlayArrowIcon\r\n                    fontSize=\"large\"\r\n                    style={{color: fontColor}}\r\n                />\r\n            }\r\n        </StyledButton>\r\n    );\r\n};\r\n\r\nconst InitialPage = (props) => {\r\n    return (\r\n        <Grid container justify={\"center\"} align={\"center\"} spacing={mobileHorizontal ? 3 : 10}>\r\n            <Description/>\r\n            <Grid item xs={10}>\r\n                <PlayButton play={props.start} started={props.started}/>\r\n            </Grid>\r\n        </Grid>\r\n    );\r\n};\r\n\r\nexport default InitialPage;\r\n","import { createGlobalStyle } from \"styled-components\";\r\nimport {fontColor, backgroundColor, backgroundActive} from './color';\r\n\r\nconst GlobalStyle = createGlobalStyle`\r\n    background-color: ${backgroundColor};\r\n\r\n    ::-webkit-scrollbar {\r\n    width: 0.6rem;\r\n    }\r\n    \r\n    ::-webkit-scrollbar-track {\r\n    background-color: ${backgroundColor};\r\n    border-left: 0.05rem solid ${fontColor};\r\n    border-right: 0.05rem solid ${fontColor};\r\n    }\r\n\r\n    ::-webkit-scrollbar-thumb {\r\n    background-color: ${fontColor};\r\n    }\r\n\r\n`;\r\n\r\nexport default GlobalStyle;\r\n","import React from 'react';\nimport Frame from './components/Frame';\nimport { Sound } from './components/Sound';\nimport InitialPage from './components/layout/pages/InitialPage';\nimport GlobalStyle from './style/GlobalStyle';\n\nfunction App() {\n\n  const [started, setStarted] = React.useState(false);\n  return (\n    <div className=\"App\">\n      <GlobalStyle/>\n      <Sound>\n        {\n          started ? <Frame/> : <InitialPage started={started} start={() => setStarted(true)}/>\n        }\n      </Sound>\n    </div>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport \"react-app-polyfill/ie11\";\nimport \"react-app-polyfill/stable\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}